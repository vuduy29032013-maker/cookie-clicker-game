<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
    <title>Cookie Clicker Game-By Vuduy 7/7  </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            /* ANTI-ZOOM ABSOLUTE */
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }
        
        /* Prevent horizontal overflow globally */
        *:not(html):not(body) {
            max-width: 100%;
        }
        
        /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           COMPREHENSIVE MOBILE UX FIXES
           ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
        
        /* Universal Button Improvements */
        button, .button, .buy-button, .admin-button {
            /* Touch-friendly */
            min-height: 44px;
            min-width: 44px;
            padding: 10px 20px;
            
            /* Visual feedback */
            cursor: pointer;
            transition: all 0.15s ease;
            
            /* Prevent text issues */
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            
            /* Touch optimization */
            -webkit-tap-highlight-color: transparent;
            touch-action: manipulation;
            user-select: none;
            
            /* Spacing for easier tapping */
            margin: 2px;
            
            /* Clear active state */
            position: relative;
        }
        
        /* Active state feedback (instant) */
        button:active:not(:disabled), 
        .button:active:not(.disabled) {
            transform: scale(0.95);
            opacity: 0.8;
            transition: all 0.05s ease; /* Fast feedback */
        }
        
        /* Disabled state */
        button:disabled,
        button.disabled,
        .button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        /* Remove hover on touch devices */
        @media (hover: none) {
            button:hover,
            .button:hover,
            .shop-item:hover {
                transform: none;
                background: inherit;
            }
        }

        html {
            /* Base HTML settings */
            touch-action: manipulation;
            -ms-touch-action: manipulation;
            overflow-x: hidden; /* No horizontal scrollbar on HTML */
            overflow-y: scroll; /* ALWAYS show vertical scrollbar (prevent flicker) */
            scrollbar-gutter: stable; /* Reserve space for scrollbar */
            height: 100%; /* Force height */
        }
        
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100%;
            height: auto; /* Allow growth */
            max-width: 100vw; /* Prevent overflow */
            color: white;
            padding: 20px;
            margin: 0;
            overflow-x: hidden; /* No horizontal scroll on body */
            overflow-y: visible; /* Let HTML handle scroll */
            -webkit-overflow-scrolling: touch; /* Smooth scrolling on iOS */
        }

        /* Exception: Allow text selection in inputs */
        input, textarea, select {
            user-select: text;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
            overflow: visible; /* Let content flow naturally */
            position: relative;
            min-height: 100vh; /* Ensure minimum height */
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 3em;
            background: linear-gradient(to right, #ffd700, #ff8c00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .coins-display {
            font-size: 2.5em;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .stats {
            font-size: 0.9em;
            color: #ddd;
            margin-top: 10px;
        }

        .main-content {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .game-section {
            flex: 1;
            min-width: 300px;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .click-button {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            border: 8px solid #ffed4e;
            font-size: 6em;
            cursor: pointer;
            transition: transform 0.1s;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            
            /* Prevent text selection */
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            
            /* Prevent tap highlight */
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            
            /* Prevent zoom on rapid tap */
            touch-action: manipulation;
            -ms-touch-action: manipulation;
            
            /* Prevent dragging */
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }

        .click-button:hover:not(.disabled) {
            transform: scale(1.05);
        }

        .click-button:active:not(.disabled) {
            transform: scale(0.95);
        }

        .click-button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .shop-section {
            flex: 1;
            min-width: 300px;
        }

        .shop-title {
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .shop-items {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .shop-item {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
            position: relative; /* For rarity badge positioning */
        }

        .shop-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .shop-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           TELEPORT SHOP STYLES
           ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
        
        .teleport-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 15px;
            padding: 20px;
            color: white;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }
        
        .teleport-btn:hover {
            transform: translateY(-5px) scale(1.05);
            box-shadow: 0 8px 25px rgba(102,126,234,0.5);
            background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }
        
        .teleport-btn:active {
            transform: translateY(-2px) scale(1.02);
        }
        
        /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           RARITY BADGE STYLES
           ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
        
        .rarity-badge {
            position: absolute;
            top: -10px;
            left: 10px;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.75em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            z-index: 10;
            
            /* NO ANIMATIONS - STATIC ONLY */
        }
        
        .rarity-stars {
            position: absolute;
            top: -10px;
            right: 10px;
            font-size: 0.9em;
            text-shadow: 0 2px 4px rgba(255,215,0,0.8);
            /* NO ANIMATIONS */
        }
        
        /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           TIER STYLES - NO ANIMATIONS
           ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
        
        /* All tiers are now static - no animations */
        .tier-hardcore,
        .tier-owner,
        .tier-goat,
        .tier-strongest,
        .tier-powerest,
        .tier-rainbow {
            /* NO ANIMATIONS */
        }

        .item-info {
            flex: 1;
        }

        .item-name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .item-description {
            font-size: 0.9em;
            color: #ddd;
        }

        .item-owned {
            font-size: 0.8em;
            color: #ffd700;
            margin-top: 5px;
        }

        .buy-button {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .buy-button:hover {
            transform: scale(1.05);
        }

        .buy-button:active {
            transform: scale(0.95);
        }

        .buy-button.disabled {
            background: #666;
            cursor: not-allowed;
        }

        .icon {
            font-size: 2em;
            margin-right: 10px;
        }

        .admin-panel {
            position: fixed;
            top: 20px;  /* Top */
            left: 20px;  /* LEFT side - same as settings */
            background: rgba(0, 0, 0, 0.9);
            padding: 12px;
            border-radius: 10px;
            border: 2px solid #ffd700;
            z-index: 100;
            max-width: 280px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.5);
        }

        .playtime-panel {
            position: fixed;
            top: 20px;
            right: 20px;  /* Keep playtime on right */
            right: 320px;
            background: rgba(0, 0, 0, 0.9);
            padding: 10px 15px;
            border-radius: 10px;
            border: 2px solid #00ff00;
            font-size: 1em;
            font-weight: bold;
            color: #00ff00;
            z-index: 100;
            max-width: 180px;
        }

        .admin-input {
            padding: 8px;
            border-radius: 5px;
            border: none;
            margin-right: 5px;
            width: 120px;
            font-size: 14px;
        }

        .admin-button {
            padding: 8px 12px;
            background: #ffd700;
            border: none;
            border-radius: 5px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            font-size: 14px;
            white-space: nowrap;
        }

        .admin-button:hover {
            background: #ffed4e;
        }
        
        /* Admin panel title */
        .admin-panel h3 {
            margin: 0 0 10px 0;
            font-size: 16px;
            color: #ffd700;
        }

        .admin-controls {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #ffd700;
            max-height: 500px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .admin-controls::-webkit-scrollbar {
            width: 8px;
        }

        .admin-controls::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .admin-controls::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            border-radius: 4px;
        }

        .admin-controls::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #ff8c00 0%, #ffd700 100%);
        }

        .admin-money-button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }

        .admin-money-button:hover {
            transform: scale(1.05);
        }

        .weather-controls {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #ffd700;
        }

        .weather-control-title {
            font-size: 0.9em;
            margin-bottom: 8px;
            color: #ffd700;
        }

        .weather-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .weather-buttons::-webkit-scrollbar {
            width: 8px;
        }

        .weather-buttons::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .weather-buttons::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border-radius: 4px;
        }

        .weather-buttons::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #00f2fe 0%, #4facfe 100%);
        }

        .weather-summon-btn {
            padding: 6px 10px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 0.8em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .weather-summon-btn:hover {
            transform: scale(1.05);
        }

        .weather-clear-btn {
            padding: 8px 15px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff4757 100%);
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin-top: 5px;
            width: 100%;
        }

        .weather-clear-btn:hover {
            transform: scale(1.05);
        }

        .weather-panel {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.85);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #00bfff;
            z-index: 100;
            min-width: 250px;
            max-width: 350px;
        }

        .weather-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #00bfff;
            text-align: center;
        }

        .weather-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .weather-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            border: 2px solid;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: weatherFadeIn 0.3s ease-in;
        }

        .weather-item.wind {
            border-color: #87ceeb;
            background: rgba(135, 206, 235, 0.2);
        }

        .weather-item.cloud {
            border-color: #b0c4de;
            background: rgba(176, 196, 222, 0.2);
        }

        .weather-item.rain {
            border-color: #4682b4;
            background: rgba(70, 130, 180, 0.2);
        }

        .weather-item.night {
            border-color: #191970;
            background: rgba(25, 25, 112, 0.2);
        }

        .weather-item.moonlight {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.2);
        }

        .weather-item.meteor {
            border-color: #ff6347;
            background: rgba(255, 99, 71, 0.2);
        }
        .weather-item.acid {
            border-color: #9acd32;
            background: rgba(154, 205, 50, 0.2);
        }

        .weather-item.diamond {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.2);
        }

        .weather-item.emerald {
            border-color: #50c878;
            background: rgba(80, 200, 120, 0.2);
        }

        .weather-item.adminabuse {
            border-color: #ff00ff;
            background: rgba(255, 0, 255, 0.2);
        }

        .weather-item.earthquake {
            border-color: #ff4500;
            background: rgba(255, 69, 0, 0.2);
        }

        .weather-item.thunderstorm {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.2);
        }

        .weather-item.superstorm {
            border-color: #8b00ff;
            background: rgba(139, 0, 255, 0.2);
        }

        .weather-item.winteraurora {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.2);
        }

        .weather-item.shootingstars {
            border-color: #ffe4b5;
            background: rgba(255, 228, 181, 0.2);
        }

        .weather-item.permafrost {
            border-color: #00bfff;
            background: rgba(0, 191, 255, 0.2);
        }

        .weather-item.cyclone {
            border-color: #adff2f;
            background: rgba(173, 255, 47, 0.2);
        }

        .weather-item.dissonant {
            border-color: #ff1493;
            background: rgba(255, 20, 147, 0.2);
        }

        .weather-item.beestorm {
            border-color: #ffa500;
            background: rgba(255, 165, 0, 0.2);
        }

        .weather-item.tropicalrain {
            border-color: #32cd32;
            background: rgba(50, 205, 50, 0.2);
        }

        .weather-item.gentledrizzle {
            border-color: #87ceeb;
            background: rgba(135, 206, 235, 0.2);
        }

        .weather-item.ownerabuse {
            border-color: #ff0000;
            background: rgba(255, 0, 0, 0.3);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
            animation: ownerPulse 2s infinite;
        }

        @keyframes ownerPulse {
            0%, 100% {
                border-color: #ff0000;
                box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
            }
            50% {
                border-color: #ffd700;
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
            }
        }

        @keyframes godPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.8), 0 0 60px rgba(255, 255, 255, 0.5);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 50px rgba(255, 215, 0, 1), 0 0 80px rgba(255, 255, 255, 0.8);
            }
        }

        @keyframes goldGlow {
            0%, 100% {
                box-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
                transform: translateY(0);
            }
            50% {
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.8), 0 0 30px rgba(255, 140, 0, 0.6);
                transform: translateY(-2px);
            }
        }

        @keyframes goldShine {
            0% { background-position: -200% center; }
            100% { background-position: 200% center; }
        }
        
        /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           PREMIUM PASS VISUAL EFFECTS
           ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
        
        @keyframes hueRotate {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }
        
        @keyframes glitchEffect {
            0%, 90%, 100% { 
                filter: none;
                transform: translateX(0);
            }
            92% {
                filter: brightness(1.5) saturate(2);
                transform: translateX(2px);
            }
            94% {
                filter: brightness(0.5) saturate(0.5);
                transform: translateX(-2px);
            }
            96% {
                filter: brightness(1.5) saturate(2);
                transform: translateX(1px);
            }
        }
        
        @keyframes fadeInOut {
            0% { 
                opacity: 0;
                transform: translateY(-20px);
            }
            10%, 90% { 
                opacity: 1;
                transform: translateY(0);
            }
            100% { 
                opacity: 0;
                transform: translateY(-20px);
            }
        }

        .weather-item.rainbowrain {
            border-color: #ff69b4;
            background: linear-gradient(135deg, rgba(255,0,0,0.2), rgba(255,165,0,0.2), rgba(255,255,0,0.2), rgba(0,255,0,0.2), rgba(0,0,255,0.2), rgba(75,0,130,0.2), rgba(238,130,238,0.2));
        }

        .weather-item.goldrain {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.3);
        }

        .weather-item.silverrain {
            border-color: #c0c0c0;
            background: rgba(192, 192, 192, 0.3);
        }

        .weather-item.cosmicrain {
            border-color: #4b0082;
            background: rgba(75, 0, 130, 0.3);
        }

        .weather-item.secretrain {
            border-color: #8a2be2;
            background: rgba(138, 43, 226, 0.3);
        }

        .weather-item.whitehole {
            border-color: #ffffff;
            background: rgba(255, 255, 255, 0.3);
        }

        .weather-item.supernova {
            border-color: #ff4500;
            background: rgba(255, 69, 0, 0.3);
        }

        .weather-item.nancorenova {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.3);
        }

        .weather-item.corruptzenaura {
            border-color: #800080;
            background: rgba(128, 0, 128, 0.3);
        }

        .weather-item.fullmoon {
            border-color: #f0e68c;
            background: rgba(240, 230, 140, 0.3);
        }

        .weather-item.safaridusk {
            border-color: #ff8c00;
            background: rgba(255, 140, 0, 0.3);
        }

        .weather-item.yetinight {
            border-color: #add8e6;
            background: rgba(173, 216, 230, 0.3);
        }

        .weather-item.silentnight {
            border-color: #191970;
            background: rgba(25, 25, 112, 0.3);
        }

        .weather-item.boomboxparty {
            border-color: #ff1493;
            background: rgba(255, 20, 147, 0.3);
        }

        .weather-item.frozeniceking {
            border-color: #00bfff;
            background: rgba(0, 191, 255, 0.3);
        }

        .weather-item.radioactiverain {
            border-color: #00ff00;
            background: rgba(0, 255, 0, 0.3);
        }

        .weather-item.oilrain {
            border-color: #000000;
            background: rgba(50, 50, 50, 0.5);
        }

        .weather-item.sandstrike {
            border-color: #daa520;
            background: rgba(218, 165, 32, 0.3);
            box-shadow: 0 0 15px rgba(218, 165, 32, 0.4);
        }

        /* EGG SHOP & PETS */
        .diamond-display {
            font-size: 1.3em;
            color: #00ffff;
            font-weight: bold;
            margin-left: 20px;
        }

        .egg-shop {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(0, 255, 255, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .egg-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .egg-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #00ffff;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .egg-card:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }

        .egg-details-btn {
            margin-top: 10px;
            padding: 5px 15px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid #00ffff;
            border-radius: 5px;
            color: white;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .egg-details-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .egg-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .egg-name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .egg-price {
            color: #00ffff;
            font-size: 1.1em;
            font-weight: bold;
        }

        .pets-panel {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .pet-inventory-section {
            margin-bottom: 30px;
        }

        .equipped-pets-bar {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 2px solid #00ff00;
        }

        .equipped-slot {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px dashed #666;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .equipped-slot.filled {
            border: 2px solid #00ff00;
            background: rgba(0, 255, 0, 0.1);
        }

        .equipped-pet-icon {
            font-size: 2em;
        }

        .equipped-pet-mult {
            font-size: 0.7em;
            color: #00ff00;
            font-weight: bold;
        }

        .unequip-btn {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4444;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.7em;
            cursor: pointer;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .unequip-btn:hover {
            background: #ff0000;
        }

        .pets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .pet-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #ffd700;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
        }

        .pet-card:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .pet-card.equipped {
            border-color: #00ff00;
            background: rgba(0, 255, 0, 0.15);
        }

        .pet-equipped-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #00ff00;
            color: #000;
            font-size: 0.7em;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
        }
        
        /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           MUTATION BADGES
           ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
        
        .mutation-badge {
            position: absolute;
            top: 5px;
            left: 5px;
            font-size: 0.65em;
            padding: 3px 8px;
            border-radius: 10px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            z-index: 5;
            animation: mutationFloat 2s ease-in-out infinite;
        }
        
        @keyframes mutationFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-2px); }
        }
        
        .mutation-badge.gold {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #000;
            box-shadow: 0 0 10px rgba(255,215,0,0.5);
        }
        
        .mutation-badge.diamond {
            background: linear-gradient(135deg, #00bfff 0%, #1e90ff 100%);
            color: white;
            box-shadow: 0 0 10px rgba(0,191,255,0.5);
        }
        
        .mutation-badge.rainbow {
            background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            background-size: 200% 100%;
            color: white;
            box-shadow: 0 0 10px rgba(255,0,255,0.5);
            animation: mutationFloat 2s ease-in-out infinite, rainbowShift 3s linear infinite;
        }
        
        @keyframes rainbowShift {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }
        
        .mutation-badge.transcendent {
            background: linear-gradient(135deg, #00ffff 0%, #00bfff 100%);
            color: white;
            box-shadow: 0 0 15px rgba(0,255,255,0.7);
            animation: mutationFloat 2s ease-in-out infinite, transcendentPulse 2s ease-in-out infinite;
        }
        
        @keyframes transcendentPulse {
            0%, 100% { 
                box-shadow: 0 0 15px rgba(0,255,255,0.7);
                filter: brightness(1);
            }
            50% { 
                box-shadow: 0 0 25px rgba(0,255,255,1);
                filter: brightness(1.3);
            }
        }

        .pet-icon {
            font-size: 2.5em;
        }

        .pet-name {
            font-size: 0.9em;
            margin-top: 5px;
        }

        .pet-multiplier {
            color: #00ff00;
            font-weight: bold;
            font-size: 0.85em;
        }

        .pet-count {
            color: #ffd700;
            font-size: 0.8em;
        }

        .pet-actions {
            margin-top: 5px;
            display: flex;
            gap: 5px;
            justify-content: center;
        }

        .equip-btn {
            padding: 4px 10px;
            background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%);
            border: none;
            border-radius: 5px;
            color: #000;
            font-weight: bold;
            font-size: 0.75em;
            cursor: pointer;
        }

        .equip-btn:hover {
            transform: scale(1.05);
        }

        .equip-btn:disabled {
            background: #666;
            cursor: not-allowed;
        }

        .section-subtitle {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #ffd700;
            text-align: center;
        }

        .hatch-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            border: 5px solid #ffd700;
            border-radius: 20px;
            padding: 40px;
            z-index: 10000;
            text-align: center;
            min-width: 400px;
            animation: hatchPulse 0.5s infinite;
        }

        .egg-details-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            border: 3px solid #00ffff;
            border-radius: 15px;
            padding: 30px;
            z-index: 10000;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .egg-details-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
        }

        .egg-details-title {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #00ffff;
        }

        .pet-chance-list {
            text-align: left;
            margin: 20px 0;
        }

        .pet-chance-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            border-left: 4px solid #ffd700;
        }

        .pet-chance-item.legendary {
            border-left-color: #ff69b4;
            background: rgba(255, 105, 180, 0.1);
        }

        .pet-chance-item.epic {
            border-left-color: #9370db;
            background: rgba(147, 112, 219, 0.1);
        }

        .pet-chance-item.rare {
            border-left-color: #4169e1;
            background: rgba(65, 105, 225, 0.1);
        }

        .pet-chance-item.common {
            border-left-color: #90ee90;
            background: rgba(144, 238, 144, 0.1);
        }

        .pet-chance-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pet-chance-icon {
            font-size: 1.5em;
        }

        .pet-chance-name {
            font-weight: bold;
        }

        .pet-chance-mult {
            color: #00ff00;
            font-size: 0.9em;
        }

        .pet-chance-percent {
            font-size: 1.1em;
            font-weight: bold;
            color: #ffd700;
        }

        /* Mini Game Styles */
        .multiplier-btn {
            padding: 12px;
            background: linear-gradient(135deg, #2d3561 0%, #1f2544 100%);
            border: 2px solid #0f3460;
            border-radius: 8px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .multiplier-btn:hover {
            transform: scale(1.05);
            border-color: #00d4ff;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.5);
        }

        .multiplier-btn.selected {
            background: linear-gradient(135deg, #00d4ff 0%, #0080ff 100%);
            border-color: #00ff00;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.6);
        }

        .choice-btn {
            padding: 15px;
            background: linear-gradient(135deg, #2d3561 0%, #1f2544 100%);
            border: 3px solid #0f3460;
            border-radius: 12px;
            color: white;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
        }

        .choice-btn:hover {
            transform: scale(1.1);
            border-color: #ffd700;
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }

        .choice-btn:active {
            transform: scale(0.95);
        }

        .close-modal-btn {
            margin-top: 20px;
            padding: 10px 30px;
            background: linear-gradient(135deg, #00ffff 0%, #0080ff 100%);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-size: 1em;
        }

        .close-modal-btn:hover {
            transform: scale(1.05);
        }

        @keyframes hatchPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
        }

        .hatch-egg {
            font-size: 6em;
            margin-bottom: 20px;
            animation: shake 0.5s infinite;
        }

        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }

        .hatch-result {
            font-size: 8em;
            margin: 20px 0;
        }

        .hatch-text {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .hatch-multiplier {
            color: #00ff00;
            font-size: 1.3em;
            font-weight: bold;
        }

        .weather-info {
            flex: 1;
        }

        .weather-name {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 3px;
        }

        .weather-effect {
            font-size: 0.85em;
            color: #ddd;
        }

        .weather-timer {
            font-size: 1.1em;
            font-weight: bold;
            color: #ffd700;
            min-width: 45px;
            text-align: right;
        }

        .weather-empty {
            text-align: center;
            color: #999;
            font-style: italic;
            padding: 20px;
        }

        @keyframes weatherFadeIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .admin-status {
            color: #00ff00;
            font-weight: bold;
            margin-top: 5px;
        }

        .save-panel {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            text-align: center;
        }

        .save-title {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .save-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .save-button, .load-button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 1em;
        }

        .save-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .load-button {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .save-button:hover, .load-button:hover {
            transform: scale(1.05);
        }

        .save-button:active, .load-button:active {
            transform: scale(0.95);
        }

        .file-input {
            display: none;
        }

        .save-info {
            margin-top: 15px;
            font-size: 0.9em;
            color: #ddd;
        }

        .gamepass-panel {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .gamepass-title {
            font-size: 1.5em;
            margin-bottom: 15px;
            text-align: center;
            color: #ffd700;
        }

        .gamepass-input-section {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .gamepass-input {
            padding: 10px;
            border-radius: 5px;
            border: 2px solid #ffd700;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            width: 200px;
            font-size: 1em;
        }

        .redeem-button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            border: none;
            border-radius: 5px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .redeem-button:hover {
            transform: scale(1.05);
        }

        .gamepass-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .gamepass-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .gamepass-card.vip {
            border-color: #4169e1;
        }

        .gamepass-card.premium {
            border-color: #9370db;
        }

        .gamepass-card.legend {
            border-color: #ffd700;
        }
        
        /* ═══════════════════════════════════════════════════
           NEW SPECIAL GAME PASSES - RỰC RỠ & NỔI BẬT
           ═══════════════════════════════════════════════════ */
        
        /* Super Pass - LIMITED */
        .gamepass-card.super {
            border: 3px solid;
            border-color: #ff1493;
            background: linear-gradient(135deg, rgba(255,20,147,0.2) 0%, rgba(138,43,226,0.2) 100%);
            box-shadow: 0 0 30px rgba(255,20,147,0.6), inset 0 0 20px rgba(255,20,147,0.1);
            animation: superGlow 2s ease-in-out infinite;
            position: relative;
        }
        
        @keyframes superGlow {
            0%, 100% { 
                box-shadow: 0 0 30px rgba(255,20,147,0.6), inset 0 0 20px rgba(255,20,147,0.1);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 50px rgba(255,20,147,0.9), inset 0 0 30px rgba(255,20,147,0.2);
                transform: scale(1.02);
            }
        }
        
        /* Infinity Pass - TRANSCENDENT */
        .gamepass-card.infinity {
            border: 3px solid;
            border-color: #00ffff;
            background: linear-gradient(135deg, rgba(0,255,255,0.2) 0%, rgba(138,43,226,0.2) 50%, rgba(255,0,255,0.2) 100%);
            box-shadow: 0 0 40px rgba(0,255,255,0.7), 0 0 60px rgba(255,0,255,0.5);
            animation: infinityPulse 3s ease-in-out infinite, rainbowShift 5s linear infinite;
            position: relative;
        }
        
        @keyframes infinityPulse {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.03) rotate(1deg); }
        }
        
        @keyframes rainbowShift {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }
        
        /* Quantum Pass - HOT */
        .gamepass-card.quantum {
            border: 3px solid;
            border-color: #ff4500;
            background: linear-gradient(135deg, rgba(255,69,0,0.3) 0%, rgba(255,215,0,0.2) 100%);
            box-shadow: 0 0 35px rgba(255,69,0,0.8), inset 0 0 25px rgba(255,140,0,0.3);
            animation: hotFlame 1.5s ease-in-out infinite;
            position: relative;
        }
        
        @keyframes hotFlame {
            0%, 100% { 
                box-shadow: 0 0 35px rgba(255,69,0,0.8), inset 0 0 25px rgba(255,140,0,0.3);
            }
            50% { 
                box-shadow: 0 0 55px rgba(255,69,0,1), inset 0 0 35px rgba(255,140,0,0.5);
                transform: translateY(-3px);
            }
        }
        
        /* Cosmic Pass - BEST FOR YOU */
        .gamepass-card.cosmic {
            border: 3px solid;
            border-color: #9370db;
            background: linear-gradient(135deg, rgba(147,112,219,0.3) 0%, rgba(72,61,139,0.2) 50%, rgba(25,25,112,0.3) 100%);
            box-shadow: 0 0 45px rgba(147,112,219,0.7), 0 0 25px rgba(138,43,226,0.5), inset 0 0 30px rgba(147,112,219,0.2);
            animation: cosmicGlow 2.5s ease-in-out infinite, starTwinkle 4s linear infinite;
            position: relative;
        }
        
        @keyframes cosmicGlow {
            0%, 100% { 
                box-shadow: 0 0 45px rgba(147,112,219,0.7), 0 0 25px rgba(138,43,226,0.5);
                transform: scale(1);
            }
            50% { 
                box-shadow: 0 0 65px rgba(147,112,219,1), 0 0 45px rgba(138,43,226,0.8);
                transform: scale(1.02);
            }
        }
        
        @keyframes starTwinkle {
            0%, 100% { filter: brightness(1); }
            50% { filter: brightness(1.3); }
        }
        
        /* Pass Labels */
        .pass-label {
            position: absolute;
            top: -12px;
            right: 10px;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.75em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            z-index: 10;
            box-shadow: 0 2px 10px rgba(0,0,0,0.5);
            animation: labelFloat 2s ease-in-out infinite;
        }
        
        @keyframes labelFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-3px); }
        }
        
        .pass-label.limited {
            background: linear-gradient(135deg, #ff1493 0%, #ff69b4 100%);
            color: white;
            animation: labelFloat 2s ease-in-out infinite, limitedPulse 1.5s ease-in-out infinite;
        }
        
        @keyframes limitedPulse {
            0%, 100% { box-shadow: 0 2px 10px rgba(255,20,147,0.5); }
            50% { box-shadow: 0 2px 20px rgba(255,20,147,1); }
        }
        
        .pass-label.transcendent {
            background: linear-gradient(135deg, #00ffff 0%, #ff00ff 100%);
            color: white;
            animation: labelFloat 2s ease-in-out infinite, transcendentShine 3s linear infinite;
        }
        
        @keyframes transcendentShine {
            0% { filter: hue-rotate(0deg) brightness(1); }
            100% { filter: hue-rotate(360deg) brightness(1.3); }
        }
        
        .pass-label.hot {
            background: linear-gradient(135deg, #ff4500 0%, #ffa500 100%);
            color: white;
            animation: labelFloat 2s ease-in-out infinite, hotBurn 1s ease-in-out infinite;
        }
        
        @keyframes hotBurn {
            0%, 100% { box-shadow: 0 2px 10px rgba(255,69,0,0.5); }
            50% { box-shadow: 0 2px 25px rgba(255,69,0,1); }
        }
        
        .pass-label.best {
            background: linear-gradient(135deg, #9370db 0%, #ba55d3 100%);
            color: white;
            animation: labelFloat 2s ease-in-out infinite, bestSparkle 2s ease-in-out infinite;
        }
        
        @keyframes bestSparkle {
            0%, 100% { 
                box-shadow: 0 2px 10px rgba(147,112,219,0.5);
                filter: brightness(1);
            }
            50% { 
                box-shadow: 0 2px 20px rgba(147,112,219,1), 0 0 30px rgba(186,85,211,0.8);
                filter: brightness(1.4);
            }
        }
        
        /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           PREMIUM GAMEPASS STYLES (GOLD BAR EXCLUSIVE)
           ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
        
        /* EPIC PASS - Purple/Blue ⚔️ */
        .gamepass-card.epic {
            border: 3px solid;
            border-color: #7c3aed;
            background: linear-gradient(135deg, rgba(124,58,237,0.3) 0%, rgba(37,99,235,0.2) 100%);
            box-shadow: 0 0 25px rgba(124,58,237,0.6), 0 0 15px rgba(37,99,235,0.4);
            animation: epicGlow 2s ease-in-out infinite;
        }
        
        @keyframes epicGlow {
            0%, 100% { 
                box-shadow: 0 0 25px rgba(124,58,237,0.6), 0 0 15px rgba(37,99,235,0.4);
            }
            50% { 
                box-shadow: 0 0 35px rgba(124,58,237,0.9), 0 0 25px rgba(37,99,235,0.7);
            }
        }
        
        .pass-label.powerful {
            background: linear-gradient(135deg, #7c3aed 0%, #2563eb 100%);
            color: white;
            animation: labelFloat 2s ease-in-out infinite;
        }
        
        /* PRISMATIC PASS - Rainbow 🌈 */
        .gamepass-card.prismatic {
            border: 3px solid;
            border-color: #ff00ff;
            background: linear-gradient(135deg, 
                rgba(255,0,0,0.2) 0%, 
                rgba(255,127,0,0.2) 16.67%, 
                rgba(255,255,0,0.2) 33.33%, 
                rgba(0,255,0,0.2) 50%, 
                rgba(0,0,255,0.2) 66.67%, 
                rgba(75,0,130,0.2) 83.33%, 
                rgba(148,0,211,0.2) 100%);
            box-shadow: 0 0 35px rgba(255,0,255,0.7);
            animation: prismaticShift 3s linear infinite;
        }
        
        @keyframes prismaticShift {
            0% { 
                filter: hue-rotate(0deg) brightness(1.1);
                box-shadow: 0 0 35px rgba(255,0,255,0.7);
            }
            50% {
                filter: hue-rotate(180deg) brightness(1.3);
                box-shadow: 0 0 45px rgba(0,255,255,0.9);
            }
            100% { 
                filter: hue-rotate(360deg) brightness(1.1);
                box-shadow: 0 0 35px rgba(255,0,255,0.7);
            }
        }
        
        .pass-label.colorful {
            background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            background-size: 200% 100%;
            color: white;
            animation: labelFloat 2s ease-in-out infinite, rainbowSlide 2s linear infinite;
        }
        
        @keyframes rainbowSlide {
            0% { background-position: 0% 50%; }
            100% { background-position: 100% 50%; }
        }
        
        /* DIVINE PASS - Gold/White ✨ */
        .gamepass-card.divine {
            border: 3px solid;
            border-color: #ffd700;
            background: linear-gradient(135deg, rgba(255,215,0,0.3) 0%, rgba(255,255,255,0.2) 100%);
            box-shadow: 0 0 40px rgba(255,215,0,0.8), 0 0 20px rgba(255,255,255,0.6);
            animation: divineAura 3s ease-in-out infinite;
        }
        
        @keyframes divineAura {
            0%, 100% { 
                box-shadow: 0 0 40px rgba(255,215,0,0.8), 0 0 20px rgba(255,255,255,0.6);
                filter: brightness(1.1);
            }
            50% { 
                box-shadow: 0 0 60px rgba(255,215,0,1), 0 0 40px rgba(255,255,255,0.9), 0 0 80px rgba(255,215,0,0.4);
                filter: brightness(1.3);
            }
        }
        
        .pass-label.godlike {
            background: linear-gradient(135deg, #ffd700 0%, #ffffff 100%);
            color: #000;
            font-weight: 900;
            animation: labelFloat 2s ease-in-out infinite, divineShine 2s ease-in-out infinite;
            text-shadow: 0 0 5px rgba(255,215,0,0.8);
        }
        
        @keyframes divineShine {
            0%, 100% { 
                box-shadow: 0 2px 15px rgba(255,215,0,0.6);
            }
            50% { 
                box-shadow: 0 2px 30px rgba(255,215,0,1), 0 0 40px rgba(255,255,255,0.8);
            }
        }
        
        /* SECRET PASS - Black/Dark Red 🔒 */
        .gamepass-card.secret {
            border: 3px solid;
            border-color: #8b0000;
            background: linear-gradient(135deg, rgba(0,0,0,0.9) 0%, rgba(139,0,0,0.5) 100%);
            box-shadow: 0 0 30px rgba(139,0,0,0.7);
            animation: secretGlitch 4s ease-in-out infinite;
        }
        
        @keyframes secretGlitch {
            0%, 90%, 100% { 
                box-shadow: 0 0 30px rgba(139,0,0,0.7);
                filter: brightness(1);
            }
            92%, 94%, 96% {
                box-shadow: 0 0 50px rgba(255,0,0,1);
                filter: brightness(1.5) saturate(2);
                transform: translateX(2px);
            }
            93%, 95% {
                transform: translateX(-2px);
            }
        }
        
        .pass-label.hidden {
            background: linear-gradient(135deg, #000000 0%, #8b0000 100%);
            color: #ff0000;
            font-weight: 900;
            animation: labelFloat 2s ease-in-out infinite, secretPulse 2s ease-in-out infinite;
            text-shadow: 0 0 10px rgba(255,0,0,0.8);
        }
        
        @keyframes secretPulse {
            0%, 100% { 
                box-shadow: 0 2px 10px rgba(139,0,0,0.5);
            }
            50% { 
                box-shadow: 0 2px 25px rgba(255,0,0,1), 0 0 35px rgba(139,0,0,0.8);
            }
        }
        
        /* Buy Button Styles */
        .buy-gamepass-btn {
            margin-top: 15px;
            padding: 12px 24px;
            border: 2px solid #ffd700;
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%);
            color: #000;
            font-weight: bold;
            font-size: 1em;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(255,215,0,0.4);
        }
        
        .buy-gamepass-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(255,215,0,0.7);
        }
        
        .buy-gamepass-btn:active {
            transform: scale(0.95);
        }
        
        .buy-gamepass-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }
        
        .buy-gamepass-btn.prismatic-btn {
            background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            background-size: 200% 100%;
            animation: rainbowSlide 2s linear infinite;
            color: white;
            border-color: #ff00ff;
        }
        
        .buy-gamepass-btn.divine-btn {
            background: linear-gradient(135deg, #ffd700 0%, #ffffff 50%, #ffd700 100%);
            color: #000;
            border-color: #ffd700;
            animation: divineButtonShine 2s ease-in-out infinite;
        }
        
        @keyframes divineButtonShine {
            0%, 100% { box-shadow: 0 4px 15px rgba(255,215,0,0.4); }
            50% { box-shadow: 0 4px 25px rgba(255,215,0,0.9), 0 0 40px rgba(255,255,255,0.6); }
        }
        
        .buy-gamepass-btn.secret-btn {
            background: linear-gradient(135deg, #000000 0%, #8b0000 100%);
            color: #ff0000;
            border-color: #8b0000;
        }
        
        .pass-price {
            font-size: 1.1em;
            font-weight: bold;
            color: #ffd700;
            margin: 10px 0;
            text-shadow: 0 0 10px rgba(255,215,0,0.5);
        }

        .gamepass-card.owned {
            background: rgba(0, 255, 0, 0.1);
        }

        .gamepass-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .gamepass-benefits {
            font-size: 0.9em;
            color: #ddd;
            text-align: left;
            margin-top: 10px;
        }

        .gamepass-benefits li {
            margin: 5px 0;
        }

        .gamepass-status {
            margin-top: 10px;
            padding: 5px;
            border-radius: 5px;
            font-weight: bold;
        }

        .gamepass-status.owned {
            background: rgba(0, 255, 0, 0.3);
            color: #00ff00;
        }

        .gamepass-status.not-owned {
            background: rgba(255, 0, 0, 0.3);
            color: #ff6b6b;
        }

        .potion-shop, .inventory-panel {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .section-title {
            font-size: 1.5em;
            margin-bottom: 15px;
            text-align: center;
        }

        .potion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .potion-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            position: relative;
            overflow: visible;
        }

        .potion-card.x2 {
            border-color: #4169e1;
        }

        .potion-card.x3 {
            border-color: #9370db;
        }

        .potion-card.x4 {
            border-color: #ff6347;
        }
        
        .potion-card.x5 {
            border-color: #ff00ff;
            box-shadow: 0 0 15px rgba(255,0,255,0.5);
        }
        
        .potion-card.x6 {
            border-color: #ffd700;
            box-shadow: 0 0 15px rgba(255,215,0,0.5);
        }
        
        .potion-card.x10 {
            border-color: #ff4500;
            box-shadow: 0 0 20px rgba(255,69,0,0.7);
        }
        
        /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           ANIMATED POTION LABELS
           ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
        
        .potion-label {
            position: absolute;
            top: -12px;
            left: 50%;
            transform: translateX(-50%);
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 0.7em;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            color: white;
            text-shadow: 0 2px 4px rgba(0,0,0,0.8);
            z-index: 10;
            white-space: nowrap;
        }
        
        .potion-label.basic {
            background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%);
            animation: basicPulse 2s ease-in-out infinite;
        }
        
        @keyframes basicPulse {
            0%, 100% { 
                box-shadow: 0 0 10px rgba(0,255,0,0.5);
            }
            50% { 
                box-shadow: 0 0 20px rgba(0,255,0,0.8);
            }
        }
        
        .potion-label.rare {
            background: linear-gradient(135deg, #0080ff 0%, #0056b3 100%);
            animation: rareGlow 2s ease-in-out infinite;
        }
        
        @keyframes rareGlow {
            0%, 100% { 
                box-shadow: 0 0 10px rgba(0,128,255,0.6);
            }
            50% { 
                box-shadow: 0 0 20px rgba(0,128,255,1);
            }
        }
        
        .potion-label.epic {
            background: linear-gradient(135deg, #9370db 0%, #6a4fc1 100%);
            animation: epicShine 2s ease-in-out infinite;
        }
        
        @keyframes epicShine {
            0%, 100% { 
                box-shadow: 0 0 10px rgba(147,112,219,0.7);
                filter: brightness(1);
            }
            50% { 
                box-shadow: 0 0 25px rgba(147,112,219,1);
                filter: brightness(1.3);
            }
        }
        
        .potion-label.rainbow {
            background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
            background-size: 200% 100%;
            animation: rainbowFlow 3s linear infinite, rainbowGlow 2s ease-in-out infinite;
        }
        
        @keyframes rainbowFlow {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }
        
        @keyframes rainbowGlow {
            0%, 100% { 
                box-shadow: 0 0 15px rgba(255,0,255,0.8);
            }
            50% { 
                box-shadow: 0 0 30px rgba(255,255,0,1);
            }
        }
        
        .potion-label.stellar {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
            background-size: 200% 100%;
            animation: stellarSparkle 2s ease-in-out infinite, stellarShift 3s linear infinite;
        }
        
        @keyframes stellarSparkle {
            0%, 100% { 
                box-shadow: 0 0 15px rgba(255,215,0,0.8), 0 0 30px rgba(255,255,255,0.5);
                filter: brightness(1.2);
            }
            50% { 
                box-shadow: 0 0 30px rgba(255,215,0,1), 0 0 50px rgba(255,255,255,0.8);
                filter: brightness(1.5);
            }
        }
        
        @keyframes stellarShift {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }
        
        .potion-label.legendary {
            background: linear-gradient(135deg, #ff4500 0%, #ff8c00 50%, #ff0000 100%);
            background-size: 200% 100%;
            animation: legendaryFire 2s ease-in-out infinite, legendaryMove 3s linear infinite;
        }
        
        @keyframes legendaryFire {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(255,69,0,1), 0 0 40px rgba(255,140,0,0.8);
                filter: brightness(1.2);
            }
            50% { 
                box-shadow: 0 0 40px rgba(255,0,0,1), 0 0 60px rgba(255,69,0,1);
                filter: brightness(1.5);
            }
        }
        
        @keyframes legendaryMove {
            0% { background-position: 0% 50%; }
            100% { background-position: 200% 50%; }
        }

        .potion-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .potion-name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .potion-effect {
            font-size: 0.9em;
            color: #ddd;
            margin-bottom: 10px;
        }

        .buy-potion-button {
            padding: 8px 16px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
        }

        .buy-potion-button:hover {
            transform: scale(1.05);
        }

        .buy-potion-button.disabled {
            background: #666;
            cursor: not-allowed;
        }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .inventory-item {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #ffd700;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .inventory-count {
            font-size: 1.5em;
            color: #ffd700;
            margin: 10px 0;
        }

        .use-button {
            padding: 8px 16px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
        }

        .use-button:hover {
            transform: scale(1.05);
        }

        .use-button.disabled {
            background: #666;
            cursor: not-allowed;
        }

        .potion-timer {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            border: 3px solid #ffd700;
            border-radius: 15px;
            padding: 20px 40px;
            font-size: 2em;
            font-weight: bold;
            z-index: 1000;
            display: none;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }

        .potion-timer.active {
            display: block;
        }

        .afk-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .afk-overlay.active {
            display: flex;
        }

        .afk-modal {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 3px solid #ff6b6b;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 500px;
        }

        .afk-title {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #ff6b6b;
        }

        .afk-message {
            font-size: 1.2em;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .afk-button {
            padding: 15px 40px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .afk-button:hover {
            transform: scale(1.05);
        }
        
        /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           🎮 GAME PASS STORE STYLES
           ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
        
        .game-pass-section {
            background: rgba(0, 0, 0, 0.3);
            padding: 25px;
            border-radius: 15px;
            margin-top: 30px;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .game-pass-title {
            text-align: center;
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 20px rgba(255, 215, 0, 0.5);
        }
        
        .game-pass-subtitle {
            text-align: center;
            font-size: 1.1em;
            color: #ddd;
            margin-bottom: 25px;
        }
        
        .game-passes-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        /* Base Pass Card */
        .game-pass-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 3px solid transparent;
        }
        
        .game-pass-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }
        
        /* Badge/Label */
        .pass-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            padding: 8px 15px;
            border-radius: 20px;
            font-weight: bold;
            font-size: 0.85em;
            text-transform: uppercase;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);
            z-index: 1;
        }
        
        /* SUPER PASS - Rainbow gradient */
        .game-pass-card.super-pass {
            background: linear-gradient(135deg, 
                rgba(138, 43, 226, 0.3) 0%,
                rgba(255, 215, 0, 0.3) 50%,
                rgba(255, 0, 0, 0.3) 100%);
            border-color: #ffd700;
            animation: superPassGlow 3s ease-in-out infinite;
        }
        
        @keyframes superPassGlow {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(255, 215, 0, 0.6),
                           0 0 40px rgba(255, 0, 0, 0.4);
            }
            50% { 
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.8),
                           0 0 60px rgba(255, 0, 0, 0.6);
            }
        }
        
        .super-pass .pass-badge {
            background: linear-gradient(135deg, #ff0000 0%, #ffd700 100%);
            animation: pulse 1.5s ease-in-out infinite;
        }
        
        /* STARTER PASS - Blue/Green */
        .game-pass-card.starter-pass {
            background: linear-gradient(135deg, 
                rgba(0, 191, 255, 0.2) 0%,
                rgba(0, 255, 127, 0.2) 100%);
            border-color: #00bfff;
        }
        
        .starter-pass .pass-badge {
            background: linear-gradient(135deg, #00bfff 0%, #00ff7f 100%);
        }
        
        /* INSANE PASS - Fire red/orange */
        .game-pass-card.insane-pass {
            background: linear-gradient(135deg, 
                rgba(255, 69, 0, 0.3) 0%,
                rgba(255, 140, 0, 0.3) 100%);
            border-color: #ff4500;
            animation: fireGlow 2s ease-in-out infinite;
        }
        
        @keyframes fireGlow {
            0%, 100% { box-shadow: 0 0 15px rgba(255, 69, 0, 0.6); }
            50% { box-shadow: 0 0 25px rgba(255, 69, 0, 0.9); }
        }
        
        .insane-pass .pass-badge {
            background: linear-gradient(135deg, #ff4500 0%, #ff8c00 100%);
            animation: pulse 1s ease-in-out infinite;
        }
        
        /* TRANSCENDENT PASS - White/Rainbow */
        .game-pass-card.transcendent-pass {
            background: linear-gradient(135deg, 
                rgba(255, 255, 255, 0.2) 0%,
                rgba(138, 43, 226, 0.2) 50%,
                rgba(255, 215, 0, 0.2) 100%);
            border-color: #ffffff;
            animation: transcendentGlow 4s ease-in-out infinite;
        }
        
        @keyframes transcendentGlow {
            0% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.6); }
            33% { box-shadow: 0 0 30px rgba(138, 43, 226, 0.8); }
            66% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); }
            100% { box-shadow: 0 0 20px rgba(255, 255, 255, 0.6); }
        }
        
        .transcendent-pass .pass-badge {
            background: linear-gradient(135deg, 
                #ffffff 0%, 
                #8a2be2 50%, 
                #ffd700 100%);
            animation: rainbow 3s linear infinite;
        }
        
        @keyframes rainbow {
            0% { filter: hue-rotate(0deg); }
            100% { filter: hue-rotate(360deg); }
        }
        
        /* Pass Header */
        .pass-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .pass-icon {
            font-size: 2.5em;
        }
        
        .pass-name {
            font-size: 1.4em;
            font-weight: bold;
            flex: 1;
        }
        
        .pass-description {
            color: #ddd;
            font-size: 0.95em;
            margin-bottom: 15px;
            font-style: italic;
        }
        
        /* Benefits List */
        .pass-benefits {
            margin: 15px 0;
        }
        
        .pass-benefit {
            padding: 8px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .pass-benefit:last-child {
            border-bottom: none;
        }
        
        .benefit-icon {
            font-size: 1.2em;
            min-width: 25px;
        }
        
        .benefit-text {
            flex: 1;
            font-size: 0.95em;
        }
        
        .benefit-value {
            font-weight: bold;
            color: #ffd700;
        }
        
        /* Pass Price & Button */
        .pass-footer {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .pass-price {
            font-size: 1.5em;
            font-weight: bold;
            color: #ffd700;
        }
        
        .pass-buy-button {
            padding: 12px 30px;
            border: none;
            border-radius: 10px;
            font-weight: bold;
            font-size: 1.1em;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
        }
        
        .pass-buy-button:hover {
            transform: scale(1.05);
        }
        
        .pass-buy-button:active {
            transform: scale(0.98);
        }
        
        /* Super Pass Button */
        .super-pass .pass-buy-button {
            background: linear-gradient(135deg, #8a2be2 0%, #ffd700 50%, #ff0000 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(255, 215, 0, 0.5);
        }
        
        /* Starter Pass Button */
        .starter-pass .pass-buy-button {
            background: linear-gradient(135deg, #00bfff 0%, #00ff7f 100%);
            color: white;
        }
        
        /* Insane Pass Button */
        .insane-pass .pass-buy-button {
            background: linear-gradient(135deg, #ff4500 0%, #ff8c00 100%);
            color: white;
        }
        
        /* Transcendent Pass Button */
        .transcendent-pass .pass-buy-button {
            background: linear-gradient(135deg, #ffffff 0%, #8a2be2 50%, #ffd700 100%);
            color: #000;
            font-weight: bold;
        }
        
        /* Owned Badge */
        .pass-owned {
            background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%);
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 5px;
        }

        .afk-button:hover {
            transform: scale(1.05);
        }

        .afk-warning {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 107, 107, 0.95);
            border: 2px solid #ff0000;
            border-radius: 10px;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            z-index: 1001;
            display: none;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
        }

        .afk-warning.active {
            display: block;
            animation: pulse 1s infinite;
        }

        .rebirth-panel {
            background: rgba(255, 215, 0, 0.2);
            border: 3px solid #ffd700;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .rebirth-title {
            font-size: 1.8em;
            text-align: center;
            margin-bottom: 15px;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .rebirth-info {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .rebirth-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .rebirth-stat {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .rebirth-stat-label {
            font-size: 0.9em;
            color: #ddd;
            margin-bottom: 5px;
        }

        .rebirth-stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #ffd700;
        }

        .rebirth-button {
            padding: 15px 40px;
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            border: none;
            border-radius: 10px;
            color: #000;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
            margin-top: 10px;
        }

        .rebirth-button:hover {
            transform: scale(1.02);
        }

        .rebirth-button.disabled {
            background: #666;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .ban-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 0, 0, 0.95);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .ban-overlay.active {
            display: flex;
        }

        .ban-modal {
            background: #000;
            border: 5px solid #ff0000;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 600px;
            box-shadow: 0 0 50px rgba(255, 0, 0, 0.8);
        }

        .ban-title {
            font-size: 3em;
            margin-bottom: 20px;
            color: #ff0000;
            text-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
        }

        .ban-message {
            font-size: 1.3em;
            margin-bottom: 30px;
            line-height: 1.8;
            color: #fff;
        }

        .discount-ticket-timer {
            position: fixed;
            top: 150px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 200, 0, 0.95);
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            z-index: 1001;
            display: none;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }

        .discount-ticket-timer.active {
            display: block;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        /* ========================================
           MOBILE OPTIMIZATION
           ======================================== */
        
        /* Tablet & Small Desktop */
        @media (max-width: 1024px) {
            .container {
                padding: 10px;
            }
            
            .stats-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 8px;
            }
        }
        
        /* Mobile Landscape & Tablet Portrait */
        @media (max-width: 768px) {
            body {
                font-size: 14px;
                overflow-y: auto !important;
                overflow-x: hidden !important; /* No horizontal scroll */
                height: auto;
                min-height: 100vh;
                padding: 10px; /* Smaller padding on mobile */
            }
            
            .container {
                padding: 5px;
                max-width: 100%;
                width: 100%;
                overflow: visible !important;
            }
            
            /* Compact admin panel on mobile */
            .admin-panel {
                top: 10px;
                right: 10px;
                left: 10px;
                max-width: calc(100% - 20px);
                padding: 10px;
                font-size: 12px;
            }
            
            .admin-input {
                width: 90px;
                font-size: 12px;
                padding: 6px;
            }
            
            .admin-button {
                font-size: 12px;
                padding: 6px 12px;
            }
            
            /* Hide or compact playtime on small screens */
            .playtime-panel {
                display: none; /* Hide on mobile to save space */
            }
            
            .main-content {
                flex-direction: column;
                gap: 10px;
            }
            
            /* Cookie Button - Bigger on mobile */
            #cookie {
                width: 200px !important;
                height: 200px !important;
                font-size: 120px !important;
                margin: 20px auto;
                /* Extra mobile anti-zoom */
                -webkit-tap-highlight-color: transparent !important;
                touch-action: manipulation !important;
                user-select: none !important;
                -webkit-user-select: none !important;
            }
            
            /* Stats - 2 columns on mobile */
            .stats-container {
                grid-template-columns: repeat(2, 1fr);
                gap: 6px;
                font-size: 12px;
            }
            
            .stat-label {
                font-size: 10px;
            }
            
            .stat-value {
                font-size: 14px;
            }
            
            /* Panels - Stack vertically */
            .admin-panel, .playtime-panel, .settings-panel {
                position: static !important;
                width: 100% !important;
                margin: 10px 0;
                max-height: none !important;
            }
            
            /* Settings Button */
            .settings-button {
                position: fixed !important;
                bottom: 10px !important;
                right: 10px !important;
                top: auto !important;
                left: auto !important;
                width: 50px !important;
                height: 50px !important;
                font-size: 24px !important;
                z-index: 999;
            }
            
            /* Language Buttons - Smaller on mobile */
            .language-buttons button {
                padding: 8px 12px;
                font-size: 12px;
            }
            
            /* Shop Items - 1 column on mobile */
            .shop {
                grid-template-columns: 1fr !important;
                gap: 8px;
            }
            
            .item {
                padding: 10px;
            }
            
            .item-name {
                font-size: 14px;
            }
            
            .item-description {
                font-size: 11px;
            }
            
            .item button {
                padding: 8px 12px;
                font-size: 12px;
            }
            
            /* Pet System */
            .pets-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px;
            }
            
            .pet-card {
                padding: 8px;
            }
            
            /* Egg Shop */
            .eggs-grid {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 8px;
            }
            
            /* Weather Panel */
            .weather-panel {
                top: auto !important;
                bottom: 80px !important;
                right: 10px !important;
                width: calc(100% - 20px) !important;
                max-width: 300px;
            }
            
            .weather-buttons {
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 5px;
            }
            
            .weather-summon-btn {
                padding: 6px 8px;
                font-size: 11px;
            }
            
            /* Mini Games */
            .rps-choices button {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
            
            /* Modals */
            .modal-content, .afk-modal {
                width: 90% !important;
                max-width: 90% !important;
                padding: 20px 15px;
                margin: 20px auto;
            }
            
            .potion-timer {
                font-size: 1.5em;
                padding: 15px 30px;
            }

            .afk-title {
                font-size: 2em;
            }

            .afk-message {
                font-size: 1em;
            }
            
            /* Buttons - Bigger touch targets */
            button {
                min-height: 44px;
                font-size: 14px;
            }
            
            /* Section titles */
            h2 {
                font-size: 18px;
                margin: 15px 0 10px 0;
            }
            
            h3 {
                font-size: 16px;
            }
        }
        
        /* Mobile Portrait (Small phones) */
        @media (max-width: 480px) {
            body {
                font-size: 12px;
                overflow-y: auto !important;
                overflow-x: hidden !important; /* No horizontal scroll */
                height: auto;
                padding: 5px; /* Even smaller padding */
            }
            
            /* Cookie - Even bigger on small phones */
            #cookie {
                width: 180px !important;
                height: 180px !important;
                font-size: 100px !important;
                /* Extra anti-zoom for small screens */
                -webkit-tap-highlight-color: transparent !important;
                touch-action: manipulation !important;
            }
            
            /* Stats - Single column on tiny screens */
            .stats-container {
                grid-template-columns: 1fr;
            }
            
            /* Shop - Full width items */
            .shop {
                gap: 6px;
            }
            
            .item {
                padding: 8px;
            }
            
            /* Pets/Eggs - Single column */
            .pets-grid, .eggs-grid {
                grid-template-columns: 1fr !important;
            }
            
            /* Weather buttons - 1 column */
            .weather-buttons {
                grid-template-columns: 1fr !important;
            }
            
            /* Smaller fonts */
            .stat-label {
                font-size: 9px;
            }
            
            .stat-value {
                font-size: 12px;
            }
            
            h2 {
                font-size: 16px;
            }
            
            h3 {
                font-size: 14px;
            }
            
            /* Settings button - Smaller */
            .settings-button {
                width: 44px !important;
                height: 44px !important;
                font-size: 20px !important;
            }
        }
        
        /* Touch-friendly improvements for all mobile */
        @media (hover: none) and (pointer: coarse) {
            /* All buttons larger touch targets */
            button, .item button, .pet-card button {
                min-height: 44px;
                min-width: 44px;
            }
            
            /* Remove hover effects on touch devices */
            button:hover, .item:hover, .pet-card:hover {
                transform: none;
            }
            
            /* Active state for touch feedback */
            button:active {
                transform: scale(0.95);
                opacity: 0.8;
            }
            
            #cookie:active {
                transform: scale(0.95) !important;
            }
            
            /* Prevent text selection on touch */
            * {
                -webkit-user-select: none;
                user-select: none;
                -webkit-tap-highlight-color: transparent;
            }
            
            /* Allow selection in inputs */
            input, textarea {
                -webkit-user-select: text;
                user-select: text;
            }
        }
        
        /* ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
           COMPREHENSIVE MOBILE UX IMPROVEMENTS
           Fixes all 28 critical mobile issues
           ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ */
        
        /* ═══════════════════════════════════════════════════════
           I. SCROLL & SWIPE IMPROVEMENTS
           ═══════════════════════════════════════════════════════ */
        
        /* Make scrollable areas obvious */
        .scrollable,
        .shop,
        .pets-grid,
        .eggs-grid,
        .admin-panel,
        .settings-panel {
            /* Indicate scrollability */
            position: relative;
            scroll-behavior: smooth;
        }
        
        /* Smooth momentum scrolling */
        * {
            -webkit-overflow-scrolling: touch;
            scroll-behavior: smooth;
        }
        
        /* Allow swiping on buttons to scroll container */
        button, .button {
            pointer-events: auto;
            /* Touch pass-through for scroll */
        }
        
        /* Prevent scroll lock on modals */
        .modal-overlay,
        .ban-overlay,
        .afk-overlay {
            overflow-y: auto !important;
            -webkit-overflow-scrolling: touch;
        }
        
        /* ═══════════════════════════════════════════════════════
           II. TEXT & READABILITY
           ═══════════════════════════════════════════════════════ */
        
        /* Ensure minimum readable text size */
        @media (max-width: 768px) {
            body {
                font-size: 14px !important;
                line-height: 1.5;
            }
            
            /* Larger text for important elements */
            .stat-value, .coins-display {
                font-size: 16px !important;
                font-weight: bold;
            }
            
            /* Prevent text overflow */
            * {
                word-wrap: break-word;
                overflow-wrap: break-word;
            }
            
            /* Minimum font sizes */
            h1 { font-size: 24px !important; }
            h2 { font-size: 20px !important; }
            h3 { font-size: 18px !important; }
            p, span, div { font-size: 14px !important; min-font-size: 14px; }
            small { font-size: 12px !important; }
        }
        
        @media (max-width: 480px) {
            body {
                font-size: 13px !important;
            }
            
            h1 { font-size: 22px !important; }
            h2 { font-size: 18px !important; }
            h3 { font-size: 16px !important; }
        }
        
        /* High contrast for better readability */
        .stat-label, .item-description {
            color: #fff;
            text-shadow: 0 1px 2px rgba(0,0,0,0.5);
        }
        
        /* ═══════════════════════════════════════════════════════
           III. SAFE ZONES & SPACING
           ═══════════════════════════════════════════════════════ */
        
        /* Safe zones for notched devices */
        @supports (padding: env(safe-area-inset-left)) {
            body {
                padding-top: env(safe-area-inset-top);
                padding-left: env(safe-area-inset-left);
                padding-right: env(safe-area-inset-right);
                padding-bottom: env(safe-area-inset-bottom);
            }
        }
        
        /* Prevent buttons at screen edges */
        @media (max-width: 768px) {
            .settings-button {
                right: 15px !important;
                bottom: 15px !important;
            }
            
            .admin-panel, .settings-panel {
                margin: 10px;
            }
        }
        
        /* Extra spacing between tappable elements */
        button + button,
        .item + .item,
        .pet-card + .pet-card {
            margin-top: 8px;
        }
        
        /* ═══════════════════════════════════════════════════════
           IV. VISUAL FEEDBACK
           ═══════════════════════════════════════════════════════ */
        
        /* Loading state */
        .loading {
            position: relative;
            pointer-events: none;
            opacity: 0.6;
        }
        
        .loading::after {
            content: '⏳';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 24px;
            animation: pulse 1s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* Success feedback */
        @keyframes success-flash {
            0% { background: rgba(0, 255, 0, 0.3); }
            100% { background: inherit; }
        }
        
        .success-flash {
            animation: success-flash 0.3s ease;
        }
        
        /* Error feedback */
        @keyframes error-shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .error-shake {
            animation: error-shake 0.3s ease;
        }
        
        /* Click ripple effect */
        @keyframes ripple {
            from {
                transform: scale(0);
                opacity: 1;
            }
            to {
                transform: scale(2);
                opacity: 0;
            }
        }
        
        button::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%) scale(0);
            pointer-events: none;
        }
        
        button:active::before {
            animation: ripple 0.4s ease-out;
        }
        
        /* ═══════════════════════════════════════════════════════
           V. LANDSCAPE ORIENTATION
           ═══════════════════════════════════════════════════════ */
        
        @media (max-width: 896px) and (orientation: landscape) {
            body {
                padding: 5px;
            }
            
            .container {
                padding: 5px;
            }
            
            /* Adjust cookie size for landscape */
            #cookie, .click-button {
                width: 150px !important;
                height: 150px !important;
                font-size: 80px !important;
            }
            
            /* Compact layout */
            .main-content {
                flex-direction: row;
                gap: 10px;
            }
            
            /* Smaller stats */
            .stats-container {
                grid-template-columns: repeat(4, 1fr);
                gap: 5px;
            }
        }
        
        /* ═══════════════════════════════════════════════════════
           VI. PERFORMANCE OPTIMIZATIONS
           ═══════════════════════════════════════════════════════ */
        
        /* Reduce animations on low-end devices */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
        
        /* GPU acceleration for smoother animations */
        button, .shop-item, .pet-card, .click-button {
            will-change: transform;
            transform: translateZ(0);
            backface-visibility: hidden;
        }
        
        /* ═══════════════════════════════════════════════════════
           VII. MODAL & OVERLAY IMPROVEMENTS
           ═══════════════════════════════════════════════════════ */
        
        /* Better modal visibility */
        .modal-overlay, .ban-overlay, .afk-overlay {
            backdrop-filter: blur(5px);
            -webkit-backdrop-filter: blur(5px);
        }
        
        /* Prevent background scroll when modal open */
        body.modal-open {
            overflow: hidden !important;
            position: fixed;
            width: 100%;
        }
        
        /* Easy to tap close button */
        .close-modal-btn, .modal-close {
            min-width: 60px !important;
            min-height: 60px !important;
            font-size: 24px !important;
            position: sticky;
            top: 10px;
            z-index: 10;
        }
        
        /* ═══════════════════════════════════════════════════════
           VIII. ACCESSIBILITY
           ═══════════════════════════════════════════════════════ */
        
        /* Focus visible for keyboard users */
        button:focus-visible, input:focus-visible {
            outline: 3px solid #ffd700;
            outline-offset: 2px;
        }
        
        /* Larger tap targets for accessibility */
        @media (max-width: 768px) {
            button, a, input, select {
                min-height: 48px !important;
                min-width: 48px !important;
            }
        }
    </style>
</head>
<body>
    <!-- Ban Overlay -->
    <div class="ban-overlay" id="banOverlay">
        <div class="ban-modal">
            <div class="ban-title">🚫 BẠN ĐÃ BỊ BAN!</div>
            <div class="ban-message">
                ⚠️ HỆ THỐNG ANTI-CHEAT ĐÃ PHÁT HIỆN BẠN SỬ DỤNG AUTO CLICKER ⚠️<br>
                <br>
                Bạn đã click với tốc độ KHÔNG THỂ thực hiện bằng tay người.<br>
                <br>
                <strong style="color: #ff6b6b;">TÀI KHOẢN ĐÃ BỊ KHÓA VĨNH VIỄN!</strong><br>
                <br>
                Vui lòng làm mới trang để bắt đầu lại.<br>
                Chơi công bằng!
            </div>
        </div>
    </div>

    <!-- Discount Ticket Timer -->
    <div class="discount-ticket-timer" id="discountTicketTimer">
        💳 Vé giảm giá <span id="ticketDiscountPercent">0</span>% - <span id="ticketTimeLeft">60</span>s
    </div>

    <!-- Playtime Panel -->
    <div class="playtime-panel">
        ⏱️ <span id="playTimeLabel">Time</span>: <span id="playTime">00:00:00</span>
    </div>

    <!-- Settings Panel -->
    <div class="settings-panel" id="settingsPanel" style="position: fixed; top: 20px; right: 280px; background: linear-gradient(135deg, #2d1b4e 0%, #1a0f2e 100%); padding: 15px; border-radius: 15px; border: 2px solid #7c3aed; display: none; z-index: 200; min-width: 250px; box-shadow: 0 8px 32px rgba(124, 58, 237, 0.4);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <div style="font-size: 1.3em; font-weight: bold; color: #a78bfa;">⚙️ <span id="settingsTitle">Settings</span></div>
            <button onclick="toggleSettings()" style="padding: 5px 12px; background: linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%); border: none; border-radius: 8px; color: white; cursor: pointer; font-weight: bold;">✕</button>
        </div>
        
        <!-- Language Selection -->
        <div style="background: rgba(124, 58, 237, 0.1); padding: 12px; border-radius: 10px; margin-bottom: 12px;">
            <div style="color: #c4b5fd; font-weight: bold; margin-bottom: 8px;">🌐 <span id="languageLabel">Language</span></div>
            <div style="display: flex; gap: 8px;">
                <button onclick="setLanguage('en')" id="langEnBtn" style="flex: 1; padding: 10px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); border: 2px solid #60a5fa; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    🇬🇧 English
                </button>
                <button onclick="setLanguage('vi')" id="langViBtn" style="flex: 1; padding: 10px; background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%); border: 2px solid #9ca3af; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; transition: all 0.3s;">
                    🇻🇳 Tiếng Việt
                </button>
            </div>
        </div>
        
        <!-- Background Music System -->
        <div style="background: rgba(124, 58, 237, 0.1); padding: 12px; border-radius: 10px; margin-bottom: 12px;">
            <div style="color: #c4b5fd; font-weight: bold; margin-bottom: 8px;">🎵 Background Music</div>
            
            <!-- Unlock Button -->
            <button id="unlockMusicBtn" onclick="unlockMusic()" style="width: 100%; padding: 12px; background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); border: 2px solid #fbbf24; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; margin-bottom: 10px;">
                🔓 Unlock Music (50💎)
            </button>
            
            <!-- Music Controls (Hidden until unlocked) -->
            <div id="musicControls" style="display: none;">
                <!-- Track Name -->
                <div style="background: rgba(0,0,0,0.3); padding: 8px; border-radius: 6px; margin-bottom: 8px; text-align: center; color: #a78bfa; font-size: 0.9em;">
                    🎵 <span id="trackName">No track loaded</span>
                </div>
                
                <!-- Import Button -->
                <button onclick="importMusic()" style="width: 100%; padding: 10px; background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); border: 2px solid #a78bfa; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; margin-bottom: 8px;">
                    📁 Import Music File
                </button>
                
                <!-- Control Buttons -->
                <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                    <button id="playPauseBtn" onclick="toggleMusic()" style="flex: 1; padding: 10px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border: 2px solid #34d399; border-radius: 8px; color: white; font-weight: bold; cursor: pointer;">
                        ▶️ Play
                    </button>
                    <button onclick="stopMusic()" style="flex: 1; padding: 10px; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); border: 2px solid #f87171; border-radius: 8px; color: white; font-weight: bold; cursor: pointer;">
                        ⏹️ Stop
                    </button>
                </div>
                
                <!-- Volume Control -->
                <div style="display: flex; align-items: center; gap: 8px;">
                    <span style="color: #c4b5fd; font-size: 0.9em;">🔊</span>
                    <input type="range" min="0" max="100" value="50" onchange="updateVolume(this.value)" style="flex: 1; height: 6px; border-radius: 5px; background: rgba(167,139,250,0.3); outline: none;">
                </div>
            </div>
        </div>
        
    </div>

    <!-- Settings Button (Fixed) -->
    <button onclick="toggleSettings()" id="settingsButton" style="position: fixed; top: 140px; left: 20px; padding: 12px 20px; background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%); border: none; border-radius: 12px; color: white; font-weight: bold; cursor: pointer; font-size: 1.1em; z-index: 99; box-shadow: 0 4px 15px rgba(124, 58, 237, 0.4); transition: all 0.3s;" onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
        ⚙️ <span id="settingsButtonText">Settings</span>
    </button>

    <!-- AFK Warning -->
    <div class="afk-warning" id="afkWarning">
        ⚠️ AFK Warning: <span id="afkCountdown">60</span>s
    </div>

    <!-- AFK Overlay -->
    <div class="afk-overlay" id="afkOverlay">
        <div class="afk-modal">
            <div class="afk-title">⚠️ ANTI-AFK</div>
            <div class="afk-message">
                Bạn đã không hoạt động trong 30 phút!<br>
                Game đã bị khóa để tránh AFK farm.<br>
                <br>
                Nhấn nút bên dưới để tiếp tục chơi.
            </div>
            <button class="afk-button" onclick="resumeFromAFK()">
                ✅ Tôi đã quay lại!
            </button>
        </div>
    </div>

    <!-- Potion Timer Display -->
    <div class="potion-timer" id="potionTimer">
        <div id="potionTimerText">x2 - 60s</div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
            <div style="font-size: 1em; font-weight: bold;">🔐 Admin Panel</div>
            <button onclick="toggleAdminPanel()" id="toggleAdminBtn" style="
                padding: 4px 10px;
                background: linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%);
                border: 2px solid #ff4444;
                border-radius: 5px;
                color: white;
                font-weight: bold;
                cursor: pointer;
                font-size: 0.8em;
            ">👁️ Ẩn</button>
        </div>
        <div id="adminPanelContent">
            <div style="display: flex; gap: 5px; flex-wrap: wrap;">
                <input type="password" id="adminCode" class="admin-input" placeholder="Nhập admin code" style="flex: 1; min-width: 100px;">
                <button class="admin-button" onclick="checkAdminCode()">Đăng nhập</button>
            </div>
            <div id="adminStatus"></div>
            <div id="adminControls" style="display: none;" class="admin-controls">
            <button class="admin-money-button" onclick="addAdminMoney()">💰 +100K Coins</button>
            <button class="admin-money-button" onclick="addAdminDiamonds()" style="background: linear-gradient(135deg, #00ffff 0%, #0080ff 100%); margin-top: 10px;">💎 +1000 Diamonds</button>
            <button class="admin-money-button" onclick="addAdminGoldBars()" style="background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%); margin-top: 10px; animation: goldGlow 2s ease-in-out infinite;">🏆 +100 Gold Bars</button>
            
            <div class="weather-controls">
                <div class="weather-control-title">🌦️ Triệu hồi Thời tiết (50 Weathers)</div>
               <div class="weather-buttons">
                    <!-- TIER 1: COMMON (13) -->
                    <button class="weather-summon-btn" onclick="summonWeather('wind')">💨 Wind</button>
                    <button class="weather-summon-btn" onclick="summonWeather('cloud')">☁️ Cloud</button>
                    <button class="weather-summon-btn" onclick="summonWeather('rain')">🌧️ Rain</button>
                    <button class="weather-summon-btn" onclick="summonWeather('night')">🌙 Night</button>
                    <button class="weather-summon-btn" onclick="summonWeather('moonlight')">✨ Moonlight</button>
                    <button class="weather-summon-btn" onclick="summonWeather('meteor')">☄️ Meteor</button>
                    <button class="weather-summon-btn" onclick="summonWeather('snow')">❄️ Snow</button>
                    <button class="weather-summon-btn" onclick="summonWeather('fog')">🌫️ Fog</button>
                    <button class="weather-summon-btn" onclick="summonWeather('breeze')">🍃 Breeze</button>
                    <button class="weather-summon-btn" onclick="summonWeather('drizzle')">🌦️ Drizzle</button>
                    <button class="weather-summon-btn" onclick="summonWeather('thunder')">⚡ Thunder</button>
                    <button class="weather-summon-btn" onclick="summonWeather('sunrise')">🌅 Sunrise</button>
                    <button class="weather-summon-btn" onclick="summonWeather('sunset')">🌇 Sunset</button>
                    
                    <!-- TIER 2: UNCOMMON (13) -->
                    <button class="weather-summon-btn" onclick="summonWeather('storm')">🌩️ Storm</button>
                    <button class="weather-summon-btn" onclick="summonWeather('blizzard')">🌨️ Blizzard</button>
                    <button class="weather-summon-btn" onclick="summonWeather('hail')">🧊 Hail</button>
                    <button class="weather-summon-btn" onclick="summonWeather('tornado')">🌪️ Tornado</button>
                    <button class="weather-summon-btn" onclick="summonWeather('rainbow')">🌈 Rainbow</button>
                    <button class="weather-summon-btn" onclick="summonWeather('aurora')">🌌 Aurora</button>
                    <button class="weather-summon-btn" onclick="summonWeather('eclipse')">🌑 Eclipse</button>
                    <button class="weather-summon-btn" onclick="summonWeather('comet')">☄️ Comet</button>
                    <button class="weather-summon-btn" onclick="summonWeather('volcano')">🌋 Volcano</button>
                    <button class="weather-summon-btn" onclick="summonWeather('earthquake')">🌍 Earthquake</button>
                    <button class="weather-summon-btn" onclick="summonWeather('tsunami')">🌊 Tsunami</button>
                    <button class="weather-summon-btn" onclick="summonWeather('wildfire')">🔥 Wildfire</button>
                    <button class="weather-summon-btn" onclick="summonWeather('sandstorm')">🏜️ Sandstorm</button>
                    
                    <!-- TIER 3: RARE (12) -->
                    <button class="weather-summon-btn" onclick="summonWeather('blackhole')">🕳️ Black Hole</button>
                    <button class="weather-summon-btn" onclick="summonWeather('supernova')">💥 Supernova</button>
                    <button class="weather-summon-btn" onclick="summonWeather('timewarp')">⏰ Time Warp</button>
                    <button class="weather-summon-btn" onclick="summonWeather('gravity')">🌐 Zero Gravity</button>
                    <button class="weather-summon-btn" onclick="summonWeather('plasma')">⚛️ Plasma Storm</button>
                    <button class="weather-summon-btn" onclick="summonWeather('quantum')">🔬 Quantum Flux</button>
                    <button class="weather-summon-btn" onclick="summonWeather('dimension')">🌀 Dimension Rift</button>
                    <button class="weather-summon-btn" onclick="summonWeather('cosmic')">✨ Cosmic Dust</button>
                    <button class="weather-summon-btn" onclick="summonWeather('nebula')">🌌 Nebula</button>
                    <button class="weather-summon-btn" onclick="summonWeather('pulsar')">💫 Pulsar</button>
                    <button class="weather-summon-btn" onclick="summonWeather('stardust')">⭐ Stardust</button>
                    <button class="weather-summon-btn" onclick="summonWeather('galaxy')">🌟 Galaxy Burst</button>
                    
                    <!-- TIER 4: EPIC (6) -->
                    <button class="weather-summon-btn" onclick="summonWeather('divine')" style="background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);">🙏 Divine Light</button>
                    <button class="weather-summon-btn" onclick="summonWeather('celestial')" style="background: linear-gradient(135deg, #9370db 0%, #4b0082 100%);">👼 Celestial</button>
                    <button class="weather-summon-btn" onclick="summonWeather('mythical')" style="background: linear-gradient(135deg, #ff4500 0%, #ff1493 100%);">🐉 Mythical Dragon</button>
                    <button class="weather-summon-btn" onclick="summonWeather('phoenix')" style="background: linear-gradient(135deg, #ff6347 0%, #ffa500 100%);">🔥 Phoenix</button>
                    <button class="weather-summon-btn" onclick="summonWeather('unicorn')" style="background: linear-gradient(135deg, #ff69b4 0%, #ffb6c1 100%);">🦄 Unicorn</button>
                    <button class="weather-summon-btn" onclick="summonWeather('kraken')" style="background: linear-gradient(135deg, #1e90ff 0%, #00008b 100%);">🐙 Kraken</button>
                    
                    <!-- TIER 5: LEGENDARY (6) -->
                    <button class="weather-summon-btn" onclick="summonWeather('infinity')" style="background: linear-gradient(135deg, #00ffff 0%, #0080ff 100%); font-weight: bold;">∞ Infinity</button>
                    <button class="weather-summon-btn" onclick="summonWeather('eternity')" style="background: linear-gradient(135deg, #8b00ff 0%, #4b0082 100%); font-weight: bold;">⏳ Eternity</button>
                    <button class="weather-summon-btn" onclick="summonWeather('omnipotence')" style="background: linear-gradient(135deg, #ffd700 0%, #ff00ff 100%); font-weight: bold;">👁️ Omnipotence</button>
                    <button class="weather-summon-btn" onclick="summonWeather('godmode')" style="background: linear-gradient(135deg, #ff0000 0%, #ffff00 100%); font-weight: bold;">⚡ God Mode</button>
                    <button class="weather-summon-btn" onclick="summonWeather('transcendence')" style="background: linear-gradient(135deg, #00ff00 0%, #00ffff 100%); font-weight: bold;">🌠 Transcendence</button>
                    <button class="weather-summon-btn" onclick="summonWeather('ascension')" style="background: linear-gradient(135deg, #ffffff 0%, #ffd700 100%); font-weight: bold; color: #000;">🚀 ASCENSION</button>
                </div>
                <button class="weather-clear-btn" onclick="clearAllWeather()">🚫 Xóa tất cả thời tiết</button>
            </div>

            <div class="weather-controls" style="margin-top: 20px;">
                <div class="weather-control-title">🐾 Triệu Hồi Pet</div>
                <div class="weather-buttons">
                    <button class="weather-summon-btn" onclick="summonPet('Bunny', '🐰', 1.1)">🐰 Bunny</button>
                    <button class="weather-summon-btn" onclick="summonPet('Dog', '🐕', 1.1)">🐕 Dog</button>
                    <button class="weather-summon-btn" onclick="summonPet('Golden Lab', '🦮', 1.15)">🦮 Golden Lab</button>
                    <button class="weather-summon-btn" onclick="summonPet('Black Bunny', '🐇', 1.2)">🐇 Black Bunny</button>
                    <button class="weather-summon-btn" onclick="summonPet('Cat', '🐈', 1.2)">🐈 Cat</button>
                    <button class="weather-summon-btn" onclick="summonPet('Chicken', '🐔', 1.2)">🐔 Chicken</button>
                    <button class="weather-summon-btn" onclick="summonPet('Deer', '🦌', 1.25)">🦌 Deer</button>
                    <button class="weather-summon-btn" onclick="summonPet('Orange Tabby', '🐈‍⬛', 1.5)">🐈‍⬛ Orange Tabby</button>
                    <button class="weather-summon-btn" onclick="summonPet('Spotted Deer', '🦌', 1.6)">🦌 Spotted Deer</button>
                    <button class="weather-summon-btn" onclick="summonPet('Pig', '🐷', 1.7)">🐷 Pig</button>
                    <button class="weather-summon-btn" onclick="summonPet('Rooster', '🐓', 1.7)">🐓 Rooster</button>
                    <button class="weather-summon-btn" onclick="summonPet('Monkey', '🐒', 2)">🐒 Monkey</button>
                    <button class="weather-summon-btn" onclick="summonPet('Cow', '🐄', 2.5)">🐄 Cow</button>
                    <button class="weather-summon-btn" onclick="summonPet('Silver Monkey', '🐵', 2.5)">🐵 Silver Monkey</button>
                    <button class="weather-summon-btn" onclick="summonPet('Sea Otter', '🦦', 3)">🦦 Sea Otter</button>
                    <button class="weather-summon-btn" onclick="summonPet('Polar Bear', '🐻‍❄️', 5)">🐻‍❄️ Polar Bear</button>
                    <button class="weather-summon-btn" onclick="summonPet('Turtle', '🐢', 5)">🐢 Turtle</button>
                    <button class="weather-summon-btn" onclick="summonPet('Grey Mouse', '🐭', 3)">🐭 Grey Mouse</button>
                    <button class="weather-summon-btn" onclick="summonPet('Brown Mouse', '🐭', 3.5)">🐭 Brown Mouse</button>
                    <button class="weather-summon-btn" onclick="summonPet('Squirrel', '🐿️', 3.5)">🐿️ Squirrel</button>
                    <button class="weather-summon-btn" onclick="summonPet('Red Giant Ant', '🐜', 5)">🐜 Red Giant Ant</button>
                    <button class="weather-summon-btn" onclick="summonPet('Red Fox', '🦊', 15)">🦊 Red Fox</button>
                    <button class="weather-summon-btn" onclick="summonPet('Queen Bee', '👑', 30)">👑 Queen Bee</button>
                    <button class="weather-summon-btn" onclick="summonPet('Disco Bee', '💎', 40)">💎 Disco Bee</button>
                    <button class="weather-summon-btn" onclick="summonPet('Hacker Dog', '🐕‍🦺', 40)" style="background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%);">💻 Hacker Dog</button>
                    <button class="weather-summon-btn" onclick="summonPet('Hacker Bunny', '🐰', 50)" style="background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%);">💻 Hacker Bunny</button>
                    <button class="weather-summon-btn" onclick="summonPet(`Admin's Dog`, '🐕‍🦺', 20)" style="background: linear-gradient(135deg, #ff6b6b 0%, #ffd700 100%);">🐕‍🦺 Admin's Dog</button>
                    <button class="weather-summon-btn" onclick="summonPet(`Admin's Cat`, '😺', 25)" style="background: linear-gradient(135deg, #ff6b6b 0%, #ffd700 100%);">😺 Admin's Cat</button>
                    <button class="weather-summon-btn" onclick="summonPet('Bird Admin', '🦅', 35)" style="background: linear-gradient(135deg, #ff6b6b 0%, #ffd700 100%);">🦅 Bird Admin</button>
                    <button class="weather-summon-btn" onclick="summonPet(`God's Pet`, '🌟', 30)" style="background: linear-gradient(135deg, #ffd700 0%, #ffffff 50%, #ffd700 100%); font-weight: bold; box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); animation: godPulse 2s infinite;">🌟 GOD'S PET</button>
                </div>
            </div>
        </div>
        </div> <!-- Close adminPanelContent -->
    </div>

    <!-- Weather Panel -->
    <div class="weather-panel" id="weatherPanel">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <div class="weather-title">🌦️ Thời Tiết Hiện Tại</div>
            <button onclick="toggleWeatherPanel()" id="toggleWeatherBtn" style="
                padding: 5px 15px;
                background: linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%);
                border: 2px solid #ff4444;
                border-radius: 5px;
                color: white;
                font-weight: bold;
                cursor: pointer;
                font-size: 0.9em;
            ">👁️ Ẩn</button>
        </div>
        <div id="weatherCountHidden" style="display: none; color: #00ffff; font-size: 1.1em; margin-bottom: 10px;">
            Số thời tiết hiện tại: <strong><span id="weatherCountNumber">0</span></strong>
        </div>
        <div id="weatherPanelContent">
            <div class="weather-list" id="weatherList">
                <div class="weather-empty">Không có thời tiết nào</div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>🍪 Cookie Clicker</h1>
            <div class="coins-display">
                <span>💰</span>
                <span id="coins">1</span>
                <span class="diamond-display">
                    💎 <span id="diamonds">0</span>
                </span>
                <span class="diamond-display" style="margin-left: 10px;">
                    🎫 <span id="tickets">0</span>
                </span>
                <span class="diamond-display" style="margin-left: 10px; background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%); padding: 5px 10px; border-radius: 8px; border: 2px solid #ffaa00; animation: goldGlow 2s ease-in-out infinite;">
                    🏆 <span id="goldBars" style="font-weight: bold; color: #fff; text-shadow: 0 0 10px rgba(255,215,0,0.8);">0</span>
                </span>
            </div>
            <div class="stats">
                Click Power: <span id="clickPower">1</span> | 
                Auto: <span id="autoClickers">0</span>/s | 
                Multiplier: x<span id="multiplier">1</span> |
                Click Cooldown: <span id="clickCooldown">0.5</span>s |
                Rebirth: x<span id="rebirthMultiplierDisplay">1</span> |
                <span style="color: #00ff00;">🐾 Pets: x<span id="petMultiplierDisplay">1</span></span> |
                Giảm giá: <span id="discountDisplay">0</span>% |
                Vé giảm: <span id="ticketDiscountDisplay">0</span>% |
                Giới hạn mua: <span id="purchaseLimitDisplay">5</span>
            </div>
        </div>

        <!-- Cookie Button - Centered -->
        <div style="display: flex; justify-content: center; align-items: center; min-height: 350px; margin-bottom: 50px;">
            <button class="click-button" id="clickButton">🍪</button>
        </div>

        <div class="main-content">
            <!-- ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ -->
            <!-- TELEPORT SHOP -->
            <!-- ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━ -->
            <div class="shop-section" style="width: 100%; max-width: 1200px; margin: 0 auto 30px auto;" id="teleportShop">
                <h2 class="shop-title">🌀 Teleport Shop - Di Chuyển Nhanh</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 15px; padding: 20px;">
                    <button class="teleport-btn" onclick="teleportTo('shopItems')">
                        🛒 Main Shop
                    </button>
                    <button class="teleport-btn" onclick="teleportTo('petSystem')">
                        🐾 Pet System
                    </button>
                    <button class="teleport-btn" onclick="teleportTo('eggShop')">
                        🥚 Egg Shop
                    </button>
                    <button class="teleport-btn" onclick="teleportTo('miniGame')">
                        🎰 Mini Game
                    </button>
                    <button class="teleport-btn" onclick="teleportTo('gamepassPanel')">
                        🎫 Game Pass
                    </button>
                    <button class="teleport-btn" onclick="teleportTo('settingsPanel')">
                        ⚙️ Settings
                    </button>
                    <button class="teleport-btn" onclick="teleportTo('tradeUpSection')">
                        ⬆️ Trade-Up
                    </button>
                    <button class="teleport-btn" onclick="teleportTo('rebirthPanel')">
                        ♻️ Rebirth
                    </button>
                </div>
            </div>
            
            <div class="shop-section" style="width: 100%; max-width: 1200px; margin: 0 auto;" id="shopItems-section">
                <h2 class="shop-title">🛒 Shop</h2>
                <div class="shop-items" id="shopItems">
                    <!-- Items will be generated here -->
                </div>
            </div>


            <!-- Game Pass Panel -->
            <div class="gamepass-panel" id="gamepassPanel">
                <div class="gamepass-title">🎫 Game Pass Store</div>
                <div class="gamepass-input-section">
                    <input type="text" id="gamepassCode" class="gamepass-input" placeholder="Nhập code Game Pass">
                    <button class="redeem-button" onclick="redeemGamePass()">🎁 Redeem Code</button>
                </div>
                <div class="gamepass-list">
                    <div class="gamepass-card vip" id="vipCard">
                        <div class="gamepass-name">💎 VIP Pass</div>
                        <div>Code: <strong>VIP2025</strong></div>
                        <ul class="gamepass-benefits">
                            <li>✨ +30 Click Power</li>
                            <li>⚡ Click Cooldown -0.15s</li>
                            <li>💰 +50 Auto Clickers/s</li>
                        </ul>
                        <div class="gamepass-status not-owned" id="vipStatus">❌ Chưa sở hữu</div>
                    </div>
                    <div class="gamepass-card premium" id="premiumCard">
                        <div class="gamepass-name">👑 Premium Pass</div>
                        <div>Code: <strong>PREMIUM999</strong></div>
                        <ul class="gamepass-benefits">
                            <li>🌟 +100 Click Power</li>
                            <li>⏱️ Click Cooldown -0.2s</li>
                            <li>🤖 +200 Auto Clickers/s</li>
                            <li>🎯 x2 Multiplier</li>
                        </ul>
                        <div class="gamepass-status not-owned" id="premiumStatus">❌ Chưa sở hữu</div>
                    </div>
                    <div class="gamepass-card legend" id="legendCard">
                        <div class="gamepass-name">🏆 Legend Pass</div>
                        <div>Code: <strong>LEGEND777</strong></div>
                        <ul class="gamepass-benefits">
                            <li>⚡ +500 Click Power</li>
                            <li>🚀 Click Cooldown = 0.01s</li>
                            <li>💫 +1000 Auto Clickers/s</li>
                            <li>👑 x5 Multiplier</li>
                            <li>💰 +500K coins khởi đầu</li>
                        </ul>
                        <div class="gamepass-status not-owned" id="legendStatus">❌ Chưa sở hữu</div>
                    </div>
                    
                    <!-- SUPER PASS - LIMITED -->
                    <div class="gamepass-card super" id="superCard">
                        <span class="pass-label limited">⚡ LIMITED</span>
                        <div class="gamepass-name">💎 SUPER PASS</div>
                        <div>Code: <strong>SUPER2025</strong></div>
                        <ul class="gamepass-benefits">
                            <li>💰 +1M coins khởi đầu</li>
                            <li>⚡ Click Cooldown = 0s (INSTANT)</li>
                            <li>🤖 +2000 Auto Clickers/s</li>
                            <li>🌟 x7 Multiplier</li>
                            <li>💪 +1000 Click Power</li>
                        </ul>
                        <div class="gamepass-status not-owned" id="superStatus">❌ Chưa sở hữu</div>
                    </div>
                    
                    <!-- INFINITY PASS - TRANSCENDENT -->
                    <div class="gamepass-card infinity" id="infinityCard">
                        <span class="pass-label transcendent">🌌 TRANSCENDENT</span>
                        <div class="gamepass-name">♾️ INFINITY PASS</div>
                        <div>Code: <strong>INFINITY∞</strong></div>
                        <ul class="gamepass-benefits">
                            <li>💸 +5M coins khởi đầu</li>
                            <li>⏱️ Click Cooldown = 0s</li>
                            <li>🌀 +5000 Auto Clickers/s</li>
                            <li>✨ x10 Multiplier</li>
                            <li>💎 +2000 Click Power</li>
                            <li>🎯 Permanent 50% Shop Discount</li>
                        </ul>
                        <div class="gamepass-status not-owned" id="infinityStatus">❌ Chưa sở hữu</div>
                    </div>
                    
                    <!-- QUANTUM PASS - HOT -->
                    <div class="gamepass-card quantum" id="quantumCard">
                        <span class="pass-label hot">🔥 HOT</span>
                        <div class="gamepass-name">⚛️ QUANTUM PASS</div>
                        <div>Code: <strong>QUANTUM888</strong></div>
                        <ul class="gamepass-benefits">
                            <li>💰 +2M coins khởi đầu</li>
                            <li>⚡ Click Cooldown = 0s</li>
                            <li>🚀 +3000 Auto Clickers/s</li>
                            <li>💫 x8 Multiplier</li>
                            <li>🔥 +1500 Click Power</li>
                            <li>⏰ Auto-collect AFK rewards</li>
                        </ul>
                        <div class="gamepass-status not-owned" id="quantumStatus">❌ Chưa sở hữu</div>
                    </div>
                    
                    <!-- COSMIC PASS - BEST FOR YOU -->
                    <div class="gamepass-card cosmic" id="cosmicCard">
                        <span class="pass-label best">⭐ BEST FOR YOU</span>
                        <div class="gamepass-name">🌠 COSMIC PASS</div>
                        <div>Code: <strong>COSMIC999</strong></div>
                        <ul class="gamepass-benefits">
                            <li>💎 +10M coins khởi đầu</li>
                            <li>⚡ Click Cooldown = 0s</li>
                            <li>🌟 +10000 Auto Clickers/s</li>
                            <li>🚀 x15 Multiplier</li>
                            <li>💪 +5000 Click Power</li>
                            <li>🎁 All Pets Unlocked</li>
                            <li>🏆 Permanent VIP Status</li>
                        </ul>
                        <div class="gamepass-status not-owned" id="cosmicStatus">❌ Chưa sở hữu</div>
                    </div>
                    
                    <!-- ═══════════════════════════════════════════ -->
                    <!-- PREMIUM TIER PASSES - GOLD BAR EXCLUSIVE -->
                    <!-- ═══════════════════════════════════════════ -->
                    
                    <!-- EPIC PASS - POWERFUL ⚔️ -->
                    <div class="gamepass-card epic" id="epicCard">
                        <span class="pass-label powerful">⚔️ POWERFUL</span>
                        <div class="gamepass-name">⚔️ EPIC PASS</div>
                        <div class="pass-price">💰 Cost: <strong>50 Gold Bars</strong></div>
                        <ul class="gamepass-benefits">
                            <li>💰 +100K coins ngay lập tức</li>
                            <li>🎯 x4 Multiplier (mạnh mẽ)</li>
                            <li>⚡ +500 Click Power</li>
                            <li>🤖 +10 Auto Clickers/s</li>
                            <li>💪 Rất đủ để farm nhanh</li>
                        </ul>
                        <button class="buy-gamepass-btn" onclick="buyPremiumPass('epic', 50)">
                            🏆 Mua với 50 Gold Bars
                        </button>
                        <div class="gamepass-status not-owned" id="epicStatus">❌ Chưa sở hữu</div>
                    </div>
                    
                    <!-- PRISMATIC PASS - COLORFUL 🌈 -->
                    <div class="gamepass-card prismatic" id="prismaticCard">
                        <span class="pass-label colorful">🌈 COLORFUL</span>
                        <div class="gamepass-name">🌈 PRISMATIC PASS</div>
                        <div class="pass-price">💰 Cost: <strong>150 Gold Bars</strong></div>
                        <ul class="gamepass-benefits">
                            <li>💰 +500K coins ngay lập tức</li>
                            <li>🌈 x6 Multiplier (ổn định)</li>
                            <li>⚡ +1000 Click Power</li>
                            <li>🤖 +20 Auto Clickers/s</li>
                            <li>✨ Hiệu ứng cầu vồng khi click</li>
                            <li>🎨 Màu sắc sặc sỡ, đã mắt</li>
                        </ul>
                        <button class="buy-gamepass-btn prismatic-btn" onclick="buyPremiumPass('prismatic', 150)">
                            🌈 Mua với 150 Gold Bars
                        </button>
                        <div class="gamepass-status not-owned" id="prismaticStatus">❌ Chưa sở hữu</div>
                    </div>
                    
                    <!-- DIVINE PASS - GODLIKE ✨ -->
                    <div class="gamepass-card divine" id="divineCard">
                        <span class="pass-label godlike">✨ GODLIKE</span>
                        <div class="gamepass-name">✨ DIVINE PASS</div>
                        <div class="pass-price">💰 Cost: <strong>500 Gold Bars</strong></div>
                        <ul class="gamepass-benefits">
                            <li>💎 +1M coins ngay lập tức</li>
                            <li>✨ x12 Multiplier (thần thánh)</li>
                            <li>⚡ +2000 Click Power</li>
                            <li>🤖 +50 Auto Clickers/s</li>
                            <li>🌟 Aura ánh sáng mềm mại</li>
                            <li>👑 Cảm giác như thần linh</li>
                            <li>💫 Tiền tăng mượt mà, không cần spam</li>
                        </ul>
                        <button class="buy-gamepass-btn divine-btn" onclick="buyPremiumPass('divine', 500)">
                            ✨ Mua với 500 Gold Bars
                        </button>
                        <div class="gamepass-status not-owned" id="divineStatus">❌ Chưa sở hữu</div>
                    </div>
                    
                    <!-- SECRET PASS - HIDDEN 🔒 -->
                    <div class="gamepass-card secret" id="secretCard" style="display: none;">
                        <span class="pass-label hidden">🔒 HIDDEN</span>
                        <div class="gamepass-name">🔒 SECRET PASS</div>
                        <div class="pass-price">💰 Cost: <strong>??? Gold Bars</strong></div>
                        <ul class="gamepass-benefits">
                            <li>💰 +5M coins ngay lập tức</li>
                            <li>❓ x18 Multiplier (bí ẩn)</li>
                            <li>⚡ +3000 Click Power (ẩn)</li>
                            <li>🤖 +100 Auto Clickers/s</li>
                            <li>🌀 Hiệu ứng glitch đặc biệt</li>
                            <li>🔮 Quyền năng bí mật chưa công bố</li>
                            <li>❓ Unlock: Rebirth 10+ hoặc ???</li>
                        </ul>
                        <button class="buy-gamepass-btn secret-btn" onclick="buyPremiumPass('secret', 1000)" disabled>
                            🔒 LOCKED - Điều kiện chưa đạt
                        </button>
                        <div class="gamepass-status not-owned" id="secretStatus">🔒 Bị khóa</div>
                    </div>
                </div>
            </div>

            <!-- Potion Shop -->
            <div class="potion-shop">
                <div class="section-title">🧪 Cửa Hàng Thuốc</div>
                <div class="potion-grid">
                    <!-- COIN POTIONS -->
                    <div class="potion-card x2">
                        <div class="potion-label basic">🟢 BASIC</div>
                        <div class="potion-icon">🧪</div>
                        <div class="potion-name">Potion x2</div>
                        <div class="potion-effect">Nhân đôi thu nhập 1 phút</div>
                        <button class="buy-potion-button" onclick="buyPotion('2x', 100, 'coins')">
                            Mua - 100 💰
                        </button>
                    </div>
                    <div class="potion-card x3">
                        <div class="potion-label rare">🔵 RARE</div>
                        <div class="potion-icon">🧪</div>
                        <div class="potion-name">Potion x3</div>
                        <div class="potion-effect">Nhân ba thu nhập 1 phút</div>
                        <button class="buy-potion-button" onclick="buyPotion('3x', 3000, 'coins')">
                            Mua - 3,000 💰
                        </button>
                    </div>
                    <div class="potion-card x4">
                        <div class="potion-label epic">🟣 EPIC</div>
                        <div class="potion-icon">🧪</div>
                        <div class="potion-name">Potion x4</div>
                        <div class="potion-effect">Nhân bốn thu nhập 1 phút</div>
                        <button class="buy-potion-button" onclick="buyPotion('4x', 5000, 'coins')">
                            Mua - 5,000 💰
                        </button>
                    </div>
                    
                    <!-- DIAMOND POTIONS -->
                    <div class="potion-card x5">
                        <div class="potion-label rainbow">🌈 RAINBOW</div>
                        <div class="potion-icon">💎</div>
                        <div class="potion-name">Potion x5</div>
                        <div class="potion-effect">Nhân 5 thu nhập 1 phút</div>
                        <button class="buy-potion-button diamond" onclick="buyPotion('5x', 100, 'diamonds')">
                            Mua - 100 💎
                        </button>
                    </div>
                    <div class="potion-card x6">
                        <div class="potion-label stellar">⭐ STELLAR</div>
                        <div class="potion-icon">✨</div>
                        <div class="potion-name">Potion x6</div>
                        <div class="potion-effect">Nhân 6 thu nhập 1 phút</div>
                        <button class="buy-potion-button diamond" onclick="buyPotion('6x', 500, 'diamonds')">
                            Mua - 500 💎
                        </button>
                    </div>
                    <div class="potion-card x10">
                        <div class="potion-label legendary">🔥 LEGENDARY</div>
                        <div class="potion-icon">🔥</div>
                        <div class="potion-name">Potion x10</div>
                        <div class="potion-effect">Nhân 10 thu nhập 1 phút</div>
                        <button class="buy-potion-button diamond" onclick="buyPotion('10x', 1000, 'diamonds')">
                            Mua - 1,000 💎
                        </button>
                    </div>
                </div>
            </div>

            <!-- Discount Ticket Shop -->
            <div class="potion-shop">
                <div class="section-title">💳 Cửa Hàng Vé Giảm Giá</div>
                <div class="potion-grid">
                    <div class="potion-card x2">
                        <div class="potion-icon">🎫</div>
                        <div class="potion-name">Vé giảm 10%</div>
                        <div class="potion-effect">Giảm giá 10% trong 1 phút</div>
                        <button class="buy-potion-button" onclick="buyDiscountTicket(10, 100)">
                            Mua - 100 💰
                        </button>
                    </div>
                    <div class="potion-card x3">
                        <div class="potion-icon">🎫</div>
                        <div class="potion-name">Vé giảm 20%</div>
                        <div class="potion-effect">Giảm giá 20% trong 1 phút</div>
                        <button class="buy-potion-button" onclick="buyDiscountTicket(20, 500)">
                            Mua - 500 💰
                        </button>
                    </div>
                    <div class="potion-card x4">
                        <div class="potion-icon">🎫</div>
                        <div class="potion-name">Vé giảm 50%</div>
                        <div class="potion-effect">Giảm giá 50% trong 1 phút</div>
                        <button class="buy-potion-button" onclick="buyDiscountTicket(50, 100000)">
                            Mua - 100,000 💰
                        </button>
                    </div>
                </div>
            </div>

            <!-- Pay Store - Premium Currency -->
            <div class="shop-panel" style="margin-top: 20px; background: linear-gradient(135deg, #1a0a0a 0%, #2d1b00 100%); border: 3px solid #ffd700; box-shadow: 0 0 20px rgba(255,215,0,0.4);">
                <div class="section-title" style="color: #ffd700; font-size: 1.6em;">💰 CỬA HÀNG PREMIUM 💰</div>
                <div style="text-align: center; margin: 12px 0; padding: 12px; background: rgba(255,215,0,0.1); border-radius: 10px; border: 2px dashed #ffd700;">
                    <div style="font-size: 1.2em; color: #ffd700; font-weight: bold;">🏆 Thỏi Vàng 🏆</div>
                    <div style="font-size: 0.9em; color: #ffaa00;">Mua vật phẩm đặc biệt!</div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); gap: 10px; margin-bottom: 15px;">
                    <div style="background: linear-gradient(135deg, #3a3a3a 0%, #1a1a1a 100%); padding: 12px; border-radius: 10px; border: 2px solid #888; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.05)'; this.style.borderColor='#ffd700';" onmouseout="this.style.transform='scale(1)'; this.style.borderColor='#888';" onclick="buyGoldPackage(19, 0.50)">
                        <div style="font-size: 1.5em;">🥉</div>
                        <div style="font-size: 1.1em; font-weight: bold; color: #ffd700;">19 Thỏi</div>
                        <div style="font-size: 1.3em; color: #4CAF50; font-weight: bold;">$0.50</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #4a4a2a 0%, #2a2a1a 100%); padding: 12px; border-radius: 10px; border: 2px solid #ffd700; text-align: center; position: relative; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.05)';" onmouseout="this.style.transform='scale(1)';" onclick="buyGoldPackage(59, 1.00)">
                        <div style="position: absolute; top: -8px; right: -8px; background: #ff0000; color: white; padding: 3px 8px; border-radius: 15px; font-size: 0.7em; font-weight: bold;">-30%</div>
                        <div style="font-size: 1.5em;">🥈</div>
                        <div style="font-size: 1.1em; font-weight: bold; color: #ffd700;">59 Thỏi</div>
                        <div style="font-size: 1.3em; color: #4CAF50; font-weight: bold;">$1.00</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #4a3a2a 0%, #2a1a0a 100%); padding: 12px; border-radius: 10px; border: 2px solid #ff8c00; text-align: center; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.05)';" onmouseout="this.style.transform='scale(1)';" onclick="buyGoldPackage(199, 1.99)">
                        <div style="font-size: 1.5em;">🥇</div>
                        <div style="font-size: 1.1em; font-weight: bold; color: #ffd700;">199 Thỏi</div>
                        <div style="font-size: 1.3em; color: #4CAF50; font-weight: bold;">$1.99</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #5a4a3a 0%, #3a2a1a 100%); padding: 12px; border-radius: 10px; border: 2px solid #ffd700; text-align: center; cursor: pointer; animation: goldGlow 3s ease-in-out infinite;" onclick="buyGoldPackage(599, 3.00)">
                        <div style="font-size: 1.5em;">💎</div>
                        <div style="font-size: 1.1em; font-weight: bold; color: #ffd700;">599 Thỏi</div>
                        <div style="font-size: 1.3em; color: #4CAF50; font-weight: bold;">$3.00</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #6a5a4a 0%, #4a3a2a 100%); padding: 12px; border-radius: 10px; border: 3px solid #ffd700; text-align: center; position: relative; cursor: pointer;" onmouseover="this.style.transform='scale(1.05)';" onmouseout="this.style.transform='scale(1)';" onclick="buyGoldPackage(1999, 5.00)">
                        <div style="position: absolute; top: -8px; right: -8px; background: #ff0000; color: white; padding: 3px 8px; border-radius: 15px; font-size: 0.7em; font-weight: bold;">HOT</div>
                        <div style="font-size: 1.5em;">👑</div>
                        <div style="font-size: 1.1em; font-weight: bold; color: #ffd700;">1,999 Thỏi</div>
                        <div style="font-size: 1.3em; color: #4CAF50; font-weight: bold;">$5.00</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #7a6a5a 0%, #5a4a3a 100%); padding: 12px; border-radius: 10px; border: 3px solid #ff8c00; text-align: center; cursor: pointer;" onmouseover="this.style.transform='scale(1.05)';" onmouseout="this.style.transform='scale(1)';" onclick="buyGoldPackage(2999, 5.00)">
                        <div style="font-size: 1.5em;">💰</div>
                        <div style="font-size: 1.1em; font-weight: bold; color: #ffd700;">2,999 Thỏi</div>
                        <div style="font-size: 1.3em; color: #4CAF50; font-weight: bold;">$5.00</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #8a7a6a 0%, #6a5a4a 100%); padding: 20px; border-radius: 15px; border: 5px solid #ffd700; text-align: center; position: relative; cursor: pointer; animation: godPulse 2s ease-in-out infinite; grid-column: span 2; transform: scale(1.05); box-shadow: 0 0 40px rgba(255,215,0,0.8);" onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1.05)'" onclick="buyGoldPackage(5999, 6.99)">
                        <div style="position: absolute; top: -15px; left: 50%; transform: translateX(-50%); background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%); color: #000; padding: 10px 20px; border-radius: 25px; font-size: 1em; font-weight: bold; border: 3px solid #fff; box-shadow: 0 0 30px rgba(255,215,0,1); animation: goldGlow 2s ease-in-out infinite;">⚡ ULTIMATE PACK ⚡</div>
                        <div style="font-size: 3.5em; margin: 20px 0 15px; animation: goldGlow 2s ease-in-out infinite;">🌟</div>
                        <div style="font-size: 2em; font-weight: bold; color: #ffd700; text-shadow: 0 0 20px rgba(255,215,0,1), 0 0 40px rgba(255,140,0,0.8);">5,999 Thỏi Vàng</div>
                        <div style="font-size: 2.2em; color: #4CAF50; font-weight: bold; margin: 15px 0; text-shadow: 0 0 10px rgba(76,175,80,0.8);">$6.99</div>
                        <div style="font-size: 1.2em; color: #ffd700; font-weight: bold; margin-top: 10px;">💫 GIÁ TRỊ KHỦNG NHẤT 💫</div>
                        <div style="font-size: 0.95em; color: #ffaa00; margin-top: 8px;">858 Thỏi/$1 - Tiết kiệm tối đa!</div>
                    </div>
                </div>
                <div style="text-align: center; padding: 10px; background: rgba(255,0,0,0.1); border-radius: 8px; border: 2px solid #ff4444;">
                    <div style="font-size: 0.95em; color: #ff6b6b; font-weight: bold;">⚠️ DEMO ONLY - Không thanh toán thật ⚠️</div>
                </div>
            </div>

            <!-- Inventory -->
            <div class="inventory-panel">
                <div class="section-title">🎒 Túi Đồ</div>
                <div class="inventory-grid">
                    <div class="inventory-item">
                        <div class="potion-icon">🧪</div>
                        <div class="potion-name">Potion x2</div>
                        <div class="inventory-count" id="inv2x">0</div>
                        <button class="use-button" onclick="usePotion('2x', 2)">
                            Sử dụng
                        </button>
                    </div>
                    <div class="inventory-item">
                        <div class="potion-icon">🧪</div>
                        <div class="potion-name">Potion x3</div>
                        <div class="inventory-count" id="inv3x">0</div>
                        <button class="use-button" onclick="usePotion('3x', 3)">
                            Sử dụng
                        </button>
                    </div>
                    <div class="inventory-item">
                        <div class="potion-icon">🧪</div>
                        <div class="potion-name">Potion x4</div>
                        <div class="inventory-count" id="inv4x">0</div>
                        <button class="use-button" onclick="usePotion('4x', 4)">
                            Sử dụng
                        </button>
                    </div>
                    <div class="inventory-item diamond">
                        <div class="potion-icon">💎</div>
                        <div class="potion-name">Potion x5</div>
                        <div class="inventory-count" id="inv5x">0</div>
                        <button class="use-button" onclick="usePotion('5x', 5)">
                            Sử dụng
                        </button>
                    </div>
                    <div class="inventory-item diamond">
                        <div class="potion-icon">✨</div>
                        <div class="potion-name">Potion x6</div>
                        <div class="inventory-count" id="inv6x">0</div>
                        <button class="use-button" onclick="usePotion('6x', 6)">
                            Sử dụng
                        </button>
                    </div>
                    <div class="inventory-item diamond">
                        <div class="potion-icon">🔥</div>
                        <div class="potion-name">Potion x10</div>
                        <div class="inventory-count" id="inv10x">0</div>
                        <button class="use-button" onclick="usePotion('10x', 10)">
                            Sử dụng
                        </button>
                    </div>
                </div>
            </div>

            <!-- Rebirth Panel -->
            <div class="rebirth-panel" id="rebirthPanel">
                <div class="rebirth-title">🔄 Tái Sinh (Rebirth)</div>
                <div class="rebirth-info">
                    Tái sinh sẽ reset toàn bộ tiến độ nhưng tăng vĩnh viễn thu nhập!<br>
                    Mỗi lần tái sinh: <strong>+0.75x thu nhập</strong>
                </div>
                <div class="rebirth-stats">
                    <div class="rebirth-stat">
                        <div class="rebirth-stat-label">Số lần tái sinh</div>
                        <div class="rebirth-stat-value" id="rebirthCountDisplay">0</div>
                    </div>
                    <div class="rebirth-stat">
                        <div class="rebirth-stat-label">Multiplier hiện tại</div>
                        <div class="rebirth-stat-value" id="rebirthMultiplierStat">x1.00</div>
                    </div>
                    <div class="rebirth-stat">
                        <div class="rebirth-stat-label">Lần tái sinh tiếp theo</div>
                        <div class="rebirth-stat-value" id="nextRebirthReq">2,500 coins</div>
                    </div>
                    <div class="rebirth-stat">
                        <div class="rebirth-stat-label">Multiplier sau tái sinh</div>
                        <div class="rebirth-stat-value" id="nextRebirthMult">x1.75</div>
                    </div>
                </div>
                <button class="rebirth-button" id="rebirthButton" onclick="performRebirth()">
                    🔄 Tái Sinh - Yêu cầu: <span id="rebirthReqText">2,500</span> coins
                </button>
            </div>

            <!-- Egg Shop -->
            <div class="egg-shop">
                <div class="section-title" id="eggShop">🥚 Egg Shop - Mua bằng Kim Cương 💎</div>
                <div class="egg-grid" id="eggGrid">
                    <!-- Eggs will be generated here -->
                </div>
            </div>

            <!-- Pets Collection -->
            <div class="pets-panel" id="petSystem">
                <div class="section-title">🐾 Pet System</div>
                
                <!-- Equipped Pets Bar -->
                <div class="pet-inventory-section">
                    <div class="section-subtitle">⚔️ Pets Đang Trang Bị (Tối đa 5)</div>
                    <div style="text-align: center; margin-bottom: 10px;">
                        <button onclick="equipBestPets()" style="
                            padding: 10px 20px;
                            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
                            border: 2px solid #ffd700;
                            border-radius: 8px;
                            color: #000;
                            font-weight: bold;
                            cursor: pointer;
                            font-size: 1em;
                            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
                            transition: transform 0.2s;
                        " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            ⭐ Sử Dụng Pet Tốt Nhất
                        </button>
                        <button onclick="unequipAllPets()" style="
                            padding: 10px 20px;
                            background: linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%);
                            border: 2px solid #ff4444;
                            border-radius: 8px;
                            color: white;
                            font-weight: bold;
                            cursor: pointer;
                            font-size: 1em;
                            margin-left: 10px;
                            transition: transform 0.2s;
                        " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            ❌ Gỡ Tất Cả
                        </button>
                    </div>
                    <div class="equipped-pets-bar" id="equippedPetsBar">
                        <!-- Equipped pets will be shown here -->
                    </div>
                </div>

                <!-- All Pets Collection -->
                <div class="pet-inventory-section">
                    <div class="section-subtitle">📦 Tất Cả Pets</div>
                    <div class="pets-grid" id="petsGrid">
                        <!-- Pets will be displayed here -->
                    </div>
                </div>
            </div>

            <!-- Trade-Up System -->
            <div class="shop-panel" style="margin-top: 20px;">
                <div class="section-title" id="tradeUpSection">🔄 Pet Trade-Up System</div>
                <div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 20px; border-radius: 15px; border: 2px solid #0f3460;">
                    
                    <div style="text-align: center; margin-bottom: 15px;">
                        <div style="font-size: 1.1em; color: #00d4ff; margin-bottom: 10px;">
                            ⬆️ Nâng Cấp Pet: 5 Pets Cùng Loại → 1 Pet Cao Cấp Hơn
                        </div>
                        <div style="font-size: 0.9em; color: #ff6b6b;">
                            ⚠️ Tỉ lệ thành công: 25% | Thất bại: 75% (mất tất cả)
                        </div>
                    </div>

                    <!-- Mutation Tiers Info -->
                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <div style="color: #ffd700; font-weight: bold; margin-bottom: 10px; text-align: center;">
                            📊 Các Cấp Độ Đột Biến:
                        </div>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 8px;">
                            <div style="padding: 8px; background: linear-gradient(135deg, #808080 0%, #a9a9a9 100%); border-radius: 8px; text-align: center;">
                                <div style="font-weight: bold;">⚪ Normal</div>
                                <div style="font-size: 0.9em;">x1 (Cơ bản)</div>
                            </div>
                            <div style="padding: 8px; background: linear-gradient(135deg, #ffd700 0%, #ffed4e 100%); border-radius: 8px; text-align: center; color: #000;">
                                <div style="font-weight: bold;">🟡 Gold</div>
                                <div style="font-size: 0.9em;">x2 chỉ số</div>
                            </div>
                            <div style="padding: 8px; background: linear-gradient(135deg, #00bfff 0%, #1e90ff 100%); border-radius: 8px; text-align: center;">
                                <div style="font-weight: bold;">💎 Diamond</div>
                                <div style="font-size: 0.9em;">x2.5 chỉ số</div>
                            </div>
                            <div style="padding: 8px; background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3); border-radius: 8px; text-align: center;">
                                <div style="font-weight: bold;">🌈 Rainbow</div>
                                <div style="font-size: 0.9em;">x3 chỉ số</div>
                            </div>
                            <div style="padding: 8px; background: linear-gradient(135deg, #00ffff 0%, #00bfff 100%); border-radius: 8px; text-align: center;">
                                <div style="font-weight: bold;">✨ Transcendent</div>
                                <div style="font-size: 0.9em;">x5 chỉ số</div>
                            </div>
                        </div>
                    </div>

                    <!-- Trade-Up Interface -->
                    <div style="background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px;">
                        <div style="margin-bottom: 15px;">
                            <label style="color: #ffd700; font-weight: bold; display: block; margin-bottom: 8px;">
                                🐾 Chọn Loại Pet:
                            </label>
                            <select id="tradeUpPetType" onchange="updateTradeUpDisplay()" style="width: 100%; padding: 10px; border-radius: 8px; font-size: 1em; background: #1a1a2e; color: white; border: 2px solid #0f3460;">
                                <option value="">-- Chọn Pet --</option>
                            </select>
                        </div>

                        <div style="margin-bottom: 15px;">
                            <label style="color: #ffd700; font-weight: bold; display: block; margin-bottom: 8px;">
                                ⭐ Cấp Độ Hiện Tại:
                            </label>
                            <select id="tradeUpMutation" onchange="updateTradeUpDisplay()" style="width: 100%; padding: 10px; border-radius: 8px; font-size: 1em; background: #1a1a2e; color: white; border: 2px solid #0f3460;">
                                <option value="">-- Chọn Cấp Độ --</option>
                                <option value="normal">⚪ Normal (→ Gold)</option>
                                <option value="gold">🟡 Gold (→ Diamond)</option>
                                <option value="diamond">💎 Diamond (→ Rainbow)</option>
                                <option value="rainbow">🌈 Rainbow (→ Transcendent)</option>
                            </select>
                        </div>

                        <div id="tradeUpStatus" style="background: rgba(0,0,0,0.5); padding: 15px; border-radius: 8px; margin-bottom: 15px; text-align: center; color: #00d4ff;">
                            Chọn loại pet và cấp độ để bắt đầu
                        </div>

                        <button id="tradeUpButton" onclick="attemptTradeUp()" disabled style="width: 100%; padding: 15px; background: linear-gradient(135deg, #00d4ff 0%, #0080ff 100%); border: none; border-radius: 10px; color: white; font-weight: bold; font-size: 1.1em; cursor: pointer; opacity: 0.5;">
                            🔄 TRADE-UP (25% Thành Công)
                        </button>
                    </div>
                </div>
            </div>

            <!-- Mini Game - Kéo Búa Bao -->
            <div class="shop-panel" style="margin-top: 20px;">
                <div class="section-title" id="miniGame">🎮 Mini Game - Kéo Búa Bao</div>
                <div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 20px; border-radius: 15px; border: 2px solid #0f3460;">
                    <div id="gameStatus" style="text-align: center; margin-bottom: 15px;">
                        <div style="font-size: 1.2em; color: #00d4ff;">🎯 Chọn Mục Tiêu & Đặt Cược</div>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <div style="color: #ffd700; font-weight: bold; margin-bottom: 8px; text-align: center;">📊 Chọn Mục Tiêu:</div>
                        <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;">
                            <button onclick="selectMultiplier(2, 2)" class="multiplier-btn" id="mult2"><div style="font-size: 1.3em;">x2</div><div style="font-size: 0.85em;">2 thắng</div></button>
                            <button onclick="selectMultiplier(3, 6)" class="multiplier-btn" id="mult3"><div style="font-size: 1.3em;">x3</div><div style="font-size: 0.85em;">6 thắng</div></button>
                            <button onclick="selectMultiplier(5, 10)" class="multiplier-btn" id="mult5"><div style="font-size: 1.3em;">x5</div><div style="font-size: 0.85em;">10 thắng</div></button>
                            <button onclick="selectMultiplier(20, 40)" class="multiplier-btn" id="mult20"><div style="font-size: 1.3em;">x20</div><div style="font-size: 0.85em;">40 thắng</div></button>
                        </div>
                    </div>
                    <div style="margin-bottom: 15px;">
                        <div style="color: #ffd700; font-weight: bold; margin-bottom: 8px; text-align: center;">💰 Đặt Cược:</div>
                        <div style="display: flex; gap: 8px; align-items: center;">
                            <select id="betType" style="padding: 8px; border-radius: 8px; flex: 1; font-size: 0.95em;">
                                <option value="coins">💰 Coins</option>
                                <option value="diamonds">💎 Diamonds</option>
                            </select>
                            <input type="number" id="betAmount" placeholder="Số tiền" style="padding: 8px; border-radius: 8px; flex: 2; font-size: 0.95em;" value="100">
                            <button onclick="startGame()" style="padding: 8px 15px; background: linear-gradient(135deg, #00d4ff 0%, #0080ff 100%); border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer;">🎮 Start</button>
                        </div>
                    </div>
                    <div id="gameProgress" style="display: none; margin-bottom: 15px;">
                        <div style="background: rgba(255,255,255,0.1); padding: 12px; border-radius: 8px; text-align: center;">
                            <div style="color: #00ff00; font-size: 1.1em;">🏆 <span id="currentWins">0</span>/<span id="requiredWins">0</span> thắng</div>
                            <div style="color: #ffd700; font-size: 0.9em;">💰 Cược: <span id="currentBet">0</span> <span id="currentBetType">Coins</span></div>
                            <div style="color: #ff6b6b; font-size: 0.85em;">⚠️ Thua = Mất toàn bộ!</div>
                        </div>
                    </div>
                    <div id="gameButtons" style="display: none;">
                        <div style="color: #00ff00; font-size: 1.1em; text-align: center; margin-bottom: 10px;">🤖 Chọn của bạn:</div>
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px;">
                            <button onclick="playerChoice('rock')" class="choice-btn"><div style="font-size: 2.5em;">✊</div><div>Búa</div></button>
                            <button onclick="playerChoice('paper')" class="choice-btn"><div style="font-size: 2.5em;">✋</div><div>Bao</div></button>
                            <button onclick="playerChoice('scissors')" class="choice-btn"><div style="font-size: 2.5em;">✌️</div><div>Kéo</div></button>
                        </div>
                    </div>
                    <div id="gameResult" style="display: none; margin-top: 15px;">
                        <div style="background: rgba(0,0,0,0.5); padding: 15px; border-radius: 8px; text-align: center;">
                            <div id="resultText" style="font-size: 1.3em; margin-bottom: 8px;"></div>
                            <div id="resultDetail" style="font-size: 1em; margin-bottom: 12px;"></div>
                            <button onclick="continueGame()" id="continueBtn" style="padding: 10px 25px; background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%); border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; font-size: 1em;">Tiếp Tục ➡️</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Gold Shop - Premium Items -->
            <div class="shop-panel" style="margin-top: 20px; background: linear-gradient(135deg, #2a1a0a 0%, #1a0a0a 100%); border: 3px solid #ffd700;">
                <div class="section-title" style="color: #ffd700;">🏆 GOLD SHOP - VẬT PHẨM ĐỘC QUYỀN 🏆</div>
                <div style="text-align: center; margin-bottom: 15px; padding: 10px; background: rgba(255,215,0,0.1); border-radius: 8px;">
                    <div style="color: #ffd700; font-weight: bold;">Chỉ mua bằng Thỏi Vàng! 💰</div>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 12px;">
                    <div style="background: linear-gradient(135deg, #4a3a2a 0%, #2a1a0a 100%); padding: 12px; border-radius: 10px; border: 2px solid #ffd700; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'" onclick="buyGoldItem('💎 Diamond Pack x1000', 50, '+1,000 Diamonds')">
                        <div style="font-size: 2em; text-align: center;">💎</div>
                        <div style="font-weight: bold; color: #00ffff; margin: 8px 0;">Diamond Pack x1000</div>
                        <div style="font-size: 0.85em; color: #aaa;">+1,000 💎 Diamonds</div>
                        <div style="margin-top: 8px; padding: 6px; background: rgba(255,215,0,0.2); border-radius: 5px; text-align: center; color: #ffd700; font-weight: bold;">50 🏆</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #5a4a3a 0%, #3a2a1a 100%); padding: 12px; border-radius: 10px; border: 2px solid #ffd700; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'" onclick="buyGoldItem('💰 Mega Coins x1M', 30, '+1,000,000 Coins')">
                        <div style="font-size: 2em; text-align: center;">💰</div>
                        <div style="font-weight: bold; color: #ffff00; margin: 8px 0;">Mega Coins x1M</div>
                        <div style="font-size: 0.85em; color: #aaa;">+1,000,000 Coins</div>
                        <div style="margin-top: 8px; padding: 6px; background: rgba(255,215,0,0.2); border-radius: 5px; text-align: center; color: #ffd700; font-weight: bold;">30 🏆</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #6a5a4a 0%, #4a3a2a 100%); padding: 12px; border-radius: 10px; border: 2px solid #ff8c00; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'" onclick="buyGoldItem('⚡ Auto Clicker x50', 80, '+50 Auto Clickers')">
                        <div style="font-size: 2em; text-align: center;">⚡</div>
                        <div style="font-weight: bold; color: #00ff00; margin: 8px 0;">Auto Clicker x50</div>
                        <div style="font-size: 0.85em; color: #aaa;">+50 Auto Clickers</div>
                        <div style="margin-top: 8px; padding: 6px; background: rgba(255,140,0,0.2); border-radius: 5px; text-align: center; color: #ff8c00; font-weight: bold;">80 🏆</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #7a6a5a 0%, #5a4a3a 100%); padding: 12px; border-radius: 10px; border: 2px solid #ff6b6b; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'" onclick="buyGoldItem('🔥 Click Power x100', 100, '+100 Click Power')">
                        <div style="font-size: 2em; text-align: center;">🔥</div>
                        <div style="font-weight: bold; color: #ff6b6b; margin: 8px 0;">Click Power x100</div>
                        <div style="font-size: 0.85em; color: #aaa;">+100 Click Power</div>
                        <div style="margin-top: 8px; padding: 6px; background: rgba(255,107,107,0.2); border-radius: 5px; text-align: center; color: #ff6b6b; font-weight: bold;">100 🏆</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #8a7a6a 0%, #6a5a4a 100%); padding: 12px; border-radius: 10px; border: 2px solid #00d4ff; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'" onclick="buyGoldItem('🚀 Multiplier x5', 150, '+5 Multiplier')">
                        <div style="font-size: 2em; text-align: center;">🚀</div>
                        <div style="font-weight: bold; color: #00d4ff; margin: 8px 0;">Multiplier x5</div>
                        <div style="font-size: 0.85em; color: #aaa;">+5 Multiplier</div>
                        <div style="margin-top: 8px; padding: 6px; background: rgba(0,212,255,0.2); border-radius: 5px; text-align: center; color: #00d4ff; font-weight: bold;">150 🏆</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #9a8a7a 0%, #7a6a5a 100%); padding: 12px; border-radius: 10px; border: 2px solid #ff69b4; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'" onclick="buyGoldItem('⏱️ Speed Boost', 120, '-0.2s Cooldown')">
                        <div style="font-size: 2em; text-align: center;">⏱️</div>
                        <div style="font-weight: bold; color: #ff69b4; margin: 8px 0;">Speed Boost</div>
                        <div style="font-size: 0.85em; color: #aaa;">-0.2s Click Cooldown</div>
                        <div style="margin-top: 8px; padding: 6px; background: rgba(255,105,180,0.2); border-radius: 5px; text-align: center; color: #ff69b4; font-weight: bold;">120 🏆</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #aa9a8a 0%, #8a7a6a 100%); padding: 12px; border-radius: 10px; border: 2px solid #ffd700; cursor: pointer; transition: all 0.3s; animation: goldGlow 3s ease-in-out infinite;" onclick="buyGoldItem('🎫 Ticket Pack x100', 200, '+100 Tickets')">
                        <div style="font-size: 2em; text-align: center;">🎫</div>
                        <div style="font-weight: bold; color: #ffd700; margin: 8px 0;">Ticket Pack x100</div>
                        <div style="font-size: 0.85em; color: #aaa;">+100 🎫 Tickets</div>
                        <div style="margin-top: 8px; padding: 6px; background: rgba(255,215,0,0.3); border-radius: 5px; text-align: center; color: #ffd700; font-weight: bold;">200 🏆</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #baaa9a 0%, #9a8a7a 100%); padding: 12px; border-radius: 10px; border: 3px solid #ffd700; cursor: pointer; transition: all 0.3s; animation: godPulse 2s ease-in-out infinite;" onclick="buyGoldItem('🥚 Legendary Egg', 500, 'Random Legendary Pet x100-150')">
                        <div style="font-size: 2em; text-align: center;">🥚</div>
                        <div style="font-weight: bold; color: #ffd700; margin: 8px 0; text-shadow: 0 0 10px rgba(255,215,0,0.8);">Legendary Egg</div>
                        <div style="font-size: 0.85em; color: #ffaa00;">Pet x100-150 Multiplier!</div>
                        <div style="margin-top: 8px; padding: 6px; background: rgba(255,215,0,0.4); border-radius: 5px; text-align: center; color: #ffd700; font-weight: bold; font-size: 1.1em;">500 🏆</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #cababa 0%, #aaaa9a 100%); padding: 12px; border-radius: 10px; border: 2px solid #00ffff; cursor: pointer; transition: all 0.3s;" onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'" onclick="buyGoldItem('🏆 VIP Pass (30 Days)', 300, 'VIP Benefits')">
                        <div style="font-size: 2em; text-align: center;">🏆</div>
                        <div style="font-weight: bold; color: #00ffff; margin: 8px 0;">VIP Pass (30 Days)</div>
                        <div style="font-size: 0.85em; color: #aaa;">-20% Shop Prices</div>
                        <div style="margin-top: 8px; padding: 6px; background: rgba(0,255,255,0.2); border-radius: 5px; text-align: center; color: #00ffff; font-weight: bold;">300 🏆</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #dacaca 0%, #baaaa 100%); padding: 12px; border-radius: 10px; border: 3px solid #ff00ff; cursor: pointer; transition: all 0.3s; animation: goldGlow 2.5s ease-in-out infinite;" onclick="buyGoldItem('👑 Premium Pass (30 Days)', 500, 'Premium + VIP')">
                        <div style="font-size: 2em; text-align: center;">👑</div>
                        <div style="font-weight: bold; color: #ff00ff; margin: 8px 0;">Premium Pass</div>
                        <div style="font-size: 0.85em; color: #ff69b4;">All Benefits!</div>
                        <div style="margin-top: 8px; padding: 6px; background: rgba(255,0,255,0.2); border-radius: 5px; text-align: center; color: #ff00ff; font-weight: bold;">500 🏆</div>
                    </div>
                    <div style="background: linear-gradient(135deg, #eadada 0%, #cababa 100%); padding: 12px; border-radius: 10px; border: 4px solid #ffd700; cursor: pointer; transition: all 0.3s; animation: godPulse 3s ease-in-out infinite; box-shadow: 0 0 20px rgba(255,215,0,0.6);" onclick="buyGoldItem('🌟 Rebirth Multiplier +2x', 1000, 'Permanent +2x Income')">
                        <div style="font-size: 2.5em; text-align: center;">🌟</div>
                        <div style="font-weight: bold; color: #ffd700; margin: 8px 0; text-shadow: 0 0 15px rgba(255,215,0,1);">Rebirth Boost</div>
                        <div style="font-size: 0.85em; color: #ffaa00;">+2x Multiplier Forever!</div>
                        <div style="margin-top: 8px; padding: 8px; background: rgba(255,215,0,0.4); border-radius: 5px; text-align: center; color: #ffd700; font-weight: bold; font-size: 1.2em;">1000 🏆</div>
                    </div>
                </div>
            </div>

            <!-- Wheel Game Panel -->
            <div class="shop-panel" style="margin-top: 20px;">
                <div class="section-title">🎡 Vòng Quay May Mắn</div>
                <div style="background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); padding: 20px; border-radius: 15px; border: 2px solid #ffd700;">
                    <div style="text-align: center; margin-bottom: 15px;">
                        <div style="font-size: 1.2em; color: #ffd700;">🎫 Vé: <span id="wheelTickets">0</span></div>
                        <div style="font-size: 0.85em; color: #aaa;">1 Vé = 500 💎 | 10 Vé = 5K 💎</div>
                    </div>
                    <div style="text-align: center; margin-bottom: 15px;">
                        <button onclick="buyTickets(1)" style="padding: 8px 15px; background: linear-gradient(135deg, #00d4ff 0%, #0080ff 100%); border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; margin: 0 5px;">1 Vé (500💎)</button>
                        <button onclick="buyTickets(10)" style="padding: 8px 15px; background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%); border: none; border-radius: 8px; color: white; font-weight: bold; cursor: pointer; margin: 0 5px;">10 Vé (5K💎)</button>
                    </div>
                    <div style="text-align: center; margin-bottom: 15px;">
                        <div id="wheelDisplay" style="width: 250px; height: 250px; margin: 0 auto; border: 4px solid #ffd700; border-radius: 50%; background: conic-gradient(from 0deg, #ff6b6b 0deg 45deg, #4ecdc4 45deg 90deg, #ffd93d 90deg 135deg, #95e1d3 135deg 180deg, #f38181 180deg 225deg, #aa96da 225deg 270deg, #fcbad3 270deg 315deg, #6c5ce7 315deg 360deg); position: relative; transition: transform 3s cubic-bezier(0.17, 0.67, 0.12, 0.99);">
                            <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; width: 60px; height: 60px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 1.5em; border: 2px solid #ffd700;">🎁</div>
                        </div>
                        <div style="width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 30px solid #ff0000; margin: -15px auto 0;"></div>
                    </div>
                    <div style="text-align: center; margin-bottom: 15px;">
                        <button onclick="spinWheel(1)" id="spin1Btn" style="padding: 10px 20px; background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%); border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; margin: 0 5px;">🎡 x1 (1🎫)</button>
                        <button onclick="spinWheel(10)" id="spin10Btn" style="padding: 10px 20px; background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%); border: none; border-radius: 10px; color: white; font-weight: bold; cursor: pointer; margin: 0 5px;">🎡 x10 (10🎫)</button>
                    </div>
                    <div id="wheelResult" style="display: none; background: rgba(0,0,0,0.5); padding: 15px; border-radius: 10px; text-align: center;">
                        <div id="wheelResultText" style="font-size: 1.2em; color: #ffd700; margin-bottom: 8px;"></div>
                        <div id="wheelResultList" style="font-size: 0.9em; color: #fff;"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Code Redemption Modal -->
    <div id="codeRedemptionOverlay" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 10000; backdrop-filter: blur(5px);" onclick="closeCodeModal()"></div>
    <div id="codeRedemptionModal" style="display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: linear-gradient(135deg, #1a0a0a 0%, #2d1b00 100%); padding: 30px; border-radius: 20px; border: 4px solid #ffd700; z-index: 10001; min-width: 400px; box-shadow: 0 0 50px rgba(255,215,0,0.8); animation: goldGlow 2s ease-in-out infinite;">
        <div style="text-align: center;">
            <div style="font-size: 3em; margin-bottom: 15px; animation: goldGlow 2s ease-in-out infinite;">🏆</div>
            <div style="font-size: 1.8em; color: #ffd700; font-weight: bold; margin-bottom: 10px; text-shadow: 0 0 10px rgba(255,215,0,0.8);">NHẬP MÃ CODE</div>
            <div id="codePackageInfo" style="font-size: 1.2em; color: #ffaa00; margin-bottom: 20px;">Gói: <span id="codePackageName"></span></div>
            <div style="margin-bottom: 20px;">
                <input type="text" id="codeInput" placeholder="Nhập code ở đây..." style="width: 100%; padding: 15px; font-size: 1.2em; border: 3px solid #ffd700; border-radius: 10px; background: rgba(255,215,0,0.1); color: #ffd700; text-align: center; font-weight: bold; text-transform: uppercase;" maxlength="20">
            </div>
            <div style="display: flex; gap: 15px; justify-content: center;">
                <button onclick="redeemCode()" style="padding: 15px 30px; background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%); border: none; border-radius: 10px; color: white; font-weight: bold; font-size: 1.1em; cursor: pointer; box-shadow: 0 4px 15px rgba(0,255,0,0.4);">✅ XÁC NHẬN</button>
                <button onclick="closeCodeModal()" style="padding: 15px 30px; background: linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%); border: none; border-radius: 10px; color: white; font-weight: bold; font-size: 1.1em; cursor: pointer; box-shadow: 0 4px 15px rgba(255,0,0,0.4);">❌ HỦY</button>
            </div>
            <div style="margin-top: 20px; padding: 15px; background: rgba(255,215,0,0.1); border-radius: 10px; border: 2px dashed #ffd700;">
                <div style="font-size: 0.95em; color: #ffaa00; font-weight: bold; margin-bottom: 5px;">💡 Lấy code ở đâu?</div>
                <div style="font-size: 0.85em; color: #ff8c00;">Trong game thật: Mua qua cổng thanh toán → Nhận code qua email</div>
                <div style="font-size: 0.85em; color: #ff8c00; margin-top: 3px;">🎮 Demo: Codes sẽ được gửi qua email sau thanh toán</div>
                <div style="font-size: 0.8em; color: #aaa; margin-top: 5px;">💡 Test codes: Contact admin or check docs</div>
            </div>
        </div>
    </div>

    <!-- Hatch Animation -->
    <div id="hatchAnimation" style="display: none;"></div>

    <!-- 🎮 GAME PASS STORE -->
    <div class="game-pass-section">
        <div class="game-pass-title">🎮 GAME PASS STORE</div>
        <div class="game-pass-subtitle">💎 Passes độc quyền – Tăng sức mạnh siêu tốc!</div>
        
        <div class="game-passes-grid">
            <!-- SUPER PASS -->
            <div class="game-pass-card super-pass" onclick="buyGamePass('super')">
                <div class="pass-badge" style="background: linear-gradient(135deg, #ff0000 0%, #ffd700 100%);">
                    ⏳ LIMITED
                </div>
                
                <div class="pass-header">
                    <div class="pass-icon">🌟</div>
                    <div class="pass-name">SUPER PASS</div>
                </div>
                
                <div class="pass-description">
                    Pass mạnh nhất – dành cho người muốn khởi đầu bá đạo
                </div>
                
                <div class="pass-benefits">
                    <div class="pass-benefit">
                        <span class="benefit-icon">💰</span>
                        <span class="benefit-text">Tiền khởi đầu: <span class="benefit-value">+1.000.000</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">⚡</span>
                        <span class="benefit-text">Cooldown: <span class="benefit-value">0s (INSTANT!)</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">🤖</span>
                        <span class="benefit-text">Auto Clicker: <span class="benefit-value">+2000</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">✖️</span>
                        <span class="benefit-text">Multiplier: <span class="benefit-value">x7</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">👆</span>
                        <span class="benefit-text">Click Power: <span class="benefit-value">+1000</span></span>
                    </div>
                </div>
                
                <div class="pass-footer">
                    <div class="pass-price">💎 5000 Diamonds</div>
                    <button class="pass-buy-button" onclick="event.stopPropagation(); buyGamePass('super');">
                        MUA NGAY
                    </button>
                </div>
            </div>
            
            <!-- STARTER BOOST PASS -->
            <div class="game-pass-card starter-pass" onclick="buyGamePass('starter')">
                <div class="pass-badge" style="background: linear-gradient(135deg, #00bfff 0%, #00ff7f 100%);">
                    💡 BEST FOR YOU
                </div>
                
                <div class="pass-header">
                    <div class="pass-icon">💎</div>
                    <div class="pass-name">STARTER BOOST</div>
                </div>
                
                <div class="pass-description">
                    Phù hợp người mới chơi – khởi đầu thuận lợi
                </div>
                
                <div class="pass-benefits">
                    <div class="pass-benefit">
                        <span class="benefit-icon">💰</span>
                        <span class="benefit-text">Tiền khởi đầu: <span class="benefit-value">+100.000</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">👆</span>
                        <span class="benefit-text">Click Power: <span class="benefit-value">+100</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">✖️</span>
                        <span class="benefit-text">Multiplier: <span class="benefit-value">x2</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">🤖</span>
                        <span class="benefit-text">Auto Clicker: <span class="benefit-value">+50</span></span>
                    </div>
                </div>
                
                <div class="pass-footer">
                    <div class="pass-price">💎 500 Diamonds</div>
                    <button class="pass-buy-button" onclick="event.stopPropagation(); buyGamePass('starter');">
                        MUA NGAY
                    </button>
                </div>
            </div>
            
            <!-- INSANE CLICKER PASS -->
            <div class="game-pass-card insane-pass" onclick="buyGamePass('insane')">
                <div class="pass-badge" style="background: linear-gradient(135deg, #ff4500 0%, #ff8c00 100%);">
                    🔥 HOT
                </div>
                
                <div class="pass-header">
                    <div class="pass-icon">🔥</div>
                    <div class="pass-name">INSANE CLICKER</div>
                </div>
                
                <div class="pass-description">
                    Dành cho ai thích click nhanh – farm mạnh
                </div>
                
                <div class="pass-benefits">
                    <div class="pass-benefit">
                        <span class="benefit-icon">⚡</span>
                        <span class="benefit-text">Cooldown giảm: <span class="benefit-value">-70%</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">🤖</span>
                        <span class="benefit-text">Auto Clicker: <span class="benefit-value">+500</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">👆</span>
                        <span class="benefit-text">Click Power: <span class="benefit-value">+300</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">✖️</span>
                        <span class="benefit-text">Multiplier: <span class="benefit-value">x3</span></span>
                    </div>
                </div>
                
                <div class="pass-footer">
                    <div class="pass-price">💎 1500 Diamonds</div>
                    <button class="pass-buy-button" onclick="event.stopPropagation(); buyGamePass('insane');">
                        MUA NGAY
                    </button>
                </div>
            </div>
            
            <!-- TRANSCENDENT PASS -->
            <div class="game-pass-card transcendent-pass" onclick="buyGamePass('transcendent')">
                <div class="pass-badge" style="background: linear-gradient(135deg, #ffffff 0%, #8a2be2 50%, #ffd700 100%); color: #000;">
                    ✨ TRANSCENDENT
                </div>
                
                <div class="pass-header">
                    <div class="pass-icon">🌈</div>
                    <div class="pass-name">TRANSCENDENT</div>
                </div>
                
                <div class="pass-description">
                    Pass cao cấp – cảm giác "vượt cấp độ"
                </div>
                
                <div class="pass-benefits">
                    <div class="pass-benefit">
                        <span class="benefit-icon">✖️</span>
                        <span class="benefit-text">Multiplier: <span class="benefit-value">x5</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">🤖</span>
                        <span class="benefit-text">Auto Clicker: <span class="benefit-value">+1000</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">👆</span>
                        <span class="benefit-text">Click Power: <span class="benefit-value">+500</span></span>
                    </div>
                    <div class="pass-benefit">
                        <span class="benefit-icon">✨</span>
                        <span class="benefit-text">Effect: <span class="benefit-value">Ánh sáng đặc biệt</span></span>
                    </div>
                </div>
                
                <div class="pass-footer">
                    <div class="pass-price">💎 3000 Diamonds</div>
                    <button class="pass-buy-button" onclick="event.stopPropagation(); buyGamePass('transcendent');">
                        MUA NGAY
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Egg Details Modal -->
    <div id="eggDetailsOverlay" class="egg-details-overlay" style="display: none;" onclick="closeEggDetails()"></div>
    <div id="eggDetailsModal" class="egg-details-modal" style="display: none;"></div>

    <script>
        // ===== MOBILE DETECTION =====
        const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
        const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
        
        // ===== JAVASCRIPT ANTI-ZOOM — SIMPLIFIED FOR SCROLL ☠️ =====
        if (isMobile || isTouch) {
            // Block iOS gesture zoom only (không chặn scroll)
            document.addEventListener('gesturestart', function(e) {
                e.preventDefault();
            });
            
            document.addEventListener('gesturechange', function(e) {
                e.preventDefault();
            });
            
            document.addEventListener('gestureend', function(e) {
                e.preventDefault();
            });
            
            console.log('🎮 ANTI-ZOOM ACTIVE (Scroll Enabled)');
        }
        
        // ===== GAME VARIABLES =====
        let coins = 0;
        let clickPower = 1;
        let autoClickers = 0;
        let multiplier = 1;
        let isAdmin = false;
        let clickCooldown = 0.5;
        let canClick = true;
        let gamePasses = {
            vip: false,
            premium: false,
            legend: false,
            super: false,        // Super Pass - LIMITED (code-based)
            infinity: false,     // Infinity Pass - TRANSCENDENT
            quantum: false,      // Quantum Pass - HOT
            cosmic: false,       // Cosmic Pass - BEST FOR YOU
            epic: false,         // ⚔️ Epic Pass - POWERFUL
            prismatic: false,    // 🌈 Prismatic Pass - COLORFUL
            divine: false,       // ✨ Divine Pass - GODLIKE
            secret: false,       // 🔒 Secret Pass - HIDDEN
            superDiamond: false, // 🌟 Super Pass - Diamond version
            starter: false,      // 💎 Starter Boost - Diamond Pass
            insane: false,       // 🔥 Insane Clicker - Diamond Pass
            transcendent: false  // 🌈 Transcendent - Diamond Pass
        };
        let inventory = {
            potion_2x: 0,
            potion_3x: 0,
            potion_4x: 0,
            potion_5x: 0,  // NEW: Diamond potion
            potion_6x: 0,  // NEW: Diamond potion
            potion_10x: 0  // NEW: Diamond potion
        };
        let activePotion = null;
        let potionTimer = 0;
        let potionInterval = null;
        let afkTimer = null;
        let afkTimeLeft = 1800;
        let isAfk = false;
        let playTime = 0;
        let playTimeInterval = null;
        let shopDiscount = 0;
        let rebirthCount = 0;
        let rebirthMultiplier = 1;
        let clickTimes = [];
        let isBanned = false;
        let discountTicket = 0;
        let discountTicketTimer = 0;
        let discountTicketInterval = null;
        let purchaseLimit = 5;
        let purchaseCounts = {};

        // ===== DIAMOND & PETS SYSTEM =====
        let diamonds = 0;
        let tickets = 0; // Vé quay
        let goldBars = 0; // Thỏi vàng - Premium currency
        
        // Language System
        let currentLanguage = 'en'; // Default: English
        
        const translations = {
            en: {
                // Header
                clickPower: 'Click Power',
                auto: 'Auto',
                multiplier: 'Multiplier',
                cooldown: 'Cooldown',
                rebirth: 'Rebirth',
                petMulti: 'Pet Multi',
                discount: 'Discount',
                
                // Cookie
                clickMe: 'Click Me!',
                perClick: 'per click',
                
                // Admin Panel
                adminPanel: 'Admin Panel',
                adminCode: 'Admin Code',
                login: 'Login',
                adminControls: 'Admin Controls',
                addMoney: '+100K Coins',
                addDiamonds: '+1K Diamonds',
                addGold: '+100 Gold Bars',
                summonWeather: 'Summon Weather',
                summonPet: 'Summon Pet',
                clearWeather: 'Clear All Weather',
                currentWeather: 'Current Weather',
                
                // Shop
                shop: 'Shop',
                clickPowerItem: 'Click Power',
                autoClickerItem: 'Auto Clicker',
                multiplierItem: 'Multiplier',
                speedBoostItem: 'Speed Boost',
                buy: 'Buy',
                owned: 'Owned',
                remaining: 'Remaining',
                effect: 'Effect',
                increase: 'Increase',
                perSecond: 'per second',
                reduce: 'Reduce',
                shopDescription1: 'Increase click power by 1 per purchase',
                shopDescription2: 'Auto-generate 1 coin per second',
                shopDescription3: 'Multiply all income by 1.5x',
                shopDescription4: 'Reduce click cooldown by 0.1s',
                
                // Rebirth
                rebirthPanel: 'Rebirth System',
                rebirthCount: 'Rebirth Count',
                rebirthMulti: 'Rebirth Multiplier',
                nextRebirth: 'Next Rebirth',
                requirement: 'Requirement',
                rebirthBtn: 'Rebirth',
                rebirthReward: 'Reward',
                times: 'times',
                
                // Game Pass Store
                gamePassPanel: 'Game Pass Store',
                vipPass: 'VIP Pass',
                premiumPass: 'Premium Pass',
                shopDiscount: 'Shop Discount',
                noLimit: 'No Purchase Limit',
                autoSave: 'Auto Save',
                allBenefits: 'All Benefits',
                
                // Potion Shop
                potionShop: 'Potion Shop',
                clickPotion: 'Click Potion',
                autoPotion: 'Auto Potion',
                doubleClick: 'Double click power for 60s',
                doubleAuto: 'Double auto-clickers for 60s',
                
                // Inventory
                inventory: 'Inventory',
                use: 'Use',
                
                // Pets
                petsPanel: 'Pet System',
                equippedPets: 'Equipped Pets',
                ownedPets: 'Owned Pets',
                equip: 'Equip',
                unequip: 'Unequip',
                maxEquipped: 'Max Equipped',
                
                // Eggs
                eggShop: 'Egg Shop',
                hatchChance: 'Hatch Chance',
                
                // Weather
                weatherPanel: 'Weather System',
                activeWeather: 'Active Weather',
                noWeather: 'No active weather',
                
                // Mini Games
                miniGameRPS: 'Mini Game - Rock Paper Scissors',
                selectTarget: 'Select Target',
                placeBet: 'Place Bet',
                coins: 'Coins',
                diamonds: 'Diamonds',
                start: 'Start',
                continue: 'Continue',
                backToMenu: 'Back to Menu',
                rock: 'Rock',
                paper: 'Paper',
                scissors: 'Scissors',
                youWin: 'You Win!',
                youLose: 'You Lose!',
                draw: 'Draw!',
                
                // Wheel
                wheelGame: 'Lucky Wheel',
                tickets: 'Tickets',
                buyTicket: 'Buy Ticket',
                spin: 'Spin',
                ticketPrice: 'Ticket Price',
                
                // Discount Ticket Shop
                discountShop: 'Discount Ticket Shop',
                ticketDiscount: 'Ticket Discount',
                currentDiscount: 'Current Discount',
                
                // Gold Shop
                goldShop: 'GOLD SHOP - EXCLUSIVE ITEMS',
                onlyGold: 'Only buyable with Gold Bars!',
                diamondPack: 'Diamond Pack',
                megaCoins: 'Mega Coins',
                autoClicker: 'Auto Clicker',
                clickPowerBoost: 'Click Power',
                multiplierBoost: 'Multiplier',
                speedBoost: 'Speed Boost',
                ticketPack: 'Ticket Pack',
                legendaryEgg: 'Legendary Egg',
                vipPassItem: 'VIP Pass',
                premiumPassItem: 'Premium Pass',
                rebirthBoost: 'Rebirth Multiplier',
                bestValue: 'BEST VALUE',
                permanent: 'Permanent',
                
                // Pay Store
                payStore: 'PREMIUM STORE',
                goldBars: 'Gold Bars',
                premiumCurrency: 'Extremely rare! Only purchasable with real money!',
                buySpecial: 'Buy special items with Gold Bars',
                demoOnly: 'DEMO ONLY - No real payment',
                starterPack: 'Starter Pack',
                valuePack: 'Value Pack',
                goodDeal: 'Good Deal',
                greatValue: 'Great Value',
                bestPack: 'Best Value',
                megaPack: 'Mega Pack',
                ultimatePack: 'ULTIMATE PACK',
                save30: 'SAVE 30%',
                hot: 'HOT',
                
                // Settings
                settings: 'Settings',
                language: 'Language',
                english: 'English',
                vietnamese: 'Vietnamese',
                save: 'Save',
                load: 'Load',
                deleteSave: 'Delete Save',
                export: 'Export to save game',
                import: 'Import to load progress',
                
                // Alerts
                notEnough: 'Not enough',
                purchased: 'Purchased',
                success: 'Success',
                error: 'Error',
                confirm: 'Confirm',
                cancel: 'Cancel'
            },
            vi: {
                // Header
                clickPower: 'Sức Click',
                auto: 'Tự động',
                multiplier: 'Nhân',
                cooldown: 'Hồi chiêu',
                rebirth: 'Tái sinh',
                petMulti: 'Pet Nhân',
                discount: 'Giảm giá',
                
                // Cookie
                clickMe: 'Click vào đây!',
                perClick: 'mỗi click',
                
                // Admin Panel
                adminPanel: 'Bảng Admin',
                adminCode: 'Mã Admin',
                login: 'Đăng nhập',
                adminControls: 'Điều khiển Admin',
                addMoney: '+100K Coins',
                addDiamonds: '+1K Kim cương',
                addGold: '+100 Thỏi vàng',
                summonWeather: 'Triệu hồi Thời tiết',
                summonPet: 'Triệu hồi Pet',
                clearWeather: 'Xóa Tất cả Thời tiết',
                currentWeather: 'Thời tiết Hiện tại',
                
                // Shop
                shop: 'Cửa hàng',
                clickPowerItem: 'Sức mạnh Click',
                autoClickerItem: 'Tự động Click',
                multiplierItem: 'Bội số',
                speedBoostItem: 'Tăng tốc',
                buy: 'Mua',
                owned: 'Đã mua',
                remaining: 'Còn lại',
                effect: 'Tác dụng',
                increase: 'Tăng',
                perSecond: 'mỗi giây',
                reduce: 'Giảm',
                shopDescription1: 'Tăng sức mạnh click thêm 1 mỗi lần mua',
                shopDescription2: 'Tự động tạo 1 coin mỗi giây',
                shopDescription3: 'Nhân toàn bộ thu nhập x1.5',
                shopDescription4: 'Giảm thời gian hồi chiêu 0.1s',
                
                // Rebirth
                rebirthPanel: 'Hệ thống Tái sinh',
                rebirthCount: 'Số lần Tái sinh',
                rebirthMulti: 'Bội số Tái sinh',
                nextRebirth: 'Tái sinh tiếp theo',
                requirement: 'Yêu cầu',
                rebirthBtn: 'Tái sinh',
                rebirthReward: 'Phần thưởng',
                times: 'lần',
                
                // Game Pass Store
                gamePassPanel: 'Cửa hàng Game Pass',
                vipPass: 'VIP Pass',
                premiumPass: 'Premium Pass',
                shopDiscount: 'Giảm giá Shop',
                noLimit: 'Mua không giới hạn',
                autoSave: 'Tự động Lưu',
                allBenefits: 'Toàn bộ Quyền lợi',
                
                // Potion Shop
                potionShop: 'Cửa hàng Thuốc',
                clickPotion: 'Thuốc Click',
                autoPotion: 'Thuốc Auto',
                doubleClick: 'Nhân đôi sức click trong 60s',
                doubleAuto: 'Nhân đôi auto-clicker trong 60s',
                
                // Inventory
                inventory: 'Túi Đồ',
                use: 'Dùng',
                
                // Pets
                petsPanel: 'Hệ thống Pet',
                equippedPets: 'Pets đang trang bị',
                ownedPets: 'Pets đã sở hữu',
                equip: 'Trang bị',
                unequip: 'Gỡ',
                maxEquipped: 'Trang bị Tối đa',
                
                // Eggs
                eggShop: 'Cửa hàng Trứng',
                hatchChance: 'Tỷ lệ nở',
                
                // Weather
                weatherPanel: 'Hệ thống Thời tiết',
                activeWeather: 'Thời tiết đang có',
                noWeather: 'Không có thời tiết nào',
                
                // Mini Games
                miniGameRPS: 'Mini Game - Kéo Búa Bao',
                selectTarget: 'Chọn Mục tiêu',
                placeBet: 'Đặt cược',
                coins: 'Coins',
                diamonds: 'Kim cương',
                start: 'Bắt đầu',
                continue: 'Tiếp tục',
                backToMenu: 'Về Menu',
                rock: 'Búa',
                paper: 'Bao',
                scissors: 'Kéo',
                youWin: 'Bạn Thắng!',
                youLose: 'Bạn Thua!',
                draw: 'Hòa!',
                
                // Wheel
                wheelGame: 'Vòng quay May mắn',
                tickets: 'Vé',
                buyTicket: 'Mua vé',
                spin: 'Quay',
                ticketPrice: 'Giá vé',
                
                // Discount Ticket Shop
                discountShop: 'Cửa Hàng Vé Giảm Giá',
                ticketDiscount: 'Giảm giá Vé',
                currentDiscount: 'Giảm giá Hiện tại',
                
                // Gold Shop
                goldShop: 'GOLD SHOP - VẬT PHẨM ĐỘC QUYỀN',
                onlyGold: 'Chỉ mua bằng Thỏi Vàng!',
                diamondPack: 'Gói Kim Cương',
                megaCoins: 'Mega Coins',
                autoClicker: 'Auto Clicker',
                clickPowerBoost: 'Click Power',
                multiplierBoost: 'Bội số',
                speedBoost: 'Tăng tốc',
                ticketPack: 'Gói Vé',
                legendaryEgg: 'Trứng Huyền thoại',
                vipPassItem: 'VIP Pass',
                premiumPassItem: 'Premium Pass',
                rebirthBoost: 'Bội số Tái sinh',
                bestValue: 'GIÁ TRỊ TỐT NHẤT',
                permanent: 'Vĩnh viễn',
                
                // Pay Store
                payStore: 'CỬA HÀNG PREMIUM',
                goldBars: 'Thỏi Vàng',
                premiumCurrency: 'Cực kỳ hiếm! Chỉ có thể mua bằng tiền thật!',
                buySpecial: 'Mua vật phẩm đặc biệt chỉ với Thỏi Vàng',
                demoOnly: 'DEMO ONLY - Không thanh toán thật',
                starterPack: 'Gói Khởi đầu',
                valuePack: 'Gói Giá trị',
                goodDeal: 'Ưu đãi Tốt',
                greatValue: 'Giá trị Lớn',
                bestPack: 'Tốt Nhất',
                megaPack: 'Gói Khủng',
                ultimatePack: 'GÓI SIÊU CẤP',
                save30: 'TIẾT KIỆM 30%',
                hot: 'HOT',
                
                // Settings
                settings: 'Cài đặt',
                language: 'Ngôn ngữ',
                english: 'Tiếng Anh',
                vietnamese: 'Tiếng Việt',
                save: 'Lưu game',
                load: 'Tải game',
                deleteSave: 'Xóa save',
                export: 'Export để lưu game',
                import: 'Import để tải lại tiến trình',
                
                // Alerts
                notEnough: 'Không đủ',
                purchased: 'Đã mua',
                success: 'Thành công',
                error: 'Lỗi',
                confirm: 'Xác nhận',
                cancel: 'Hủy'
            }
        };
        
        function t(key) {
            return translations[currentLanguage][key] || key;
        }
        
        function setLanguage(lang) {
            currentLanguage = lang;
            localStorage.setItem('gameLanguage', lang);
            
            // Update button styles - with null checks
            const enBtn = document.getElementById('langEnBtn');
            const viBtn = document.getElementById('langViBtn');
            
            if (enBtn && viBtn) {
                if (lang === 'en') {
                    enBtn.style.background = 'linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)';
                    enBtn.style.borderColor = '#60a5fa';
                    viBtn.style.background = 'linear-gradient(135deg, #6b7280 0%, #4b5563 100%)';
                    viBtn.style.borderColor = '#9ca3af';
                } else {
                    viBtn.style.background = 'linear-gradient(135deg, #ef4444 0%, #dc2626 100%)';
                    viBtn.style.borderColor = '#f87171';
                    enBtn.style.background = 'linear-gradient(135deg, #6b7280 0%, #4b5563 100%)';
                    enBtn.style.borderColor = '#9ca3af';
                }
            }
            
            updateAllText();
        }
        
        function updateAllText() {
            // Update Settings Panel - with null checks
            const settingsTitle = document.getElementById('settingsTitle');
            const languageLabel = document.getElementById('languageLabel');
            const saveLoadLabel = document.getElementById('saveLoadLabel');
            const saveBtn = document.getElementById('saveBtn');
            const loadBtn = document.getElementById('loadBtn');
            const deleteBtn = document.getElementById('deleteBtn');
            const exportBtn = document.getElementById('exportBtn');
            const importBtn = document.getElementById('importBtn');
            const settingsButtonText = document.getElementById('settingsButtonText');
            const playTimeLabel = document.getElementById('playTimeLabel');
            const saveInfo = document.getElementById('saveInfo');
            
            if (settingsTitle) settingsTitle.textContent = t('settings');
            if (languageLabel) languageLabel.textContent = t('language');
            if (saveLoadLabel) saveLoadLabel.textContent = 'Save & Load';
            if (saveBtn) saveBtn.textContent = t('save');
            if (loadBtn) loadBtn.textContent = t('load');
            if (deleteBtn) deleteBtn.textContent = t('deleteSave');
            if (exportBtn) exportBtn.textContent = t('export');
            if (importBtn) importBtn.textContent = t('import');
            if (settingsButtonText) settingsButtonText.textContent = t('settings');
            if (playTimeLabel) playTimeLabel.textContent = currentLanguage === 'en' ? 'Time' : 'Thời gian';
            if (saveInfo) saveInfo.textContent = currentLanguage === 'en' 
                ? '💡 Export to save game, Import to load progress' 
                : '💡 Export để lưu game, Import để tải lại tiến trình';
            
            // Update header stats labels
            const statsDiv = document.querySelector('.stats');
            if (statsDiv) {
                statsDiv.innerHTML = `
                    ${t('clickPower')}: <span id="clickPower">${clickPower}</span> | 
                    ${t('auto')}: <span id="autoClickers">${autoClickers}</span>/s | 
                    ${t('multiplier')}: x<span id="multiplier">${multiplier}</span> |
                    ${t('cooldown')}: <span id="clickCooldown">${clickCooldown.toFixed(2)}</span>s | 
                    ${t('rebirth')}: x<span id="rebirthMultiplierDisplay">${rebirthMultiplier.toFixed(2)}</span> | 
                    ${t('petMulti')}: x<span id="petMultiplierDisplay">${getPetMultiplier().toFixed(2)}</span> | 
                    ${t('discount')}: <span id="discountDisplay">${shopDiscount}</span>%
                `;
            }
            
            // Update cookie text
            const cookieBtn = document.querySelector('.cookie');
            if (cookieBtn) {
                const clickText = cookieBtn.querySelector('div:last-child');
                if (clickText) clickText.textContent = t('clickMe');
            }
            
            // Update section titles
            const sectionTitles = document.querySelectorAll('.section-title');
            sectionTitles.forEach((title) => {
                const text = title.textContent.trim();
                if (text.includes('Shop') || text.includes('Cửa hàng')) {
                    title.textContent = '🛒 ' + t('shop');
                } else if (text.includes('Rebirth') || text.includes('Tái sinh')) {
                    title.textContent = '🔄 ' + t('rebirthPanel');
                } else if (text.includes('Game Pass')) {
                    title.textContent = '🎫 ' + t('gamePassPanel');
                } else if (text.includes('Inventory') || text.includes('Túi')) {
                    title.textContent = '🎒 ' + t('inventory');
                } else if (text.includes('Pets') || text.includes('Thú') || text.includes('Pet System')) {
                    title.textContent = '🐾 ' + t('petsPanel');
                } else if (text.includes('Egg') || text.includes('Trứng')) {
                    title.textContent = '🥚 ' + t('eggShop');
                } else if (text.includes('Weather') || text.includes('Thời tiết')) {
                    title.textContent = '🌦️ ' + t('weatherPanel');
                } else if (text.includes('Kéo Búa Bao') || text.includes('Rock Paper')) {
                    title.textContent = '🎮 ' + t('miniGameRPS');
                } else if (text.includes('Vòng Quay') || text.includes('Lucky Wheel')) {
                    title.textContent = '🎡 ' + t('wheelGame');
                } else if (text.includes('GOLD SHOP') || text.includes('VẬT PHẨM')) {
                    title.textContent = '🏆 ' + t('goldShop');
                } else if (text.includes('PREMIUM') || text.includes('CỬA HÀNG')) {
                    title.textContent = '💰 ' + t('payStore');
                } else if (text.includes('Potion') || text.includes('Thuốc')) {
                    title.textContent = '🧪 ' + t('potionShop');
                } else if (text.includes('Discount') || text.includes('Giảm Giá')) {
                    title.textContent = '🎫 ' + t('discountShop');
                }
            });
            
            // Update buttons with class "buy-button"
            const buyButtons = document.querySelectorAll('.buy-button');
            buyButtons.forEach(btn => {
                if (btn.textContent.includes('Mua') || btn.textContent.includes('Buy')) {
                    btn.textContent = '💰 ' + t('buy');
                }
            });
            
            updateDisplay();
            updateWeatherDisplay();
            
            // Re-render will handle owned/remaining text
        }

        // Console protection
        (function() {
            const devtools = /./;
            devtools.toString = function() {
                this.opened = true;
            };
            const checkDevTools = setInterval(function() {
                if (devtools.opened) {
                    console.clear();
                    devtools.opened = false;
                }
            }, 1000);

            // Disable right-click
            document.addEventListener('contextmenu', e => e.preventDefault());

            // Disable common shortcuts
            document.addEventListener('keydown', e => {
                // F12, Ctrl+Shift+I, Ctrl+Shift+J, Ctrl+U
                if (e.keyCode === 123 || 
                    (e.ctrlKey && e.shiftKey && (e.keyCode === 73 || e.keyCode === 74)) ||
                    (e.ctrlKey && e.keyCode === 85)) {
                    e.preventDefault();
                    return false;
                }
            });

            // Protect variables
            Object.defineProperty(window, 'goldBars', {
                get: function() { return goldBars; },
                set: function(val) {
                    if (!isAdmin) {
                        console.warn('⚠️ Cheat detection: Attempting to modify goldBars');
                        return;
                    }
                    goldBars = val;
                }
            });
        })();

        // SERVER-SIDE CODE VALIDATION (Codes NOT stored in client)
        // In production: Codes stored on server database
        // Client only validates via API call
        
        let goldCodes = {}; // Empty - codes verified server-side only
        
        // Simulated server API endpoint
        const SERVER_API = {
            validateCode: async function(code) {
                // In production: This would be a real API call
                // fetch('https://api.yourgame.com/validate-code', {
                //     method: 'POST',
                //     body: JSON.stringify({ code }),
                //     headers: { 'Content-Type': 'application/json' }
                // })
                
                // SIMULATION: Server has the codes, client doesn't
                return new Promise((resolve) => {
                    setTimeout(() => {
                        // Server-side validation logic (hidden from client)
                        const serverCodes = this._getServerCodes();
                        const codeData = serverCodes[code];
                        
                        if (!codeData) {
                            resolve({ success: false, error: 'INVALID_CODE' });
                        } else if (codeData.used) {
                            resolve({ success: false, error: 'CODE_USED' });
                        } else {
                            resolve({ 
                                success: true, 
                                amount: codeData.amount,
                                price: codeData.price
                            });
                        }
                    }, 500); // Simulate network delay
                });
            },
            
            markCodeUsed: async function(code) {
                return new Promise((resolve) => {
                    setTimeout(() => {
                        const serverCodes = this._getServerCodes();
                        if (serverCodes[code]) {
                            serverCodes[code].used = true;
                        }
                        resolve({ success: true });
                    }, 300);
                });
            },
            
            // Private server storage (in production: database)
            _serverStorage: null,
            _getServerCodes: function() {
                if (!this._serverStorage) {
                    // Codes stored ONLY on server (simulated)
                    this._serverStorage = this._decrypt();
                }
                return this._serverStorage;
            },
            
            // Heavy encryption (still decodable but much harder)
            _decrypt: function() {
                // In production: Codes stored in encrypted database
                // This is just simulation - real codes would NEVER be in client
                const e = (s) => atob(s);
                const d = [
                    [e('R09MRDE5QQ=='),19,0.50],[e('R09MRDE5Qg=='),19,0.50],
                    [e('R09MRDU5QQ=='),59,1.00],[e('R09MRDU5Qg=='),59,1.00],[e('R09MRDU5Qw=='),59,1.00],
                    [e('R09MRDE5OUE='),199,1.99],[e('R09MRDE5OUI='),199,1.99],
                    [e('R09MRDU5OUE='),599,3.00],[e('R09MRDU5OUI='),599,3.00],[e('R09MRDU5OUM='),599,3.00],
                    [e('R09MRDE5OTlB'),1999,5.00],[e('R09MRDE5OTlC'),1999,5.00],
                    [e('R09MRDE5OTlD'),1999,5.00],[e('R09MRDE5OTlE'),1999,5.00],
                    [e('R09MRDI5OTlB'),2999,5.00],[e('R09MRDI5OTlC'),2999,5.00],
                    [e('R09MRDU5OTlB'),5999,6.99],[e('R09MRDU5OTlC'),5999,6.99],
                    [e('R09MRDU5OTlD'),5999,6.99],[e('R09MRDU5OTlE'),5999,6.99]
                ];
                const codes = {};
                d.forEach(([c,a,p]) => {
                    codes[c] = {amount:a,price:p,used:false};
                });
                return codes;
            }
        };
        let pets = [];
        let ownedPets = {};
        let equippedPets = []; // Mảng chứa tối đa 5 pets đang được trang bị
        const MAX_EQUIPPED_PETS = 5;

        // Wheel Game
        let isSpinning = false;
        const wheelPrizes = [
            { name: '100 Coins', value: 100, type: 'coins', chance: 30, icon: '💰' },
            { name: '500 Coins', value: 500, type: 'coins', chance: 25, icon: '💰' },
            { name: '1K Coins', value: 1000, type: 'coins', chance: 20, icon: '💰' },
            { name: '5K Coins', value: 5000, type: 'coins', chance: 10, icon: '💰' },
            { name: '10 Diamonds', value: 10, type: 'diamonds', chance: 8, icon: '💎' },
            { name: '25 Diamonds', value: 25, type: 'diamonds', chance: 5, icon: '💎' },
            { name: '50 Diamonds', value: 50, type: 'diamonds', chance: 1, icon: '💎' },
            { name: '1 Pet Random', value: 1, type: 'pet', chance: 1, icon: '🐾' }
        ];

        // Egg data
        const eggShop = [
            {
                id: 1,
                name: 'Common Egg',
                icon: '🥚',
                price: 10,
                pets: [
                    { name: 'Bunny', icon: '🐰', chance: 33.33, multiplier: 1.5 },
                    { name: 'Dog', icon: '🐕', chance: 33.33, multiplier: 1.5 },
                    { name: 'Golden Lab', icon: '🦮', chance: 33.33, multiplier: 2 }
                ]
            },
            {
                id: 2,
                name: 'Uncommon Egg',
                icon: '🥚',
                price: 50,
                pets: [
                    { name: 'Black Bunny', icon: '🐇', chance: 25, multiplier: 2 },
                    { name: 'Cat', icon: '🐈', chance: 25, multiplier: 2 },
                    { name: 'Chicken', icon: '🐔', chance: 25, multiplier: 2 },
                    { name: 'Deer', icon: '🦌', chance: 25, multiplier: 2.5 }
                ]
            },
            {
                id: 3,
                name: 'Rare Egg',
                icon: '🥚',
                price: 150,
                pets: [
                    { name: 'Orange Tabby', icon: '🐈‍⬛', chance: 33.33, multiplier: 3 },
                    { name: 'Spotted Deer', icon: '🦌', chance: 25, multiplier: 3 },
                    { name: 'Pig', icon: '🐷', chance: 16.67, multiplier: 4 },
                    { name: 'Rooster', icon: '🐓', chance: 16.67, multiplier: 4 },
                    { name: 'Monkey', icon: '🐒', chance: 8.33, multiplier: 5 }
                ]
            },
            {
                id: 4,
                name: 'Legendary Egg',
                icon: '🥚',
                price: 500,
                pets: [
                    { name: 'Cow', icon: '🐄', chance: 42.55, multiplier: 6 },
                    { name: 'Silver Monkey', icon: '🐵', chance: 42.55, multiplier: 6 },
                    { name: 'Sea Otter', icon: '🦦', chance: 10.64, multiplier: 8 },
                    { name: 'Polar Bear', icon: '🐻‍❄️', chance: 2.13, multiplier: 10 },
                    { name: 'Turtle', icon: '🐢', chance: 2.13, multiplier: 10 }
                ]
            },
            {
                id: 5,
                name: 'Mythical Egg',
                icon: '🥚',
                price: 1000,
                pets: [
                    { name: 'Grey Mouse', icon: '🐭', chance: 35.7, multiplier: 8 },
                    { name: 'Brown Mouse', icon: '🐭', chance: 26.8, multiplier: 9 },
                    { name: 'Squirrel', icon: '🐿️', chance: 26.8, multiplier: 9 },
                    { name: 'Red Giant Ant', icon: '🐜', chance: 8.9, multiplier: 12 },
                    { name: 'Red Fox', icon: '🦊', chance: 1.8, multiplier: 15 }
                ]
            },
            {
                id: 6,
                name: 'Bug Egg',
                icon: '🥚',
                price: 2000,
                pets: [
                    { name: 'Snail', icon: '🐌', chance: 40, multiplier: 10 },
                    { name: 'Giant Ant', icon: '🐜', chance: 30, multiplier: 12 },
                    { name: 'Caterpillar', icon: '🐛', chance: 25, multiplier: 14 },
                    { name: 'Praying Mantis', icon: '🦗', chance: 4, multiplier: 18 },
                    { name: 'Dragonfly', icon: '🦋', chance: 1, multiplier: 22 }
                ]
            },
            {
                id: 7,
                name: 'Night Egg',
                icon: '🌙',
                price: 5000,
                pets: [
                    { name: 'Hedgehog', icon: '🦔', chance: 47, multiplier: 12 },
                    { name: 'Mole', icon: '🦡', chance: 23.5, multiplier: 14 },
                    { name: 'Frog', icon: '🐸', chance: 17.63, multiplier: 16 },
                    { name: 'Echo Frog', icon: '🐸', chance: 8.23, multiplier: 20 },
                    { name: 'Night Owl', icon: '🦉', chance: 3.53, multiplier: 25 },
                    { name: 'Raccoon', icon: '🦝', chance: 0.12, multiplier: 30 }
                ]
            },
            {
                id: 8,
                name: 'Bee Egg',
                icon: '🐝',
                price: 10000,
                pets: [
                    { name: 'Bee', icon: '🐝', chance: 65, multiplier: 12 },
                    { name: 'Honey Bee', icon: '🐝', chance: 25, multiplier: 15 },
                    { name: 'Bear Bee', icon: '🐻', chance: 5, multiplier: 20 },
                    { name: 'Petal Bee', icon: '🌸', chance: 4, multiplier: 25 },
                    { name: 'Queen Bee', icon: '👑', chance: 1, multiplier: 30 }
                ]
            },
            {
                id: 9,
                name: 'Anti Bee Egg',
                icon: '🦟',
                price: 25000,
                pets: [
                    { name: 'Wasp', icon: '🦟', chance: 55, multiplier: 18 },
                    { name: 'Tarantula Hawk', icon: '🕷️', chance: 30, multiplier: 22 },
                    { name: 'Moth', icon: '🦋', chance: 13.75, multiplier: 28 },
                    { name: 'Butterfly', icon: '🦋', chance: 1, multiplier: 35 },
                    { name: 'Disco Bee', icon: '💎', chance: 0.25, multiplier: 40 }
                ]
            },
            {
                id: 10,
                name: 'Admin Egg',
                icon: '👑',
                price: 500000,
                pets: [
                    { name: "Admin's Dog", icon: '🐕‍🦺', chance: 50, multiplier: 20 },
                    { name: "Admin's Cat", icon: '😺', chance: 30, multiplier: 25 },
                    { name: 'Bird Admin', icon: '🦅', chance: 20, multiplier: 35 }
                ]
            },
            {
                id: 11,
                name: 'Hacker Egg',
                icon: '💻',
                price: 200000,
                pets: [
                    { name: 'Hacker Dog', icon: '🐕‍🦺', chance: 60, multiplier: 40 },
                    { name: 'Hacker Bunny', icon: '🐰', chance: 40, multiplier: 50 }
                ]
            },
            {
                id: 12,
                name: 'God Egg',
                icon: '⚜️',
                price: 10000000,
                pets: [
                    { name: "God's Pet", icon: '🌟', chance: 100, multiplier: 30 }
                ]
            }
        ];

        // ===== WEATHER SYSTEM =====
        let activeWeathers = [];
        let weatherTimers = {};
        let weatherIntervals = {};
        
        // ===== NUMBER FORMATTING =====
        function formatNumber(num) {
            if (num < 1000) return Math.floor(num).toString();
            
            const suffixes = [
                { value: 1e63, symbol: 'VG' },   // Vigintillion
                { value: 1e60, symbol: 'ND' },   // Novemdecillion
                { value: 1e57, symbol: 'OD' },   // Octodecillion
                { value: 1e54, symbol: 'SD' },   // Septendecillion
                { value: 1e51, symbol: 'SXD' },  // Sexdecillion
                { value: 1e48, symbol: 'QID' },  // Quindecillion
                { value: 1e45, symbol: 'QAD' },  // Quattuordecillion
                { value: 1e42, symbol: 'TD' },   // Tredecillion
                { value: 1e39, symbol: 'DD' },   // Duodecillion
                { value: 1e36, symbol: 'UD' },   // Undecillion
                { value: 1e33, symbol: 'DC' },   // Decillion
                { value: 1e30, symbol: 'NO' },   // Nonillion
                { value: 1e27, symbol: 'OC' },   // Octillion
                { value: 1e24, symbol: 'SP' },   // Septillion
                { value: 1e21, symbol: 'SX' },   // Sextillion
                { value: 1e18, symbol: 'QI' },   // Quintillion
                { value: 1e15, symbol: 'QA' },   // Quadrillion
                { value: 1e12, symbol: 'T' },    // Trillion
                { value: 1e9, symbol: 'B' },     // Billion
                { value: 1e6, symbol: 'M' },     // Million
                { value: 1e3, symbol: 'K' }      // Thousand
            ];
            
            for (let i = 0; i < suffixes.length; i++) {
                if (num >= suffixes[i].value) {
                    const shortened = num / suffixes[i].value;
                    return shortened.toFixed(2) + suffixes[i].symbol;
                }
            }
            
            return Math.floor(num).toLocaleString();
        }
        
        // Weather configuration
        const weatherConfig = {
            // TIER 1: COMMON WEATHERS (1-13)
            wind: {
                name: { en: '💨 Wind', vi: '💨 Gió' },
                effect: { en: 'Cooldown -0.3s', vi: 'Hồi chiêu -0.3s' },
                duration: 45,
                interval: 100,
                icon: '💨',
                class: 'wind'
            },
            cloud: {
                name: { en: '☁️ Cloud', vi: '☁️ Mây' },
                effect: { en: 'Shop Discount +3%', vi: 'Giảm giá +3%' },
                duration: 60,
                interval: 300,
                icon: '☁️',
                class: 'cloud'
            },
            rain: {
                name: { en: '🌧️ Rain', vi: '🌧️ Mưa' },
                effect: { en: '+2 Click Power', vi: '+2 Sức Click' },
                duration: 45,
                interval: 600,
                icon: '🌧️',
                class: 'rain'
            },
            night: {
                name: { en: '🌙 Night', vi: '🌙 Ban Đêm' },
                effect: { en: '+5 Click Power', vi: '+5 Sức Click' },
                duration: 30,
                interval: 1200,
                icon: '🌙',
                class: 'night'
            },
            moonlight: {
                name: { en: '✨ Moonlight', vi: '✨ Ánh Trăng' },
                effect: { en: 'x2 Click Power', vi: 'x2 Sức Click' },
                duration: 60,
                interval: 2400,
                icon: '✨',
                class: 'moonlight'
            },
            meteor: {
                name: { en: '☄️ Meteor Shower', vi: '☄️ Mưa Sao Băng' },
                effect: { en: 'x5 Click Power', vi: 'x5 Sức Click' },
                duration: 60,
                interval: 3600,
                icon: '☄️',
                class: 'meteor'
            },
            snow: {
                name: { en: '❄️ Snow', vi: '❄️ Tuyết' },
                effect: { en: '+3 Auto Clickers', vi: '+3 Auto' },
                duration: 40,
                interval: 800,
                icon: '❄️',
                class: 'snow'
            },
            fog: {
                name: { en: '🌫️ Fog', vi: '🌫️ Sương Mù' },
                effect: { en: '+1 Multiplier', vi: '+1 Nhân' },
                duration: 50,
                interval: 900,
                icon: '🌫️',
                class: 'fog'
            },
            breeze: {
                name: { en: '🍃 Breeze', vi: '🍃 Gió Nhẹ' },
                effect: { en: '+10 Auto Clickers', vi: '+10 Auto' },
                duration: 55,
                interval: 1000,
                icon: '🍃',
                class: 'breeze'
            },
            drizzle: {
                name: { en: '🌦️ Drizzle', vi: '🌦️ Mưa Phùn' },
                effect: { en: '+8 Click Power', vi: '+8 Sức Click' },
                duration: 45,
                interval: 1100,
                icon: '🌦️',
                class: 'drizzle'
            },
            thunder: {
                name: { en: '⚡ Thunder', vi: '⚡ Sấm' },
                effect: { en: 'x3 Click Power', vi: 'x3 Sức Click' },
                duration: 30,
                interval: 1500,
                icon: '⚡',
                class: 'thunder'
            },
            sunrise: {
                name: { en: '🌅 Sunrise', vi: '🌅 Bình Minh' },
                effect: { en: '+15 Click Power', vi: '+15 Sức Click' },
                duration: 60,
                interval: 1800,
                icon: '🌅',
                class: 'sunrise'
            },
            sunset: {
                name: { en: '🌇 Sunset', vi: '🌇 Hoàng Hôn' },
                effect: { en: '+12 Auto Clickers', vi: '+12 Auto' },
                duration: 50,
                interval: 2000,
                icon: '🌇',
                class: 'sunset'
            },

            // TIER 2: UNCOMMON WEATHERS (14-26)
            storm: {
                name: { en: '🌩️ Storm', vi: '🌩️ Bão' },
                effect: { en: 'x4 Click Power', vi: 'x4 Sức Click' },
                duration: 45,
                interval: 2200,
                icon: '🌩️',
                class: 'storm'
            },
            blizzard: {
                name: { en: '🌨️ Blizzard', vi: '🌨️ Bão Tuyết' },
                effect: { en: '+20 Auto Clickers', vi: '+20 Auto' },
                duration: 40,
                interval: 2500,
                icon: '🌨️',
                class: 'blizzard'
            },
            hail: {
                name: { en: '🧊 Hail', vi: '🧊 Mưa Đá' },
                effect: { en: '+25 Click Power', vi: '+25 Sức Click' },
                duration: 35,
                interval: 2800,
                icon: '🧊',
                class: 'hail'
            },
            tornado: {
                name: { en: '🌪️ Tornado', vi: '🌪️ Lốc Xoáy' },
                effect: { en: 'x6 Click Power', vi: 'x6 Sức Click' },
                duration: 30,
                interval: 3200,
                icon: '🌪️',
                class: 'tornado'
            },
            rainbow: {
                name: { en: '🌈 Rainbow', vi: '🌈 Cầu Vồng' },
                effect: { en: '+2 Multiplier', vi: '+2 Nhân' },
                duration: 60,
                interval: 3500,
                icon: '🌈',
                class: 'rainbow'
            },
            aurora: {
                name: { en: '🌌 Aurora', vi: '🌌 Cực Quang' },
                effect: { en: 'x7 Click Power', vi: 'x7 Sức Click' },
                duration: 70,
                interval: 4000,
                icon: '🌌',
                class: 'aurora'
            },
            eclipse: {
                name: { en: '🌑 Eclipse', vi: '🌑 Nhật Thực' },
                effect: { en: 'x8 Click Power', vi: 'x8 Sức Click' },
                duration: 20,
                interval: 4500,
                icon: '🌑',
                class: 'eclipse'
            },
            comet: {
                name: { en: '☄️ Comet', vi: '☄️ Sao Chổi' },
                effect: { en: '+50 Click Power', vi: '+50 Sức Click' },
                duration: 40,
                interval: 5000,
                icon: '☄️',
                class: 'comet'
            },
            volcano: {
                name: { en: '🌋 Volcano', vi: '🌋 Núi Lửa' },
                effect: { en: 'x10 Click Power', vi: 'x10 Sức Click' },
                duration: 50,
                interval: 5500,
                icon: '🌋',
                class: 'volcano'
            },
            earthquake: {
                name: { en: '🌍 Earthquake', vi: '🌍 Động Đất' },
                effect: { en: '+30 Auto Clickers', vi: '+30 Auto' },
                duration: 25,
                interval: 6000,
                icon: '🌍',
                class: 'earthquake'
            },
            tsunami: {
                name: { en: '🌊 Tsunami', vi: '🌊 Sóng Thần' },
                effect: { en: 'x12 Click Power', vi: 'x12 Sức Click' },
                duration: 35,
                interval: 6500,
                icon: '🌊',
                class: 'tsunami'
            },
            wildfire: {
                name: { en: '🔥 Wildfire', vi: '🔥 Cháy Rừng' },
                effect: { en: '+100 Click Power', vi: '+100 Sức Click' },
                duration: 30,
                interval: 7000,
                icon: '🔥',
                class: 'wildfire'
            },
            sandstorm: {
                name: { en: '🏜️ Sandstorm', vi: '🏜️ Bão Cát' },
                effect: { en: '+40 Auto Clickers', vi: '+40 Auto' },
                duration: 40,
                interval: 7500,
                icon: '🏜️',
                class: 'sandstorm'
            },

            // TIER 3: RARE WEATHERS (27-38)
            blackhole: {
                name: { en: '🕳️ Black Hole', vi: '🕳️ Lỗ Đen' },
                effect: { en: 'x15 Click Power', vi: 'x15 Sức Click' },
                duration: 60,
                interval: 8000,
                icon: '🕳️',
                class: 'blackhole'
            },
            supernova: {
                name: { en: '💥 Supernova', vi: '💥 Siêu Tân Tinh' },
                effect: { en: 'x20 Click Power', vi: 'x20 Sức Click' },
                duration: 45,
                interval: 9000,
                icon: '💥',
                class: 'supernova'
            },
            timewarp: {
                name: { en: '⏰ Time Warp', vi: '⏰ Vặn Thời Gian' },
                effect: { en: 'Cooldown -0.5s', vi: 'Hồi chiêu -0.5s' },
                duration: 50,
                interval: 10000,
                icon: '⏰',
                class: 'timewarp'
            },
            gravity: {
                name: { en: '🌐 Zero Gravity', vi: '🌐 Không Trọng Lực' },
                effect: { en: '+3 Multiplier', vi: '+3 Nhân' },
                duration: 70,
                interval: 11000,
                icon: '🌐',
                class: 'gravity'
            },
            plasma: {
                name: { en: '⚛️ Plasma Storm', vi: '⚛️ Bão Plasma' },
                effect: { en: 'x25 Click Power', vi: 'x25 Sức Click' },
                duration: 40,
                interval: 12000,
                icon: '⚛️',
                class: 'plasma'
            },
            quantum: {
                name: { en: '🔬 Quantum Flux', vi: '🔬 Lượng Tử' },
                effect: { en: '+5 Multiplier', vi: '+5 Nhân' },
                duration: 60,
                interval: 13000,
                icon: '🔬',
                class: 'quantum'
            },
            dimension: {
                name: { en: '🌀 Dimension Rift', vi: '🌀 Khe Chiều' },
                effect: { en: 'x30 Click Power', vi: 'x30 Sức Click' },
                duration: 55,
                interval: 14000,
                icon: '🌀',
                class: 'dimension'
            },
            cosmic: {
                name: { en: '✨ Cosmic Dust', vi: '✨ Bụi Vũ Trụ' },
                effect: { en: '+200 Click Power', vi: '+200 Sức Click' },
                duration: 50,
                interval: 15000,
                icon: '✨',
                class: 'cosmic'
            },
            nebula: {
                name: { en: '🌌 Nebula', vi: '🌌 Tinh Vân' },
                effect: { en: 'x35 Click Power', vi: 'x35 Sức Click' },
                duration: 65,
                interval: 16000,
                icon: '🌌',
                class: 'nebula'
            },
            pulsar: {
                name: { en: '💫 Pulsar', vi: '💫 Sao Xung' },
                effect: { en: '+100 Auto Clickers', vi: '+100 Auto' },
                duration: 45,
                interval: 17000,
                icon: '💫',
                class: 'pulsar'
            },
            stardust: {
                name: { en: '⭐ Stardust', vi: '⭐ Bụi Sao' },
                effect: { en: 'x40 Click Power', vi: 'x40 Sức Click' },
                duration: 70,
                interval: 18000,
                icon: '⭐',
                class: 'stardust'
            },
            galaxy: {
                name: { en: '🌟 Galaxy Burst', vi: '🌟 Nổ Ngân Hà' },
                effect: { en: 'x50 Click Power', vi: 'x50 Sức Click' },
                duration: 80,
                interval: 20000,
                icon: '🌟',
                class: 'galaxy'
            },

            // TIER 4: EPIC WEATHERS (39-44)
            divine: {
                name: { en: '🙏 Divine Light', vi: '🙏 Ánh Sáng Thần' },
                effect: { en: 'x75 Click Power', vi: 'x75 Sức Click' },
                duration: 90,
                interval: 22000,
                icon: '🙏',
                class: 'divine'
            },
            celestial: {
                name: { en: '👼 Celestial Blessing', vi: '👼 Phước Lành' },
                effect: { en: 'x100 Click Power', vi: 'x100 Sức Click' },
                duration: 100,
                interval: 25000,
                icon: '👼',
                class: 'celestial'
            },
            mythical: {
                name: { en: '🐉 Mythical Dragon', vi: '🐉 Rồng Thần' },
                effect: { en: 'x150 Click Power', vi: 'x150 Sức Click' },
                duration: 120,
                interval: 28000,
                icon: '🐉',
                class: 'mythical'
            },
            phoenix: {
                name: { en: '🔥 Phoenix Rise', vi: '🔥 Phượng Hoàng' },
                effect: { en: 'x200 Click Power', vi: 'x200 Sức Click' },
                duration: 90,
                interval: 30000,
                icon: '🔥',
                class: 'phoenix'
            },
            unicorn: {
                name: { en: '🦄 Unicorn Magic', vi: '🦄 Kỳ Lân' },
                effect: { en: '+10 Multiplier', vi: '+10 Nhân' },
                duration: 150,
                interval: 32000,
                icon: '🦄',
                class: 'unicorn'
            },
            kraken: {
                name: { en: '🐙 Kraken Fury', vi: '🐙 Kraken' },
                effect: { en: 'x250 Click Power', vi: 'x250 Sức Click' },
                duration: 100,
                interval: 35000,
                icon: '🐙',
                class: 'kraken'
            },

            // TIER 5: LEGENDARY WEATHERS (45-50)
            infinity: {
                name: { en: '∞ Infinity', vi: '∞ Vô Cực' },
                effect: { en: 'x500 Click Power', vi: 'x500 Sức Click' },
                duration: 180,
                interval: 40000,
                icon: '∞',
                class: 'infinity'
            },
            eternity: {
                name: { en: '⏳ Eternity', vi: '⏳ Vĩnh Cửu' },
                effect: { en: '+20 Multiplier', vi: '+20 Nhân' },
                duration: 200,
                interval: 45000,
                icon: '⏳',
                class: 'eternity'
            },
            omnipotence: {
                name: { en: '👁️ Omnipotence', vi: '👁️ Toàn Năng' },
                effect: { en: 'x1000 Click Power', vi: 'x1000 Sức Click' },
                duration: 150,
                interval: 50000,
                icon: '👁️',
                class: 'omnipotence'
            },
            godmode: {
                name: { en: '⚡ God Mode', vi: '⚡ Chế Độ Thần' },
                effect: { en: 'x2000 Click Power', vi: 'x2000 Sức Click' },
                duration: 120,
                interval: 60000,
                icon: '⚡',
                class: 'godmode'
            },
            transcendence: {
                name: { en: '🌠 Transcendence', vi: '🌠 Siêu Việt' },
                effect: { en: 'x5000 Click Power', vi: 'x5000 Sức Click' },
                duration: 90,
                interval: 80000,
                icon: '🌠',
                class: 'transcendence'
            },
            ascension: {
                name: { en: '🚀 Ascension', vi: '🚀 Thăng Thiên' },
                effect: { en: 'x10000 Click Power', vi: 'x10000 Sức Click' },
                duration: 60,
                interval: 100000,
                icon: '🚀',
                class: 'ascension'
            }
        };
        // Weather next spawn times
        let weatherNextSpawn = {
            wind: 100,
            cloud: 300,
            rain: 600,
            night: 1200,
            moonlight: 2400,
            meteor: 3600,
            snow: 800,
            acid: 10800,
            diamond: 14400,
            emerald: 18000,
            adminabuse: 36000,
            earthquake: 21600,
            thunderstorm: 28800,
            superstorm: 36000,
            winteraurora: 72000,
            shootingstars: 108000,
            permafrost: 144000,
            cyclone: 180000,
            dissonant: 360000,
            beestorm: 86400,
            tropicalrain: 1680,
            gentledrizzle: 1860,
            ownerabuse: 1800000,
            rainbowrain: 2700,
            goldrain: 3600,
            silverrain: 3000,
            cosmicrain: 7200,
            secretrain: 10800,
            whitehole: 14400,
            supernova: 18000,
            nancorenova: 21600,
            corruptzenaura: 28800,
            fullmoon: 43200,
            safaridusk: 54000,
            yetinight: 64800,
            silentnight: 72000,
            boomboxparty: 86400,
            frozeniceking: 108000,
            radioactiverain: 144000,
            oilrain: 180000,
            sandstrike: 360000
        };

        const shopItems = [
            {
                id: 1,
                name: '+1 Click Power',
                description: 'Tăng 1 coin mỗi click',
                icon: '⚡',
                basePrice: 10,
                currentPrice: 10,
                owned: 0,
                effect: () => clickPower++
            },
            {
                id: 2,
                name: 'Auto Clicker',
                description: '+1 coin mỗi giây',
                icon: '🤖',
                basePrice: 100,
                currentPrice: 100,
                owned: 0,
                effect: () => autoClickers++
            },
            {
                id: 3,
                name: 'Faster Click',
                description: 'Giảm 0.05s thời gian chờ click',
                icon: '⚡',
                basePrice: 500,
                currentPrice: 500,
                owned: 0,
                effect: () => {
                    clickCooldown = Math.max(0.05, clickCooldown - 0.05);
                }
            },
            {
                id: 4,
                name: 'Super Click',
                description: '+5 click power',
                icon: '⭐',
                basePrice: 1000,
                currentPrice: 1000,
                owned: 0,
                effect: () => clickPower += 5
            },
            {
                id: 5,
                name: 'Mega Clicker',
                description: '+10 coins mỗi giây',
                icon: '✨',
                basePrice: 3000,
                currentPrice: 3000,
                owned: 0,
                effect: () => autoClickers += 10
            },
            {
                id: 6,
                name: '2x Multiplier',
                description: 'Nhân đôi tất cả thu nhập',
                icon: '👑',
                basePrice: 15000,
                currentPrice: 15000,
                owned: 0,
                effect: () => multiplier *= 2
            },
            {
                id: 7,
                name: 'Ultra Click',
                description: '+20 click power',
                icon: '💎',
                basePrice: 10000,
                currentPrice: 10000,
                owned: 0,
                effect: () => clickPower += 20
            },
            {
                id: 8,
                name: 'Factory',
                description: '+50 coins mỗi giây',
                icon: '🏭',
                basePrice: 30000,
                currentPrice: 30000,
                owned: 0,
                effect: () => autoClickers += 50
            },
            {
                id: 9,
                name: 'Golden Touch',
                description: '+100 click power',
                icon: '🌟',
                basePrice: 75000,
                currentPrice: 75000,
                owned: 0,
                effect: () => clickPower += 100
            },
            {
                id: 10,
                name: 'Time Warp',
                description: 'Giảm 0.03s cooldown',
                icon: '⏰',
                basePrice: 120000,
                currentPrice: 120000,
                owned: 0,
                effect: () => {
                    clickCooldown = Math.max(0.01, clickCooldown - 0.03);
                }
            },
            {
                id: 11,
                name: 'Robot Army',
                description: '+100 coins mỗi giây',
                icon: '🤖',
                basePrice: 200000,
                currentPrice: 200000,
                owned: 0,
                effect: () => autoClickers += 100
            },
            {
                id: 12,
                name: 'Diamond Finger',
                description: '+250 click power',
                icon: '💍',
                basePrice: 350000,
                currentPrice: 350000,
                owned: 0,
                effect: () => clickPower += 250
            },
            {
                id: 13,
                name: 'Money Printer',
                description: '+200 coins mỗi giây',
                icon: '🖨️',
                basePrice: 600000,
                currentPrice: 600000,
                owned: 0,
                effect: () => autoClickers += 200
            },
            {
                id: 14,
                name: 'Cosmic Power',
                description: '+400 click power',
                icon: '🌌',
                basePrice: 1200000,
                currentPrice: 1200000,
                owned: 0,
                effect: () => clickPower += 400
            },
            {
                id: 15,
                name: 'Quantum Clicker',
                description: '+500 coins mỗi giây',
                icon: '⚛️',
                basePrice: 2500000,
                currentPrice: 2500000,
                owned: 0,
                effect: () => autoClickers += 500
            },
            {
                id: 16,
                name: 'Infinity Stone',
                description: '+1000 click power',
                icon: '💠',
                basePrice: 6000000,
                currentPrice: 6000000,
                owned: 0,
                effect: () => clickPower += 1000
            },
            {
                id: 17,
                name: 'Universe Generator',
                description: '+1500 coins mỗi giây',
                icon: '🌠',
                basePrice: 25000000,
                currentPrice: 25000000,
                owned: 0,
                effect: () => autoClickers += 1500
            },
            {
                id: 18,
                name: 'The Divine',
                description: '5% giảm giá mọi vật phẩm',
                icon: '✨',
                basePrice: 50000000,
                currentPrice: 50000000,
                owned: 0,
                effect: () => {
                    shopDiscount += 5;
                }
            },
            {
                id: 19,
                name: 'The Primastic',
                description: '1.2% cơ hội hoàn tiền',
                icon: '💎',
                basePrice: 1000000000,
                currentPrice: 1000000000,
                owned: 0,
                effect: () => {}
            },
            {
                id: 20,
                name: 'The Transcendent',
                description: '0.8% cơ hội hoàn x10 tiền',
                icon: '🌟',
                basePrice: 2500000000,
                currentPrice: 2500000000,
                owned: 0,
                effect: () => {}
            },
            {
                id: 21,
                name: 'The God',
                description: '+1 giới hạn mua vật phẩm',
                icon: '⚜️',
                basePrice: 2500000000,
                currentPrice: 2500000000,
                owned: 0,
                effect: () => {
                    purchaseLimit++;
                }
            },
            {
                id: 22,
                name: 'Admin Power',
                description: '+50 Click Power',
                icon: '🔱',
                basePrice: 50000000000, // 50B
                currentPrice: 50000000000,
                owned: 0,
                effect: () => {
                    clickPower += 50;
                }
            },
            {
                id: 23,
                name: 'Owner Power',
                description: '+200 Click Power',
                icon: '👑',
                basePrice: 2000000000000000, // 2QA
                currentPrice: 2000000000000000,
                owned: 0,
                effect: () => {
                    clickPower += 200;
                }
            },
            {
                id: 24,
                name: '67 Power',
                description: '+670 Click Power',
                icon: '⚡',
                basePrice: 5000000000000000, // 5QA
                currentPrice: 5000000000000000,
                owned: 0,
                effect: () => {
                    clickPower += 670;
                }
            },
            {
                id: 25,
                name: '36 Power',
                description: '+3600 Click Power',
                icon: '💫',
                basePrice: 1000000000000000000, // 1QI
                currentPrice: 1000000000000000000,
                owned: 0,
                effect: () => {
                    clickPower += 3600;
                }
            },
            {
                id: 26,
                name: 'Nancore',
                description: '+10000 Click Power',
                icon: '⚛️',
                basePrice: 2000000000000000000000, // 2SX
                currentPrice: 2000000000000000000000,
                owned: 0,
                effect: () => {
                    clickPower += 10000;
                }
            },
            {
                id: 27,
                name: 'Quantum Leap',
                description: '+50000 Click Power',
                icon: '🔬',
                basePrice: 10000000000000000000000,
                currentPrice: 10000000000000000000000,
                owned: 0,
                effect: () => clickPower += 50000
            },
            {
                id: 28,
                name: 'Cosmic Factory',
                description: '+10000 Auto Clickers',
                icon: '🌌',
                basePrice: 50000000000000000000000,
                currentPrice: 50000000000000000000000,
                owned: 0,
                effect: () => autoClickers += 10000
            },
            {
                id: 29,
                name: 'Reality Bender',
                description: '+50 Multiplier',
                icon: '🌀',
                basePrice: 100000000000000000000000,
                currentPrice: 100000000000000000000000,
                owned: 0,
                effect: () => multiplier += 50
            },
            {
                id: 30,
                name: 'Divine Power',
                description: '+100000 Click Power',
                icon: '🙏',
                basePrice: 500000000000000000000000,
                currentPrice: 500000000000000000000000,
                owned: 0,
                effect: () => clickPower += 100000
            },
            {
                id: 31,
                name: 'The End',
                description: 'ULTIMATE POWER',
                icon: '🌌',
                basePrice: 999999999999999999999999999999999999,
                currentPrice: 999999999999999999999999999999999999,
                owned: 0,
                effect: () => {
                    clickPower += 999999999999;
                    autoClickers += 999999999;
                    multiplier += 99999;
                }
            },
            // ===== 50 NEW CREATIVE ITEMS =====
            // THEME 1: MAGICAL ITEMS (32-41)
            {
                id: 32,
                name: 'Magic Wand',
                description: '+1000 Click Power per wave',
                icon: '🪄',
                basePrice: 5000,
                currentPrice: 5000,
                owned: 0,
                effect: () => clickPower += 1000
            },
            {
                id: 33,
                name: 'Crystal Ball',
                description: '+500 Auto Clickers',
                icon: '🔮',
                basePrice: 15000,
                currentPrice: 15000,
                owned: 0,
                effect: () => autoClickers += 500
            },
            {
                id: 34,
                name: 'Wizard Hat',
                description: '+10 Multiplier bonus',
                icon: '🎩',
                basePrice: 50000,
                currentPrice: 50000,
                owned: 0,
                effect: () => multiplier += 10
            },
            {
                id: 35,
                name: 'Enchanted Staff',
                description: '+5000 Click Power',
                icon: '🧙',
                basePrice: 100000,
                currentPrice: 100000,
                owned: 0,
                effect: () => clickPower += 5000
            },
            {
                id: 36,
                name: 'Spell Book',
                description: '+2000 Auto Clickers',
                icon: '📖',
                basePrice: 250000,
                currentPrice: 250000,
                owned: 0,
                effect: () => autoClickers += 2000
            },
            {
                id: 37,
                name: 'Potion of Power',
                description: '+20 Multiplier',
                icon: '🧪',
                basePrice: 500000,
                currentPrice: 500000,
                owned: 0,
                effect: () => multiplier += 20
            },
            {
                id: 38,
                name: 'Magic Portal',
                description: '+10000 Click Power',
                icon: '🌀',
                basePrice: 1000000,
                currentPrice: 1000000,
                owned: 0,
                effect: () => clickPower += 10000
            },
            {
                id: 39,
                name: 'Mystic Orb',
                description: '+5000 Auto Clickers',
                icon: '🌐',
                basePrice: 2500000,
                currentPrice: 2500000,
                owned: 0,
                effect: () => autoClickers += 5000
            },
            {
                id: 40,
                name: 'Ancient Rune',
                description: '+50 Multiplier',
                icon: '🗿',
                basePrice: 5000000,
                currentPrice: 5000000,
                owned: 0,
                effect: () => multiplier += 50
            },
            {
                id: 41,
                name: 'Arcane Shield',
                description: '+25000 Click Power',
                icon: '🛡️',
                basePrice: 10000000,
                currentPrice: 10000000,
                owned: 0,
                effect: () => clickPower += 25000
            },
            // THEME 2: TECH ITEMS (42-51)
            {
                id: 42,
                name: 'Robot Arm',
                description: '+10000 Auto Clickers',
                icon: '🦾',
                basePrice: 25000000,
                currentPrice: 25000000,
                owned: 0,
                effect: () => autoClickers += 10000
            },
            {
                id: 43,
                name: 'AI Chip',
                description: '+100 Multiplier',
                icon: '🔧',
                basePrice: 50000000,
                currentPrice: 50000000,
                owned: 0,
                effect: () => multiplier += 100
            },
            {
                id: 44,
                name: 'Quantum Computer',
                description: '+50000 Click Power',
                icon: '💻',
                basePrice: 100000000,
                currentPrice: 100000000,
                owned: 0,
                effect: () => clickPower += 50000
            },
            {
                id: 45,
                name: 'Nano Bots',
                description: '+25000 Auto Clickers',
                icon: '🤖',
                basePrice: 250000000,
                currentPrice: 250000000,
                owned: 0,
                effect: () => autoClickers += 25000
            },
            {
                id: 46,
                name: 'Cybernetic Eye',
                description: '+200 Multiplier',
                icon: '👁️',
                basePrice: 500000000,
                currentPrice: 500000000,
                owned: 0,
                effect: () => multiplier += 200
            },
            {
                id: 47,
                name: 'Fusion Core',
                description: '+100000 Click Power',
                icon: '⚡',
                basePrice: 1000000000,
                currentPrice: 1000000000,
                owned: 0,
                effect: () => clickPower += 100000
            },
            {
                id: 48,
                name: 'Drone Army',
                description: '+50000 Auto Clickers',
                icon: '🚁',
                basePrice: 2500000000,
                currentPrice: 2500000000,
                owned: 0,
                effect: () => autoClickers += 50000
            },
            {
                id: 49,
                name: 'Hologram Tech',
                description: '+500 Multiplier',
                icon: '📱',
                basePrice: 5000000000,
                currentPrice: 5000000000,
                owned: 0,
                effect: () => multiplier += 500
            },
            {
                id: 50,
                name: 'Teleporter',
                description: '+250000 Click Power',
                icon: '🔀',
                basePrice: 10000000000,
                currentPrice: 10000000000,
                owned: 0,
                effect: () => clickPower += 250000
            },
            {
                id: 51,
                name: 'Mech Suit',
                description: '+100000 Auto Clickers',
                icon: '🤖',
                basePrice: 25000000000,
                currentPrice: 25000000000,
                owned: 0,
                effect: () => autoClickers += 100000
            },
            // THEME 3: SPACE ITEMS (52-61)
            {
                id: 52,
                name: 'Asteroid Mine',
                description: '+1000 Multiplier',
                icon: '☄️',
                basePrice: 50000000000,
                currentPrice: 50000000000,
                owned: 0,
                effect: () => multiplier += 1000
            },
            {
                id: 53,
                name: 'Satellite Array',
                description: '+500000 Click Power',
                icon: '🛰️',
                basePrice: 100000000000,
                currentPrice: 100000000000,
                owned: 0,
                effect: () => clickPower += 500000
            },
            {
                id: 54,
                name: 'Space Station',
                description: '+250000 Auto Clickers',
                icon: '🚀',
                basePrice: 250000000000,
                currentPrice: 250000000000,
                owned: 0,
                effect: () => autoClickers += 250000
            },
            {
                id: 55,
                name: 'Alien Tech',
                description: '+2000 Multiplier',
                icon: '👽',
                basePrice: 500000000000,
                currentPrice: 500000000000,
                owned: 0,
                effect: () => multiplier += 2000
            },
            {
                id: 56,
                name: 'Moon Base',
                description: '+1000000 Click Power',
                icon: '🌙',
                basePrice: 1000000000000,
                currentPrice: 1000000000000,
                owned: 0,
                effect: () => clickPower += 1000000
            },
            {
                id: 57,
                name: 'Mars Colony',
                description: '+500000 Auto Clickers',
                icon: '🔴',
                basePrice: 2500000000000,
                currentPrice: 2500000000000,
                owned: 0,
                effect: () => autoClickers += 500000
            },
            {
                id: 58,
                name: 'Star Forge',
                description: '+5000 Multiplier',
                icon: '⭐',
                basePrice: 5000000000000,
                currentPrice: 5000000000000,
                owned: 0,
                effect: () => multiplier += 5000
            },
            {
                id: 59,
                name: 'Solar Panel Grid',
                description: '+2500000 Click Power',
                icon: '☀️',
                basePrice: 10000000000000,
                currentPrice: 10000000000000,
                owned: 0,
                effect: () => clickPower += 2500000
            },
            {
                id: 60,
                name: 'Wormhole Generator',
                description: '+1000000 Auto Clickers',
                icon: '🌀',
                basePrice: 25000000000000,
                currentPrice: 25000000000000,
                owned: 0,
                effect: () => autoClickers += 1000000
            },
            {
                id: 61,
                name: 'Dyson Sphere',
                description: '+10000 Multiplier',
                icon: '🌟',
                basePrice: 50000000000000,
                currentPrice: 50000000000000,
                owned: 0,
                effect: () => multiplier += 10000
            },
            // THEME 4: MYTHICAL CREATURES (62-71)
            {
                id: 62,
                name: 'Dragon Egg',
                description: '+5000000 Click Power',
                icon: '🥚',
                basePrice: 100000000000000,
                currentPrice: 100000000000000,
                owned: 0,
                effect: () => clickPower += 5000000
            },
            {
                id: 63,
                name: 'Phoenix Feather',
                description: '+2500000 Auto Clickers',
                icon: '🪶',
                basePrice: 250000000000000,
                currentPrice: 250000000000000,
                owned: 0,
                effect: () => autoClickers += 2500000
            },
            {
                id: 64,
                name: 'Unicorn Horn',
                description: '+20000 Multiplier',
                icon: '🦄',
                basePrice: 500000000000000,
                currentPrice: 500000000000000,
                owned: 0,
                effect: () => multiplier += 20000
            },
            {
                id: 65,
                name: 'Kraken Tentacle',
                description: '+10000000 Click Power',
                icon: '🐙',
                basePrice: 1000000000000000,
                currentPrice: 1000000000000000,
                owned: 0,
                effect: () => clickPower += 10000000
            },
            {
                id: 66,
                name: 'Griffin Wing',
                description: '+5000000 Auto Clickers',
                icon: '🦅',
                basePrice: 2500000000000000,
                currentPrice: 2500000000000000,
                owned: 0,
                effect: () => autoClickers += 5000000
            },
            {
                id: 67,
                name: 'Hydra Scale',
                description: '+50000 Multiplier',
                icon: '🐍',
                basePrice: 5000000000000000,
                currentPrice: 5000000000000000,
                owned: 0,
                effect: () => multiplier += 50000
            },
            {
                id: 68,
                name: 'Cerberus Collar',
                description: '+25000000 Click Power',
                icon: '🐕',
                basePrice: 10000000000000000,
                currentPrice: 10000000000000000,
                owned: 0,
                effect: () => clickPower += 25000000
            },
            {
                id: 69,
                name: 'Pegasus Saddle',
                description: '+10000000 Auto Clickers',
                icon: '🐴',
                basePrice: 25000000000000000,
                currentPrice: 25000000000000000,
                owned: 0,
                effect: () => autoClickers += 10000000
            },
            {
                id: 70,
                name: 'Basilisk Eye',
                description: '+100000 Multiplier',
                icon: '👁️',
                basePrice: 50000000000000000,
                currentPrice: 50000000000000000,
                owned: 0,
                effect: () => multiplier += 100000
            },
            {
                id: 71,
                name: 'Leviathan Heart',
                description: '+50000000 Click Power',
                icon: '🐋',
                basePrice: 100000000000000000,
                currentPrice: 100000000000000000,
                owned: 0,
                effect: () => clickPower += 50000000
            },
            // THEME 5: LEGENDARY ARTIFACTS (72-81)
            {
                id: 72,
                name: 'Excalibur',
                description: '+100000000 Click Power',
                icon: '⚔️',
                basePrice: 250000000000000000,
                currentPrice: 250000000000000000,
                owned: 0,
                effect: () => clickPower += 100000000
            },
            {
                id: 73,
                name: 'Mjolnir',
                description: '+50000000 Auto Clickers',
                icon: '🔨',
                basePrice: 500000000000000000,
                currentPrice: 500000000000000000,
                owned: 0,
                effect: () => autoClickers += 50000000
            },
            {
                id: 74,
                name: 'Holy Grail',
                description: '+500000 Multiplier',
                icon: '🏆',
                basePrice: 1000000000000000000,
                currentPrice: 1000000000000000000,
                owned: 0,
                effect: () => multiplier += 500000
            },
            {
                id: 75,
                name: 'Pandora Box',
                description: '+250000000 Click Power',
                icon: '📦',
                basePrice: 2500000000000000000,
                currentPrice: 2500000000000000000,
                owned: 0,
                effect: () => clickPower += 250000000
            },
            {
                id: 76,
                name: 'Ark of Covenant',
                description: '+100000000 Auto Clickers',
                icon: '📜',
                basePrice: 5000000000000000000,
                currentPrice: 5000000000000000000,
                owned: 0,
                effect: () => autoClickers += 100000000
            },
            {
                id: 77,
                name: 'Philosopher Stone',
                description: '+1000000 Multiplier',
                icon: '💎',
                basePrice: 10000000000000000000,
                currentPrice: 10000000000000000000,
                owned: 0,
                effect: () => multiplier += 1000000
            },
            {
                id: 78,
                name: 'Crown of Kings',
                description: '+500000000 Click Power',
                icon: '👑',
                basePrice: 25000000000000000000,
                currentPrice: 25000000000000000000,
                owned: 0,
                effect: () => clickPower += 500000000
            },
            {
                id: 79,
                name: 'Trident of Poseidon',
                description: '+250000000 Auto Clickers',
                icon: '🔱',
                basePrice: 50000000000000000000,
                currentPrice: 50000000000000000000,
                owned: 0,
                effect: () => autoClickers += 250000000
            },
            {
                id: 80,
                name: 'Zeus Lightning Bolt',
                description: '+5000000 Multiplier',
                icon: '⚡',
                basePrice: 100000000000000000000,
                currentPrice: 100000000000000000000,
                owned: 0,
                effect: () => multiplier += 5000000
            },
            {
                id: 81,
                name: 'Infinity Gauntlet',
                description: 'ALL STATS x1000000',
                icon: '🧤',
                basePrice: 999999999999999999999999999999999999,
                currentPrice: 999999999999999999999999999999999999,
                owned: 0,
                effect: () => {
                    clickPower *= 1000000;
                    autoClickers *= 1000000;
                    multiplier *= 1000000;
                }
            },
            
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            // TIER: HARDCORE (15 items) - 1 Sextillion to 10 Sextillion
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            {
                id: 82, name: 'Death Scythe', description: '+1B Click Power', icon: '💀',
                basePrice: 1e21, currentPrice: 1e21, owned: 0,
                effect: () => clickPower += 1000000000
            },
            {
                id: 83, name: 'Hellfire Sword', description: '+5B Auto Clickers', icon: '🔥',
                basePrice: 1.5e21, currentPrice: 1.5e21, owned: 0,
                effect: () => autoClickers += 5000000000
            },
            {
                id: 84, name: 'Demon Wings', description: '+100M Multiplier', icon: '🦇',
                basePrice: 2e21, currentPrice: 2e21, owned: 0,
                effect: () => multiplier += 100000000
            },
            {
                id: 85, name: 'Skull Crusher', description: '+10B Click Power', icon: '☠️',
                basePrice: 2.5e21, currentPrice: 2.5e21, owned: 0,
                effect: () => clickPower += 10000000000
            },
            {
                id: 86, name: 'Blood Moon Orb', description: '+20B Auto Clickers', icon: '🌑',
                basePrice: 3e21, currentPrice: 3e21, owned: 0,
                effect: () => autoClickers += 20000000000
            },
            {
                id: 87, name: 'Reaper Blade', description: '+500M Multiplier', icon: '⚔️',
                basePrice: 3.5e21, currentPrice: 3.5e21, owned: 0,
                effect: () => multiplier += 500000000
            },
            {
                id: 88, name: 'Inferno Chain', description: '+50B Click Power', icon: '⛓️',
                basePrice: 4e21, currentPrice: 4e21, owned: 0,
                effect: () => clickPower += 50000000000
            },
            {
                id: 89, name: 'Void Essence', description: '+100B Auto Clickers', icon: '🕳️',
                basePrice: 4.5e21, currentPrice: 4.5e21, owned: 0,
                effect: () => autoClickers += 100000000000
            },
            {
                id: 90, name: 'Chaos Orb', description: '+1B Multiplier', icon: '💥',
                basePrice: 5e21, currentPrice: 5e21, owned: 0,
                effect: () => multiplier += 1000000000
            },
            {
                id: 91, name: 'Dark Matter Core', description: '+200B Click Power', icon: '⚫',
                basePrice: 6e21, currentPrice: 6e21, owned: 0,
                effect: () => clickPower += 200000000000
            },
            {
                id: 92, name: 'Nightmare Fuel', description: '+500B Auto Clickers', icon: '👻',
                basePrice: 7e21, currentPrice: 7e21, owned: 0,
                effect: () => autoClickers += 500000000000
            },
            {
                id: 93, name: 'Abyssal Shard', description: '+5B Multiplier', icon: '🔮',
                basePrice: 8e21, currentPrice: 8e21, owned: 0,
                effect: () => multiplier += 5000000000
            },
            {
                id: 94, name: 'Bone Throne', description: '+1T Click Power', icon: '🦴',
                basePrice: 9e21, currentPrice: 9e21, owned: 0,
                effect: () => clickPower += 1000000000000
            },
            {
                id: 95, name: 'Eternal Darkness', description: '+2T Auto Clickers', icon: '🌚',
                basePrice: 9.5e21, currentPrice: 9.5e21, owned: 0,
                effect: () => autoClickers += 2000000000000
            },
            {
                id: 96, name: 'Ultimate Destroyer', description: '+10B Multiplier', icon: '💀',
                basePrice: 10e21, currentPrice: 10e21, owned: 0,
                effect: () => multiplier += 10000000000
            },
            
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            // TIER: OWNER (12 items) - 100 Sextillion to 1 Septillion
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            {
                id: 97, name: 'Royal Crown', description: '+5T Click Power', icon: '👑',
                basePrice: 1e23, currentPrice: 1e23, owned: 0,
                effect: () => clickPower += 5000000000000
            },
            {
                id: 98, name: 'Divine Scepter', description: '+10T Auto Clickers', icon: '🪄',
                basePrice: 1.5e23, currentPrice: 1.5e23, owned: 0,
                effect: () => autoClickers += 10000000000000
            },
            {
                id: 99, name: 'Emperor Ring', description: '+50B Multiplier', icon: '💍',
                basePrice: 2e23, currentPrice: 2e23, owned: 0,
                effect: () => multiplier += 50000000000
            },
            {
                id: 100, name: 'Throne of Power', description: '+20T Click Power', icon: '🪑',
                basePrice: 2.5e23, currentPrice: 2.5e23, owned: 0,
                effect: () => clickPower += 20000000000000
            },
            {
                id: 101, name: 'Celestial Orb', description: '+50T Auto Clickers', icon: '🔆',
                basePrice: 3e23, currentPrice: 3e23, owned: 0,
                effect: () => autoClickers += 50000000000000
            },
            {
                id: 102, name: 'Master Key', description: '+100B Multiplier', icon: '🗝️',
                basePrice: 4e23, currentPrice: 4e23, owned: 0,
                effect: () => multiplier += 100000000000
            },
            {
                id: 103, name: 'Imperial Armor', description: '+100T Click Power', icon: '🛡️',
                basePrice: 5e23, currentPrice: 5e23, owned: 0,
                effect: () => clickPower += 100000000000000
            },
            {
                id: 104, name: 'Sovereign Blade', description: '+200T Auto Clickers', icon: '⚔️',
                basePrice: 6e23, currentPrice: 6e23, owned: 0,
                effect: () => autoClickers += 200000000000000
            },
            {
                id: 105, name: 'Regal Diamond', description: '+500B Multiplier', icon: '💎',
                basePrice: 7e23, currentPrice: 7e23, owned: 0,
                effect: () => multiplier += 500000000000
            },
            {
                id: 106, name: 'Dynasty Staff', description: '+500T Click Power', icon: '🎋',
                basePrice: 8e23, currentPrice: 8e23, owned: 0,
                effect: () => clickPower += 500000000000000
            },
            {
                id: 107, name: 'Lordship Insignia', description: '+1Qa Auto Clickers', icon: '🏅',
                basePrice: 9e23, currentPrice: 9e23, owned: 0,
                effect: () => autoClickers += 1000000000000000
            },
            {
                id: 108, name: 'Absolute Authority', description: '+1T Multiplier', icon: '✨',
                basePrice: 1e24, currentPrice: 1e24, owned: 0,
                effect: () => multiplier += 1000000000000
            },
            
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            // TIER: GOAT (11 items) - 10 Septillion to 100 Septillion
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            {
                id: 109, name: 'GOAT Trophy', description: '+2Qa Click Power', icon: '🐐',
                basePrice: 1e25, currentPrice: 1e25, owned: 0,
                effect: () => clickPower += 2000000000000000
            },
            {
                id: 110, name: 'Legend Medal', description: '+5Qa Auto Clickers', icon: '🏆',
                basePrice: 1.5e25, currentPrice: 1.5e25, owned: 0,
                effect: () => autoClickers += 5000000000000000
            },
            {
                id: 111, name: 'Platinum Star', description: '+5T Multiplier', icon: '⭐',
                basePrice: 2e25, currentPrice: 2e25, owned: 0,
                effect: () => multiplier += 5000000000000
            },
            {
                id: 112, name: 'Champion Belt', description: '+10Qa Click Power', icon: '🥇',
                basePrice: 3e25, currentPrice: 3e25, owned: 0,
                effect: () => clickPower += 10000000000000000
            },
            {
                id: 113, name: 'MVP Crown', description: '+20Qa Auto Clickers', icon: '👑',
                basePrice: 4e25, currentPrice: 4e25, owned: 0,
                effect: () => autoClickers += 20000000000000000
            },
            {
                id: 114, name: 'Hall of Fame Ring', description: '+10T Multiplier', icon: '💍',
                basePrice: 5e25, currentPrice: 5e25, owned: 0,
                effect: () => multiplier += 10000000000000
            },
            {
                id: 115, name: 'Legendary Sword', description: '+50Qa Click Power', icon: '🗡️',
                basePrice: 6e25, currentPrice: 6e25, owned: 0,
                effect: () => clickPower += 50000000000000000
            },
            {
                id: 116, name: 'Platinum Shield', description: '+100Qa Auto Clickers', icon: '🛡️',
                basePrice: 7e25, currentPrice: 7e25, owned: 0,
                effect: () => autoClickers += 100000000000000000
            },
            {
                id: 117, name: 'Supreme Badge', description: '+50T Multiplier', icon: '🎖️',
                basePrice: 8e25, currentPrice: 8e25, owned: 0,
                effect: () => multiplier += 50000000000000
            },
            {
                id: 118, name: 'Elite Status', description: '+200Qa Click Power', icon: '🌟',
                basePrice: 9e25, currentPrice: 9e25, owned: 0,
                effect: () => clickPower += 200000000000000000
            },
            {
                id: 119, name: 'Greatest of All', description: '+100T Multiplier', icon: '🐐',
                basePrice: 1e26, currentPrice: 1e26, owned: 0,
                effect: () => multiplier += 100000000000000
            },
            
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            // TIER: STRONGEST (10 items) - 1 Octillion to 10 Octillion
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            {
                id: 120, name: 'Thunder Hammer', description: '+500Qa Click Power', icon: '⚡',
                basePrice: 1e27, currentPrice: 1e27, owned: 0,
                effect: () => clickPower += 500000000000000000
            },
            {
                id: 121, name: 'Lightning Gauntlet', description: '+1Qi Auto Clickers', icon: '💪',
                basePrice: 1.5e27, currentPrice: 1.5e27, owned: 0,
                effect: () => autoClickers += 1000000000000000000
            },
            {
                id: 122, name: 'Storm Core', description: '+500T Multiplier', icon: '🌩️',
                basePrice: 2e27, currentPrice: 2e27, owned: 0,
                effect: () => multiplier += 500000000000000
            },
            {
                id: 123, name: 'Titan Fist', description: '+2Qi Click Power', icon: '✊',
                basePrice: 3e27, currentPrice: 3e27, owned: 0,
                effect: () => clickPower += 2000000000000000000
            },
            {
                id: 124, name: 'Hercules Club', description: '+5Qi Auto Clickers', icon: '🏏',
                basePrice: 4e27, currentPrice: 4e27, owned: 0,
                effect: () => autoClickers += 5000000000000000000
            },
            {
                id: 125, name: 'Colossus Heart', description: '+1Qa Multiplier', icon: '❤️',
                basePrice: 5e27, currentPrice: 5e27, owned: 0,
                effect: () => multiplier += 1000000000000000
            },
            {
                id: 126, name: 'Unstoppable Force', description: '+10Qi Click Power', icon: '💢',
                basePrice: 6e27, currentPrice: 6e27, owned: 0,
                effect: () => clickPower += 10000000000000000000
            },
            {
                id: 127, name: 'Invincible Shield', description: '+20Qi Auto Clickers', icon: '🛡️',
                basePrice: 7e27, currentPrice: 7e27, owned: 0,
                effect: () => autoClickers += 20000000000000000000
            },
            {
                id: 128, name: 'Ultimate Strength', description: '+5Qa Multiplier', icon: '🌟',
                basePrice: 9e27, currentPrice: 9e27, owned: 0,
                effect: () => multiplier += 5000000000000000
            },
            {
                id: 129, name: 'Maximum Power Core', description: '+10Qa Multiplier', icon: '⚡',
                basePrice: 1e28, currentPrice: 1e28, owned: 0,
                effect: () => multiplier += 10000000000000000
            },
            
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            // TIER: POWEREST (10 items) - 100 Octillion to 1 Nonillion
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            {
                id: 130, name: 'Volcano Heart', description: '+50Qi Click Power', icon: '🌋',
                basePrice: 1e29, currentPrice: 1e29, owned: 0,
                effect: () => clickPower += 50000000000000000000
            },
            {
                id: 131, name: 'Magma Essence', description: '+100Qi Auto Clickers', icon: '🔥',
                basePrice: 1.5e29, currentPrice: 1.5e29, owned: 0,
                effect: () => autoClickers += 100000000000000000000
            },
            {
                id: 132, name: 'Inferno Core', description: '+50Qa Multiplier', icon: '💥',
                basePrice: 2e29, currentPrice: 2e29, owned: 0,
                effect: () => multiplier += 50000000000000000
            },
            {
                id: 133, name: 'Phoenix Feather', description: '+200Qi Click Power', icon: '🔥',
                basePrice: 3e29, currentPrice: 3e29, owned: 0,
                effect: () => clickPower += 200000000000000000000
            },
            {
                id: 134, name: 'Blazing Sword', description: '+500Qi Auto Clickers', icon: '⚔️',
                basePrice: 4e29, currentPrice: 4e29, owned: 0,
                effect: () => autoClickers += 500000000000000000000
            },
            {
                id: 135, name: 'Sun Fragment', description: '+100Qa Multiplier', icon: '☀️',
                basePrice: 5e29, currentPrice: 5e29, owned: 0,
                effect: () => multiplier += 100000000000000000
            },
            {
                id: 136, name: 'Meteor Strike', description: '+1Sx Click Power', icon: '☄️',
                basePrice: 6e29, currentPrice: 6e29, owned: 0,
                effect: () => clickPower += 1000000000000000000000
            },
            {
                id: 137, name: 'Supernova Core', description: '+2Sx Auto Clickers', icon: '💫',
                basePrice: 7e29, currentPrice: 7e29, owned: 0,
                effect: () => autoClickers += 2000000000000000000000
            },
            {
                id: 138, name: 'Plasma Orb', description: '+500Qa Multiplier', icon: '⚡',
                basePrice: 9e29, currentPrice: 9e29, owned: 0,
                effect: () => multiplier += 500000000000000000
            },
            {
                id: 139, name: 'Absolute Inferno', description: '+1Qi Multiplier', icon: '🔥',
                basePrice: 1e30, currentPrice: 1e30, owned: 0,
                effect: () => multiplier += 1000000000000000000
            },
            
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            // TIER: RAINBOW (9 items) - 10 Nonillion+
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            {
                id: 140, name: 'Rainbow Crystal', description: '+5Sx Click Power', icon: '🌈',
                basePrice: 1e31, currentPrice: 1e31, owned: 0,
                effect: () => clickPower += 5000000000000000000000
            },
            {
                id: 141, name: 'Prismatic Gem', description: '+10Sx Auto Clickers', icon: '💎',
                basePrice: 5e31, currentPrice: 5e31, owned: 0,
                effect: () => autoClickers += 10000000000000000000000
            },
            {
                id: 142, name: 'Aurora Essence', description: '+5Qi Multiplier', icon: '✨',
                basePrice: 1e32, currentPrice: 1e32, owned: 0,
                effect: () => multiplier += 5000000000000000000
            },
            {
                id: 143, name: 'Spectrum Orb', description: '+50Sx Click Power', icon: '🔮',
                basePrice: 5e32, currentPrice: 5e32, owned: 0,
                effect: () => clickPower += 50000000000000000000000
            },
            {
                id: 144, name: 'Chromatic Shard', description: '+100Sx Auto Clickers', icon: '💫',
                basePrice: 1e33, currentPrice: 1e33, owned: 0,
                effect: () => autoClickers += 100000000000000000000000
            },
            {
                id: 145, name: 'Cosmic Prism', description: '+50Qi Multiplier', icon: '🌟',
                basePrice: 5e33, currentPrice: 5e33, owned: 0,
                effect: () => multiplier += 50000000000000000000
            },
            {
                id: 146, name: 'Infinite Spectrum', description: '+500Sx Click Power', icon: '🌈',
                basePrice: 1e34, currentPrice: 1e34, owned: 0,
                effect: () => clickPower += 500000000000000000000000
            },
            {
                id: 147, name: 'Divine Rainbow', description: '+1Sp Auto Clickers', icon: '✨',
                basePrice: 5e34, currentPrice: 5e34, owned: 0,
                effect: () => autoClickers += 1000000000000000000000000
            },
            {
                id: 148, name: 'Ultimate Spectrum', description: '+100Qi Multiplier', icon: '💫',
                basePrice: 1e35, currentPrice: 1e35, owned: 0,
                effect: () => multiplier += 100000000000000000000
            },
            
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            // ADDITIONAL 67 ITEMS - EVEN MORE POWERFUL!
            // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
            
            // TIER: HARDCORE+ (10 items) - Starting at 1e36
            {
                id: 149, name: 'Void Reaper', description: '+1Sx Click Power', icon: '💀',
                basePrice: 1e36, currentPrice: 1e36, owned: 0,
                effect: () => clickPower += 1000000000000000000000
            },
            {
                id: 150, name: 'Soul Extractor', description: '+5Sx Auto Clickers', icon: '👻',
                basePrice: 2e36, currentPrice: 2e36, owned: 0,
                effect: () => autoClickers += 5000000000000000000000
            },
            {
                id: 151, name: 'Demon Lord Crown', description: '+1Qi Multiplier', icon: '😈',
                basePrice: 3e36, currentPrice: 3e36, owned: 0,
                effect: () => multiplier += 1000000000000000000
            },
            {
                id: 152, name: 'Hellspawn Orb', description: '+10Sx Click Power', icon: '🔥',
                basePrice: 4e36, currentPrice: 4e36, owned: 0,
                effect: () => clickPower += 10000000000000000000000
            },
            {
                id: 153, name: 'Abyss Gate', description: '+20Sx Auto Clickers', icon: '🌀',
                basePrice: 5e36, currentPrice: 5e36, owned: 0,
                effect: () => autoClickers += 20000000000000000000000
            },
            {
                id: 154, name: 'Necrotic Blade', description: '+5Qi Multiplier', icon: '⚔️',
                basePrice: 6e36, currentPrice: 6e36, owned: 0,
                effect: () => multiplier += 5000000000000000000
            },
            {
                id: 155, name: 'Shadow Realm Key', description: '+50Sx Click Power', icon: '🗝️',
                basePrice: 7e36, currentPrice: 7e36, owned: 0,
                effect: () => clickPower += 50000000000000000000000
            },
            {
                id: 156, name: 'Death Dimension Core', description: '+100Sx Auto Clickers', icon: '💀',
                basePrice: 8e36, currentPrice: 8e36, owned: 0,
                effect: () => autoClickers += 100000000000000000000000
            },
            {
                id: 157, name: 'Infernal Engine', description: '+10Qi Multiplier', icon: '⚙️',
                basePrice: 9e36, currentPrice: 9e36, owned: 0,
                effect: () => multiplier += 10000000000000000000
            },
            {
                id: 158, name: 'Apocalypse Catalyst', description: '+500Sx Click Power', icon: '☢️',
                basePrice: 10e36, currentPrice: 10e36, owned: 0,
                effect: () => clickPower += 500000000000000000000000
            },
            
            // TIER: OWNER+ (10 items) - Starting at 1e38
            {
                id: 159, name: 'God Emperor Throne', description: '+1Sp Click Power', icon: '👑',
                basePrice: 1e38, currentPrice: 1e38, owned: 0,
                effect: () => clickPower += 1000000000000000000000000
            },
            {
                id: 160, name: 'Universal Scepter', description: '+5Sp Auto Clickers', icon: '🪄',
                basePrice: 2e38, currentPrice: 2e38, owned: 0,
                effect: () => autoClickers += 5000000000000000000000000
            },
            {
                id: 161, name: 'Omnipotent Ring', description: '+50Qi Multiplier', icon: '💍',
                basePrice: 3e38, currentPrice: 3e38, owned: 0,
                effect: () => multiplier += 50000000000000000000
            },
            {
                id: 162, name: 'Reality Crown', description: '+10Sp Click Power', icon: '👑',
                basePrice: 4e38, currentPrice: 4e38, owned: 0,
                effect: () => clickPower += 10000000000000000000000000
            },
            {
                id: 163, name: 'Cosmic Authority', description: '+20Sp Auto Clickers', icon: '✨',
                basePrice: 5e38, currentPrice: 5e38, owned: 0,
                effect: () => autoClickers += 20000000000000000000000000
            },
            {
                id: 164, name: 'Divine Mandate', description: '+100Qi Multiplier', icon: '📜',
                basePrice: 6e38, currentPrice: 6e38, owned: 0,
                effect: () => multiplier += 100000000000000000000
            },
            {
                id: 165, name: 'Eternal Dominion', description: '+50Sp Click Power', icon: '🌟',
                basePrice: 7e38, currentPrice: 7e38, owned: 0,
                effect: () => clickPower += 50000000000000000000000000
            },
            {
                id: 166, name: 'Absolute Control', description: '+100Sp Auto Clickers', icon: '🎛️',
                basePrice: 8e38, currentPrice: 8e38, owned: 0,
                effect: () => autoClickers += 100000000000000000000000000
            },
            {
                id: 167, name: 'Supreme Command', description: '+500Qi Multiplier', icon: '⚡',
                basePrice: 9e38, currentPrice: 9e38, owned: 0,
                effect: () => multiplier += 500000000000000000000
            },
            {
                id: 168, name: 'Total Sovereignty', description: '+1Oc Click Power', icon: '👑',
                basePrice: 10e38, currentPrice: 10e38, owned: 0,
                effect: () => clickPower += 1000000000000000000000000000
            },
            
            // TIER: GOAT+ (12 items) - Starting at 1e40
            {
                id: 169, name: 'Legendary Soul', description: '+5Oc Click Power', icon: '🐐',
                basePrice: 1e40, currentPrice: 1e40, owned: 0,
                effect: () => clickPower += 5000000000000000000000000000
            },
            {
                id: 170, name: 'Mythic Champion Belt', description: '+10Oc Auto Clickers', icon: '🥇',
                basePrice: 1.5e40, currentPrice: 1.5e40, owned: 0,
                effect: () => autoClickers += 10000000000000000000000000000
            },
            {
                id: 171, name: 'Perfect Form', description: '+1Sx Multiplier', icon: '💫',
                basePrice: 2e40, currentPrice: 2e40, owned: 0,
                effect: () => multiplier += 1000000000000000000000
            },
            {
                id: 172, name: 'Undefeated Record', description: '+20Oc Click Power', icon: '🏆',
                basePrice: 3e40, currentPrice: 3e40, owned: 0,
                effect: () => clickPower += 20000000000000000000000000000
            },
            {
                id: 173, name: 'Historic Greatness', description: '+50Oc Auto Clickers', icon: '📚',
                basePrice: 4e40, currentPrice: 4e40, owned: 0,
                effect: () => autoClickers += 50000000000000000000000000000
            },
            {
                id: 174, name: 'Living Legend', description: '+5Sx Multiplier', icon: '⭐',
                basePrice: 5e40, currentPrice: 5e40, owned: 0,
                effect: () => multiplier += 5000000000000000000000
            },
            {
                id: 175, name: 'Icon Status', description: '+100Oc Click Power', icon: '🌟',
                basePrice: 6e40, currentPrice: 6e40, owned: 0,
                effect: () => clickPower += 100000000000000000000000000000
            },
            {
                id: 176, name: 'Hall of Immortals', description: '+200Oc Auto Clickers', icon: '🏛️',
                basePrice: 7e40, currentPrice: 7e40, owned: 0,
                effect: () => autoClickers += 200000000000000000000000000000
            },
            {
                id: 177, name: 'Eternal Glory', description: '+10Sx Multiplier', icon: '✨',
                basePrice: 8e40, currentPrice: 8e40, owned: 0,
                effect: () => multiplier += 10000000000000000000000
            },
            {
                id: 178, name: 'Timeless Achievement', description: '+500Oc Click Power', icon: '⏳',
                basePrice: 9e40, currentPrice: 9e40, owned: 0,
                effect: () => clickPower += 500000000000000000000000000000
            },
            {
                id: 179, name: 'Undisputed Title', description: '+1No Auto Clickers', icon: '🥇',
                basePrice: 10e40, currentPrice: 10e40, owned: 0,
                effect: () => autoClickers += 1000000000000000000000000000000
            },
            {
                id: 180, name: 'Ultimate GOAT', description: '+50Sx Multiplier', icon: '🐐',
                basePrice: 15e40, currentPrice: 15e40, owned: 0,
                effect: () => multiplier += 50000000000000000000000
            },
            
            // TIER: STRONGEST+ (12 items) - Starting at 1e42
            {
                id: 181, name: 'Titan Ascendant', description: '+2No Click Power', icon: '⚡',
                basePrice: 1e42, currentPrice: 1e42, owned: 0,
                effect: () => clickPower += 2000000000000000000000000000000
            },
            {
                id: 182, name: 'Omega Force', description: '+5No Auto Clickers', icon: '💪',
                basePrice: 2e42, currentPrice: 2e42, owned: 0,
                effect: () => autoClickers += 5000000000000000000000000000000
            },
            {
                id: 183, name: 'Maximum Overdrive', description: '+100Sx Multiplier', icon: '⚙️',
                basePrice: 3e42, currentPrice: 3e42, owned: 0,
                effect: () => multiplier += 100000000000000000000000
            },
            {
                id: 184, name: 'Godlike Strength', description: '+10No Click Power', icon: '💢',
                basePrice: 4e42, currentPrice: 4e42, owned: 0,
                effect: () => clickPower += 10000000000000000000000000000000
            },
            {
                id: 185, name: 'Infinite Power', description: '+20No Auto Clickers', icon: '♾️',
                basePrice: 5e42, currentPrice: 5e42, owned: 0,
                effect: () => autoClickers += 20000000000000000000000000000000
            },
            {
                id: 186, name: 'Limitless Potential', description: '+500Sx Multiplier', icon: '🌟',
                basePrice: 6e42, currentPrice: 6e42, owned: 0,
                effect: () => multiplier += 500000000000000000000000
            },
            {
                id: 187, name: 'Unbreakable Will', description: '+50No Click Power', icon: '🛡️',
                basePrice: 7e42, currentPrice: 7e42, owned: 0,
                effect: () => clickPower += 50000000000000000000000000000000
            },
            {
                id: 188, name: 'Unstoppable Momentum', description: '+100No Auto Clickers', icon: '🌀',
                basePrice: 8e42, currentPrice: 8e42, owned: 0,
                effect: () => autoClickers += 100000000000000000000000000000000
            },
            {
                id: 189, name: 'Overwhelming Might', description: '+1Sp Multiplier', icon: '💥',
                basePrice: 9e42, currentPrice: 9e42, owned: 0,
                effect: () => multiplier += 1000000000000000000000000
            },
            {
                id: 190, name: 'Absolute Dominance', description: '+200No Click Power', icon: '👊',
                basePrice: 10e42, currentPrice: 10e42, owned: 0,
                effect: () => clickPower += 200000000000000000000000000000000
            },
            {
                id: 191, name: 'Supreme Superiority', description: '+500No Auto Clickers', icon: '⚡',
                basePrice: 15e42, currentPrice: 15e42, owned: 0,
                effect: () => autoClickers += 500000000000000000000000000000000
            },
            {
                id: 192, name: 'Peak Performance', description: '+5Sp Multiplier', icon: '🏔️',
                basePrice: 20e42, currentPrice: 20e42, owned: 0,
                effect: () => multiplier += 5000000000000000000000000
            },
            
            // TIER: POWEREST+ (11 items) - Starting at 1e45
            {
                id: 193, name: 'Nuclear Fusion Core', description: '+1Dc Click Power', icon: '⚛️',
                basePrice: 1e45, currentPrice: 1e45, owned: 0,
                effect: () => clickPower += 1000000000000000000000000000000000
            },
            {
                id: 194, name: 'Antimatter Reactor', description: '+5Dc Auto Clickers', icon: '☢️',
                basePrice: 2e45, currentPrice: 2e45, owned: 0,
                effect: () => autoClickers += 5000000000000000000000000000000000
            },
            {
                id: 195, name: 'Quantum Singularity', description: '+10Sp Multiplier', icon: '⚫',
                basePrice: 3e45, currentPrice: 3e45, owned: 0,
                effect: () => multiplier += 10000000000000000000000000
            },
            {
                id: 196, name: 'Dark Energy Generator', description: '+10Dc Click Power', icon: '🌌',
                basePrice: 4e45, currentPrice: 4e45, owned: 0,
                effect: () => clickPower += 10000000000000000000000000000000000
            },
            {
                id: 197, name: 'Zero Point Module', description: '+20Dc Auto Clickers', icon: '💫',
                basePrice: 5e45, currentPrice: 5e45, owned: 0,
                effect: () => autoClickers += 20000000000000000000000000000000000
            },
            {
                id: 198, name: 'Reality Warper', description: '+50Sp Multiplier', icon: '🌀',
                basePrice: 6e45, currentPrice: 6e45, owned: 0,
                effect: () => multiplier += 50000000000000000000000000
            },
            {
                id: 199, name: 'Cosmic Forge', description: '+50Dc Click Power', icon: '🔨',
                basePrice: 7e45, currentPrice: 7e45, owned: 0,
                effect: () => clickPower += 50000000000000000000000000000000000
            },
            {
                id: 200, name: 'Stellar Furnace', description: '+100Dc Auto Clickers', icon: '🌟',
                basePrice: 8e45, currentPrice: 8e45, owned: 0,
                effect: () => autoClickers += 100000000000000000000000000000000000
            },
            {
                id: 201, name: 'Big Bang Engine', description: '+100Sp Multiplier', icon: '💥',
                basePrice: 9e45, currentPrice: 9e45, owned: 0,
                effect: () => multiplier += 100000000000000000000000000
            },
            {
                id: 202, name: 'Universe Creator', description: '+500Dc Click Power', icon: '🌌',
                basePrice: 10e45, currentPrice: 10e45, owned: 0,
                effect: () => clickPower += 500000000000000000000000000000000000
            },
            {
                id: 203, name: 'Omniversal Power', description: '+1Oc Multiplier', icon: '♾️',
                basePrice: 15e45, currentPrice: 15e45, owned: 0,
                effect: () => multiplier += 1000000000000000000000000000
            },
            
            // TIER: RAINBOW+ (12 items) - Starting at 1e48
            {
                id: 204, name: 'Prismatic Infinity', description: '+1Ud Click Power', icon: '🌈',
                basePrice: 1e48, currentPrice: 1e48, owned: 0,
                effect: () => clickPower += 1000000000000000000000000000000000000
            },
            {
                id: 205, name: 'Chromatic Eternity', description: '+5Ud Auto Clickers', icon: '✨',
                basePrice: 2e48, currentPrice: 2e48, owned: 0,
                effect: () => autoClickers += 5000000000000000000000000000000000000
            },
            {
                id: 206, name: 'Aurora Divinity', description: '+500Sp Multiplier', icon: '🌌',
                basePrice: 3e48, currentPrice: 3e48, owned: 0,
                effect: () => multiplier += 500000000000000000000000000
            },
            {
                id: 207, name: 'Spectrum Absolute', description: '+10Ud Click Power', icon: '🔮',
                basePrice: 4e48, currentPrice: 4e48, owned: 0,
                effect: () => clickPower += 10000000000000000000000000000000000000
            },
            {
                id: 208, name: 'Light Beyond Light', description: '+20Ud Auto Clickers', icon: '💫',
                basePrice: 5e48, currentPrice: 5e48, owned: 0,
                effect: () => autoClickers += 20000000000000000000000000000000000000
            },
            {
                id: 209, name: 'Rainbow Transcendence', description: '+1Oc Multiplier', icon: '🌈',
                basePrice: 6e48, currentPrice: 6e48, owned: 0,
                effect: () => multiplier += 1000000000000000000000000000
            },
            {
                id: 210, name: 'Kaleidoscope Reality', description: '+50Ud Click Power', icon: '🎨',
                basePrice: 7e48, currentPrice: 7e48, owned: 0,
                effect: () => clickPower += 50000000000000000000000000000000000000
            },
            {
                id: 211, name: 'Hyperspectral Core', description: '+100Ud Auto Clickers', icon: '💎',
                basePrice: 8e48, currentPrice: 8e48, owned: 0,
                effect: () => autoClickers += 100000000000000000000000000000000000000
            },
            {
                id: 212, name: 'Omnichromatic Force', description: '+5Oc Multiplier', icon: '🌟',
                basePrice: 9e48, currentPrice: 9e48, owned: 0,
                effect: () => multiplier += 5000000000000000000000000000
            },
            {
                id: 213, name: 'Perfect Wavelength', description: '+500Ud Click Power', icon: '〰️',
                basePrice: 10e48, currentPrice: 10e48, owned: 0,
                effect: () => clickPower += 500000000000000000000000000000000000000
            },
            {
                id: 214, name: 'Infinite Color', description: '+1Dd Auto Clickers', icon: '🎨',
                basePrice: 15e48, currentPrice: 15e48, owned: 0,
                effect: () => autoClickers += 1000000000000000000000000000000000000000
            },
            {
                id: 215, name: 'Beyond Rainbow', description: '+10Oc Multiplier', icon: '🌈',
                basePrice: 20e48, currentPrice: 20e48, owned: 0,
                effect: () => multiplier += 10000000000000000000000000000
            }
        ];

        const rebirthRequirements = [100000]; // Chỉ cần 1 giá trị, sau đó x5 mỗi lần

        // ===== WEATHER FUNCTIONS =====
        function activateWeather(type) {
            if (activeWeathers.includes(type)) return; // Already active
            
            activeWeathers.push(type);
            const config = weatherConfig[type];
            weatherTimers[type] = config.duration;
            
            // Apply weather effect
            applyWeatherEffect(type, true);
            
            // Start countdown
            weatherIntervals[type] = setInterval(() => {
                weatherTimers[type]--;
                updateWeatherDisplay();
                
                if (weatherTimers[type] <= 0) {
                    deactivateWeather(type);
                }
            }, 1000);
            
            updateWeatherDisplay();
        }

        function deactivateWeather(type) {
            if (!activeWeathers.includes(type)) return;
            
            // Remove weather effect
            applyWeatherEffect(type, false);
            
            // Clean up
            clearInterval(weatherIntervals[type]);
            delete weatherIntervals[type];
            delete weatherTimers[type];
            activeWeathers = activeWeathers.filter(w => w !== type);
            
            updateWeatherDisplay();
        }


        function applyWeatherEffect(type, apply) {
            const config = weatherConfig[type];
            if (!config) return;
            
            // Wind, Time Warp - Cooldown effects
            if (type === 'wind') {
                clickCooldown = apply ? Math.max(0.01, clickCooldown - 0.3) : clickCooldown + 0.3;
            } else if (type === 'timewarp') {
                clickCooldown = apply ? Math.max(0.01, clickCooldown - 0.5) : clickCooldown + 0.5;
            }
            
            // Cloud - Shop discount (handled in renderShop)
            else if (type === 'cloud') {
                renderShop();
            }
            
            // Simple +X Click Power effects
            else if (type === 'rain') {
                clickPower = apply ? clickPower + 2 : Math.max(1, clickPower - 2);
            } else if (type === 'night') {
                clickPower = apply ? clickPower + 5 : Math.max(1, clickPower - 5);
            } else if (type === 'drizzle') {
                clickPower = apply ? clickPower + 8 : Math.max(1, clickPower - 8);
            } else if (type === 'sunrise') {
                clickPower = apply ? clickPower + 15 : Math.max(1, clickPower - 15);
            } else if (type === 'hail') {
                clickPower = apply ? clickPower + 25 : Math.max(1, clickPower - 25);
            } else if (type === 'comet') {
                clickPower = apply ? clickPower + 50 : Math.max(1, clickPower - 50);
            } else if (type === 'wildfire') {
                clickPower = apply ? clickPower + 100 : Math.max(1, clickPower - 100);
            } else if (type === 'cosmic') {
                clickPower = apply ? clickPower + 200 : Math.max(1, clickPower - 200);
            }
            
            // +X Auto Clickers effects
            else if (type === 'snow') {
                autoClickers = apply ? autoClickers + 3 : Math.max(0, autoClickers - 3);
            } else if (type === 'breeze') {
                autoClickers = apply ? autoClickers + 10 : Math.max(0, autoClickers - 10);
            } else if (type === 'sunset') {
                autoClickers = apply ? autoClickers + 12 : Math.max(0, autoClickers - 12);
            } else if (type === 'blizzard') {
                autoClickers = apply ? autoClickers + 20 : Math.max(0, autoClickers - 20);
            } else if (type === 'earthquake') {
                autoClickers = apply ? autoClickers + 30 : Math.max(0, autoClickers - 30);
            } else if (type === 'sandstorm') {
                autoClickers = apply ? autoClickers + 40 : Math.max(0, autoClickers - 40);
            } else if (type === 'pulsar') {
                autoClickers = apply ? autoClickers + 100 : Math.max(0, autoClickers - 100);
            }
            
            // +X Multiplier effects
            else if (type === 'fog') {
                multiplier = apply ? multiplier + 1 : Math.max(1, multiplier - 1);
            } else if (type === 'rainbow') {
                multiplier = apply ? multiplier + 2 : Math.max(1, multiplier - 2);
            } else if (type === 'gravity') {
                multiplier = apply ? multiplier + 3 : Math.max(1, multiplier - 3);
            } else if (type === 'quantum') {
                multiplier = apply ? multiplier + 5 : Math.max(1, multiplier - 5);
            } else if (type === 'unicorn') {
                multiplier = apply ? multiplier + 10 : Math.max(1, multiplier - 10);
            } else if (type === 'eternity') {
                multiplier = apply ? multiplier + 20 : Math.max(1, multiplier - 20);
            }
            
            // Multiplier weathers (x2, x3, x5, etc) - handled in getWeatherMultiplier()
            // moonlight, meteor, thunder, storm, tornado, aurora, eclipse, volcano, tsunami
            // blackhole, supernova, plasma, dimension, nebula, stardust, galaxy
            // divine, celestial, mythical, phoenix, kraken
            // infinity, omnipotence, godmode, transcendence, ascension
            
            updateDisplay();
        }

        function getWeatherMultiplier() {
            let mult = 1;
            
            // TIER 1: COMMON
            if (activeWeathers.includes('moonlight')) mult *= 2;
            if (activeWeathers.includes('meteor')) mult *= 5;
            
            // TIER 2: UNCOMMON
            if (activeWeathers.includes('thunder')) mult *= 3;
            if (activeWeathers.includes('storm')) mult *= 4;
            if (activeWeathers.includes('tornado')) mult *= 6;
            if (activeWeathers.includes('aurora')) mult *= 7;
            if (activeWeathers.includes('eclipse')) mult *= 8;
            if (activeWeathers.includes('volcano')) mult *= 10;
            if (activeWeathers.includes('tsunami')) mult *= 12;
            
            // TIER 3: RARE
            if (activeWeathers.includes('blackhole')) mult *= 15;
            if (activeWeathers.includes('supernova')) mult *= 20;
            if (activeWeathers.includes('plasma')) mult *= 25;
            if (activeWeathers.includes('dimension')) mult *= 30;
            if (activeWeathers.includes('nebula')) mult *= 35;
            if (activeWeathers.includes('stardust')) mult *= 40;
            if (activeWeathers.includes('galaxy')) mult *= 50;
            
            // TIER 4: EPIC
            if (activeWeathers.includes('divine')) mult *= 75;
            if (activeWeathers.includes('celestial')) mult *= 100;
            if (activeWeathers.includes('mythical')) mult *= 150;
            if (activeWeathers.includes('phoenix')) mult *= 200;
            if (activeWeathers.includes('kraken')) mult *= 250;
            
            // TIER 5: LEGENDARY
            if (activeWeathers.includes('infinity')) mult *= 500;
            if (activeWeathers.includes('omnipotence')) mult *= 1000;
            if (activeWeathers.includes('godmode')) mult *= 2000;
            if (activeWeathers.includes('transcendence')) mult *= 5000;
            if (activeWeathers.includes('ascension')) mult *= 10000;
            
            return mult;
        }



        function getWeatherDiscount() {
            let discount = 0;
            if (activeWeathers.includes('cloud')) discount += 3;
            return discount;
        }

        function updateWeatherDisplay() {
            const weatherList = document.getElementById('weatherList');
            
            // Update count for hidden mode
            const weatherCountEl = document.getElementById('weatherCountNumber');
            if (weatherCountEl) weatherCountEl.textContent = activeWeathers.length;
            
            if (activeWeathers.length === 0) {
                weatherList.innerHTML = '<div class="weather-empty">' + (currentLanguage === 'en' ? 'No active weather' : 'Không có thời tiết nào') + '</div>';
                return;
            }
            
            let html = '';
            activeWeathers.forEach(type => {
                const config = weatherConfig[type];
                const timeLeft = weatherTimers[type];
                
                // Get name and effect based on language
                let weatherName, weatherEffect;
                if (typeof config.name === 'object') {
                    weatherName = config.name[currentLanguage] || config.name.vi || config.name;
                } else {
                    weatherName = config.name;
                }
                
                if (typeof config.effect === 'object') {
                    weatherEffect = config.effect[currentLanguage] || config.effect.vi || config.effect;
                } else {
                    weatherEffect = config.effect;
                }
                
                html += `
                    <div class="weather-item ${config.class}">
                        <div class="weather-info">
                            <div class="weather-name">${weatherName}</div>
                            <div class="weather-effect">${weatherEffect}</div>
                        </div>
                        <div class="weather-timer">${timeLeft}s</div>
                    </div>
                `;
            });
            
            weatherList.innerHTML = html;
        }

        function summonWeather(type) {
            if (!isAdmin) return;
            activateWeather(type);
        }

        function clearAllWeather() {
            if (!isAdmin) return;
            
            // Deactivate all active weathers
            [...activeWeathers].forEach(type => {
                deactivateWeather(type);
            });
        }

        function checkWeatherSpawns() {
            if (isBanned || isAfk) return;
            
            // Check each weather type
            Object.keys(weatherNextSpawn).forEach(type => {
                weatherNextSpawn[type]--;
                
                if (weatherNextSpawn[type] <= 0) {
                    activateWeather(type);
                    // Reset spawn timer
                    weatherNextSpawn[type] = weatherConfig[type].interval;
                }
            });
        }

        // ===== ANTI-AUTO CLICKER SYSTEM =====
        function checkAutoClicker() {
            const now = Date.now();
            clickTimes.push(now);
            
            // Chỉ giữ lại 10 lần click gần nhất
            if (clickTimes.length > 10) {
                clickTimes.shift();
            }
            
            // Kiểm tra nếu có ít nhất 5 lần click
            if (clickTimes.length >= 5) {
                // Tính khoảng cách thời gian giữa các lần click
                const intervals = [];
                for (let i = 1; i < clickTimes.length; i++) {
                    intervals.push(clickTimes[i] - clickTimes[i - 1]);
                }
                
                // Tính trung bình khoảng cách
                const avgInterval = intervals.reduce((a, b) => a + b, 0) / intervals.length;
                
                // Tính độ lệch chuẩn
                const variance = intervals.reduce((sum, interval) => {
                    return sum + Math.pow(interval - avgInterval, 2);
                }, 0) / intervals.length;
                const stdDev = Math.sqrt(variance);
                
                // PHÁT HIỆN AUTO CLICKER:
                // 1. Click quá nhanh (< 50ms trung bình)
                // 2. Click quá đều (độ lệch chuẩn < 10ms)
                // 3. Click với pattern giống nhau (variance quá thấp)
                
                const tooFast = avgInterval < 50;
                const tooConsistent = stdDev < 10;
                const suspiciousPattern = variance < 100 && clickTimes.length >= 8;
                
                if ((tooFast && tooConsistent) || suspiciousPattern) {
                    // BAN PLAYER!
                    isBanned = true;
                    document.getElementById('banOverlay').classList.add('active');
                    document.getElementById('clickButton').classList.add('disabled');
                    
                    // Dừng tất cả hoạt động
                    if (afkTimer) clearInterval(afkTimer);
                    if (playTimeInterval) clearInterval(playTimeInterval);
                    if (potionInterval) clearInterval(potionInterval);
                    if (discountTicketInterval) clearInterval(discountTicketInterval);
                    
                    return true; // Ngăn không cho click
                }
            }
            
            return false; // Cho phép click
        }

        function updateDisplay() {
            const coinsEl = document.getElementById('coins');
            const diamondsEl = document.getElementById('diamonds');
            const ticketsEl = document.getElementById('tickets');
            const goldBarsEl = document.getElementById('goldBars');
            const wheelTicketsEl = document.getElementById('wheelTickets');
            const clickPowerEl = document.getElementById('clickPower');
            const autoClickersEl = document.getElementById('autoClickers');
            const multiplierEl = document.getElementById('multiplier');
            const clickCooldownEl = document.getElementById('clickCooldown');
            const rebirthMultiplierDisplayEl = document.getElementById('rebirthMultiplierDisplay');
            const petMultiplierDisplayEl = document.getElementById('petMultiplierDisplay');
            const discountDisplayEl = document.getElementById('discountDisplay');
            const ticketDiscountDisplayEl = document.getElementById('ticketDiscountDisplay');
            const purchaseLimitDisplayEl = document.getElementById('purchaseLimitDisplay');
            
            if (coinsEl) coinsEl.textContent = formatNumber(coins);
            if (diamondsEl) diamondsEl.textContent = formatNumber(diamonds);
            if (ticketsEl) ticketsEl.textContent = formatNumber(tickets);
            if (goldBarsEl) goldBarsEl.textContent = formatNumber(goldBars);
            if (wheelTicketsEl) wheelTicketsEl.textContent = formatNumber(tickets);
            if (clickPowerEl) clickPowerEl.textContent = clickPower;
            if (autoClickersEl) autoClickersEl.textContent = autoClickers;
            if (multiplierEl) multiplierEl.textContent = multiplier;
            if (clickCooldownEl) clickCooldownEl.textContent = clickCooldown.toFixed(2);
            if (rebirthMultiplierDisplayEl) rebirthMultiplierDisplayEl.textContent = rebirthMultiplier.toFixed(2);
            
            // Pet Multiplier Display
            const petMult = getPetMultiplier();
            if (petMultiplierDisplayEl) petMultiplierDisplayEl.textContent = petMult >= 1000 ? petMult.toExponential(2) : petMult.toFixed(2);
            
            if (discountDisplayEl) discountDisplayEl.textContent = shopDiscount;
            if (ticketDiscountDisplayEl) ticketDiscountDisplayEl.textContent = discountTicket;
            if (purchaseLimitDisplayEl) purchaseLimitDisplayEl.textContent = purchaseLimit;
            
            document.getElementById('inv2x').textContent = inventory.potion_2x;
            document.getElementById('inv3x').textContent = inventory.potion_3x;
            document.getElementById('inv4x').textContent = inventory.potion_4x;
            document.getElementById('inv5x').textContent = inventory.potion_5x || 0;
            document.getElementById('inv6x').textContent = inventory.potion_6x || 0;
            document.getElementById('inv10x').textContent = inventory.potion_10x || 0;
            
            const hours = Math.floor(playTime / 3600);
            const minutes = Math.floor((playTime % 3600) / 60);
            const seconds = playTime % 60;
            document.getElementById('playTime').textContent =
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // RARITY SYSTEM FOR SHOP ITEMS
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        function getRarity(price) {
            // Validate price
            if (typeof price !== 'number' || price < 0) {
                return { name: 'Common', color: '#808080', stars: 0 };
            }
            
            // Price thresholds
            const TRILLION = 1e12;
            const QUADRILLION = 1e15;
            const QUINTILLION = 1e18;
            const SEXTILLION = 1e21;
            const SEPTILLION = 1e24;
            const OCTILLION = 1e27;
            const NONILLION = 1e30;
            
            // NEW ULTIMATE TIERS (Highest to Lowest)
            if (price >= 10 * NONILLION) {
                return {
                    name: 'RAINBOW',
                    color: 'linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #00ffff, #0000ff, #8b00ff)',
                    glow: '0 0 30px rgba(255,255,255,1)',
                    stars: 0
                };
            } else if (price >= 100 * OCTILLION) {
                return {
                    name: 'POWEREST',
                    color: 'linear-gradient(135deg, #ff4500 0%, #ff8c00 50%, #ff0000 100%)',
                    glow: '0 0 25px rgba(255,69,0,1)',
                    stars: 0
                };
            } else if (price >= OCTILLION) {
                return {
                    name: 'STRONGEST',
                    color: 'linear-gradient(135deg, #00bfff 0%, #ffffff 50%, #00bfff 100%)',
                    glow: '0 0 25px rgba(0,191,255,1)',
                    stars: 0
                };
            } else if (price >= 10 * SEPTILLION) {
                return {
                    name: 'GOAT',
                    color: 'linear-gradient(135deg, #c0c0c0 0%, #ffffff 50%, #c0c0c0 100%)',
                    glow: '0 0 20px rgba(192,192,192,1)',
                    stars: 0
                };
            } else if (price >= 100 * SEXTILLION) {
                return {
                    name: 'OWNER',
                    color: 'linear-gradient(135deg, #9370db 0%, #ffd700 50%, #9370db 100%)',
                    glow: '0 0 20px rgba(147,112,219,1)',
                    stars: 0
                };
            } else if (price >= SEXTILLION) {
                return {
                    name: 'HARDCORE',
                    color: 'linear-gradient(135deg, #000000 0%, #8b0000 50%, #000000 100%)',
                    glow: '0 0 20px rgba(139,0,0,1)',
                    stars: 0
                };
            }
            
            // Rarity determination based on price
            if (price >= QUINTILLION) {
                return { 
                    name: 'Secret', 
                    color: 'linear-gradient(135deg, #000000 0%, #8b0000 100%)',
                    glow: '0 0 20px rgba(255,0,0,0.8)',
                    stars: 0
                };
            } else if (price >= 10 * QUADRILLION) {
                return { 
                    name: 'Cosmic', 
                    color: 'linear-gradient(135deg, #9370db 0%, #ba55d3 100%)',
                    glow: '0 0 15px rgba(147,112,219,0.8)',
                    stars: 0
                };
            } else if (price >= 10 * QUADRILLION) {
                // Transcendent 5-Star
                return { 
                    name: 'Transcendent', 
                    color: 'linear-gradient(135deg, #00ffff 0%, #00bfff 100%)',
                    glow: '0 0 15px rgba(0,255,255,0.8)',
                    stars: 5
                };
            } else if (price >= 5 * QUADRILLION) {
                // Transcendent 4-Star
                return { 
                    name: 'Transcendent', 
                    color: 'linear-gradient(135deg, #00ffff 0%, #00bfff 100%)',
                    glow: '0 0 15px rgba(0,255,255,0.8)',
                    stars: 4
                };
            } else if (price >= QUADRILLION) {
                // Transcendent 3-Star
                return { 
                    name: 'Transcendent', 
                    color: 'linear-gradient(135deg, #00ffff 0%, #00bfff 100%)',
                    glow: '0 0 15px rgba(0,255,255,0.8)',
                    stars: 3
                };
            } else if (price >= 500 * TRILLION) {
                // Transcendent 2-Star
                return { 
                    name: 'Transcendent', 
                    color: 'linear-gradient(135deg, #00ffff 0%, #00bfff 100%)',
                    glow: '0 0 15px rgba(0,255,255,0.8)',
                    stars: 2
                };
            } else if (price >= 100 * TRILLION) {
                // Transcendent 1-Star
                return { 
                    name: 'Transcendent', 
                    color: 'linear-gradient(135deg, #00ffff 0%, #00bfff 100%)',
                    glow: '0 0 15px rgba(0,255,255,0.8)',
                    stars: 1
                };
            } else if (price >= TRILLION) {
                return { 
                    name: 'Prismatic', 
                    color: 'linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3)',
                    glow: '0 0 15px rgba(255,0,255,0.8)',
                    stars: 0
                };
            } else if (price >= 10e9) {
                return { 
                    name: 'Divine', 
                    color: 'linear-gradient(135deg, #ffd700 0%, #ffed4e 100%)',
                    glow: '0 0 15px rgba(255,215,0,0.8)',
                    stars: 0
                };
            } else if (price >= 100e6) {
                return { 
                    name: 'Mythical', 
                    color: 'linear-gradient(135deg, #ff0000 0%, #ff69b4 100%)',
                    glow: '0 0 10px rgba(255,0,0,0.6)',
                    stars: 0
                };
            } else if (price >= 1e6) {
                return { 
                    name: 'Legendary', 
                    color: 'linear-gradient(135deg, #ff00ff 0%, #ff1493 100%)',
                    glow: '0 0 10px rgba(255,0,255,0.6)',
                    stars: 0
                };
            } else if (price >= 100000) {
                return { 
                    name: 'Rare', 
                    color: 'linear-gradient(135deg, #0080ff 0%, #00bfff 100%)',
                    glow: '0 0 8px rgba(0,128,255,0.5)',
                    stars: 0
                };
            } else if (price >= 10000) {
                return { 
                    name: 'Uncommon', 
                    color: 'linear-gradient(135deg, #00ff00 0%, #7fff00 100%)',
                    glow: '0 0 5px rgba(0,255,0,0.4)',
                    stars: 0
                };
            } else {
                return { 
                    name: 'Common', 
                    color: 'linear-gradient(135deg, #808080 0%, #a9a9a9 100%)',
                    glow: 'none',
                    stars: 0
                };
            }
        }

        function renderShop() {
            const shopContainer = document.getElementById('shopItems');
            shopContainer.innerHTML = '';

            // Sort items by current price (low to high)
            const sortedItems = [...shopItems].sort((a, b) => a.currentPrice - b.currentPrice);

            sortedItems.forEach(item => {
                const currentPurchases = purchaseCounts[item.id] || 0;
                const isLimitReached = currentPurchases >= purchaseLimit;
                
                // Get rarity based on current price
                const rarity = getRarity(item.currentPrice);
                
                // Tính giảm giá từ shop, ticket VÀ weather
                let totalDiscount = shopDiscount + discountTicket;
                
                // Chỉ áp dụng weather discount cho potions và discount tickets (items không có basePrice cao)
                const isPotionOrTicket = item.basePrice <= 100000 && (
                    item.name.includes('Potion') || 
                    item.name.includes('Vé giảm')
                );
                
                if (isPotionOrTicket) {
                    totalDiscount += getWeatherDiscount();
                }
                
                const discountedPrice = Math.floor(item.currentPrice * (1 - totalDiscount / 100));
                const canBuy = coins >= discountedPrice && !isLimitReached;
                const itemDiv = document.createElement('div');
                itemDiv.className = `shop-item ${!canBuy ? 'disabled' : ''}`;
                
                let priceDisplay = formatNumber(discountedPrice);
                if (totalDiscount > 0) {
                    priceDisplay += ` (-${totalDiscount}%)`;
                }
                
                let limitInfo = '';
                if (isLimitReached) {
                    limitInfo = `<div style="color: #ff6b6b; font-size: 0.9em; margin-top: 5px;">⚠️ ${currentLanguage === 'en' ? 'Purchase limit reached!' : 'Đã đạt giới hạn mua!'}</div>`;
                } else {
                    limitInfo = `<div style="color: #ffd700; font-size: 0.8em; margin-top: 5px;">${t('remaining')}: ${purchaseLimit - currentPurchases}/${purchaseLimit}</div>`;
                }
                
                // Build star display for Transcendent items
                let starDisplay = '';
                if (rarity.stars > 0) {
                    starDisplay = '<div class="rarity-stars">' + '⭐'.repeat(rarity.stars) + '</div>';
                }
                
                // Determine tier class for animations
                let tierClass = '';
                if (rarity.name === 'HARDCORE') tierClass = 'tier-hardcore';
                else if (rarity.name === 'OWNER') tierClass = 'tier-owner';
                else if (rarity.name === 'GOAT') tierClass = 'tier-goat';
                else if (rarity.name === 'STRONGEST') tierClass = 'tier-strongest';
                else if (rarity.name === 'POWEREST') tierClass = 'tier-powerest';
                else if (rarity.name === 'RAINBOW') tierClass = 'tier-rainbow';
                
                // Build rarity badge
                const rarityBadge = `
                    <div class="rarity-badge ${tierClass}" style="background: ${rarity.color}; box-shadow: ${rarity.glow};">
                        ${rarity.name}
                    </div>
                    ${starDisplay}
                `;
                
                itemDiv.innerHTML = `
                    ${rarityBadge}
                    <span class="icon">${item.icon}</span>
                    <div class="item-info">
                        <div class="item-name">${item.name}</div>
                        <div class="item-description">${item.description}</div>
                        <div class="item-owned">${t('owned')}: ${item.owned}</div>
                        ${limitInfo}
                    </div>
                    <button class="buy-button ${!canBuy ? 'disabled' : ''}" onclick="buyItem(${item.id})">
                        ${isLimitReached ? (currentLanguage === 'en' ? 'Sold Out' : 'Hết lượt') : priceDisplay + ' 💰'}
                    </button>
                `;
                shopContainer.appendChild(itemDiv);
            });
        }

        function buyItem(itemId) {
            const item = shopItems.find(i => i.id === itemId);
            const currentPurchases = purchaseCounts[item.id] || 0;
            
            if (currentPurchases >= purchaseLimit) {
                alert('❌ Đã đạt giới hạn mua cho item này! Mua "The God" hoặc Tái sinh để tăng giới hạn.');
                return;
            }
            
            // Tính giảm giá bao gồm weather
            let totalDiscount = shopDiscount + discountTicket;
            
            const isPotionOrTicket = item.basePrice <= 100000 && (
                item.name.includes('Potion') || 
                item.name.includes('Vé giảm')
            );
            
            if (isPotionOrTicket) {
                totalDiscount += getWeatherDiscount();
            }
            
            const discountedPrice = Math.floor(item.currentPrice * (1 - totalDiscount / 100));
            
            if (coins >= discountedPrice) {
                coins -= discountedPrice;
                
                // Xử lý The Primastic
                if (item.id === 19) {
                    const primasticCount = item.owned;
                    const refundChance = 1.2 * (primasticCount + 1);
                    const random = Math.random() * 100;
                    
                    if (random < refundChance) {
                        coins += discountedPrice;
                        alert(`🎉 The Primastic kích hoạt! Hoàn lại ${formatNumber(discountedPrice)} coins!`);
                    }
                }
                
                // Xử lý The Transcendent
                if (item.id === 20) {
                    const transcendentCount = item.owned;
                    const refundChance = 0.8 * (transcendentCount + 1);
                    const random = Math.random() * 100;
                    
                    if (random < refundChance) {
                        coins += discountedPrice * 10;
                        alert(`💫 The Transcendent kích hoạt! Hoàn lại x10 = ${formatNumber(discountedPrice * 10)} coins!`);
                    }
                }
                
                item.effect();
                item.owned++;
                item.currentPrice = Math.floor(item.currentPrice * 2);
                
                purchaseCounts[item.id] = currentPurchases + 1;
                
                updateDisplay();
                renderShop();
            }
        }

        function toggleSettings() {
            const panel = document.getElementById('settingsPanel');
            if (panel.style.display === 'none' || !panel.style.display) {
                panel.style.display = 'block';
            } else {
                panel.style.display = 'none';
            }
        }

        function toggleAdminPanel() {
            const content = document.getElementById('adminPanelContent');
            const btn = document.getElementById('toggleAdminBtn');
            
            if (content.style.display === 'none') {
                // Show
                content.style.display = 'block';
                btn.textContent = '👁️ Ẩn';
                btn.style.background = 'linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%)';
            } else {
                // Hide
                content.style.display = 'none';
                btn.textContent = '👁️ Bỏ Ẩn';
                btn.style.background = 'linear-gradient(135deg, #00ff00 0%, #00cc00 100%)';
            }
        }

        function toggleWeatherPanel() {
            const content = document.getElementById('weatherPanelContent');
            const btn = document.getElementById('toggleWeatherBtn');
            const countHidden = document.getElementById('weatherCountHidden');
            
            if (content.style.display === 'none') {
                // Show
                content.style.display = 'block';
                countHidden.style.display = 'none';
                btn.textContent = '👁️ Ẩn';
                btn.style.background = 'linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%)';
            } else {
                // Hide
                content.style.display = 'none';
                countHidden.style.display = 'block';
                // Update count
                document.getElementById('weatherCountNumber').textContent = activeWeathers.length;
                btn.textContent = '👁️ Bỏ Ẩn';
                btn.style.background = 'linear-gradient(135deg, #00ff00 0%, #00cc00 100%)';
            }
        }

        // Security: Anti-debugging
        (function(){
            const _0xd=()=>{const d=new Date();d.setTime(d.getTime()+100);return d;};
            setInterval(()=>{if(new Date()-_0xd()>100){location.reload();}},1000);
        })();

        // Encrypted admin verification
        const _0xa1b2={
            _k:'68617665686167383137',
            _c:function(s){let r='';for(let i=0;i<s.length;i+=2){r+=String.fromCharCode(parseInt(s.substr(i,2),16));}return r;},
            _v:function(c){return c===this._c(this._k);}
        };

        function checkAdminCode() {
            const code = document.getElementById('adminCode').value;
            const statusDiv = document.getElementById('adminStatus');
            
            if (_0xa1b2._v(code)) {
                isAdmin = true;
                statusDiv.innerHTML = '<div class="admin-status">✅ Admin đã đăng nhập!</div>';
                document.getElementById('adminControls').style.display = 'block';
                document.getElementById('adminCode').disabled = true;
                
                // Clear console
                if(console.clear){console.clear();}
            } else {
                statusDiv.innerHTML = '<div style="color: #ff0000; margin-top: 5px;">❌ Sai mã!</div>';
                setTimeout(() => {
                    statusDiv.innerHTML = '';
                }, 2000);
            }
        }

        // Obfuscated admin functions
        const _0x7f8a=function(){if(isAdmin){coins+=100000;updateDisplay();renderShop();}};
        const _0x9b3c=function(){if(isAdmin){diamonds+=1000;updateDisplay();}};
        const _0x2e4d=function(){if(isAdmin){goldBars+=100;updateDisplay();alert('✅ Đã thêm 100 🏆 Thỏi Vàng!');}};
        
        // Public wrappers (obfuscated internally)
        function addAdminMoney(){_0x7f8a();}
        function addAdminDiamonds(){_0x9b3c();}
        function addAdminGoldBars(){_0x2e4d();}

        function summonPet(petName, petIcon, petMultiplier) {
            if (!isAdmin) return;
            
            const petKey = petName;
            
            // Add pet to ownedPets
            if (!ownedPets[petKey]) {
                ownedPets[petKey] = {
                    name: petName,
                    icon: petIcon,
                    multiplier: petMultiplier,
                    count: 0
                };
            }
            
            ownedPets[petKey].count++;
            
            renderPets();
            updateDisplay();
            
            alert(`✅ Đã triệu hồi ${petIcon} ${petName} (x${petMultiplier})!`);
        }

        function loadGameFromButton() {
            document.getElementById('importFile').click();
        }

        function deleteSaveData() {
            const confirm = window.confirm(
                currentLanguage === 'en' 
                ? '⚠️ DELETE SAVE DATA\n\nAre you sure you want to delete all save data?\nThis action cannot be undone!'
                : '⚠️ XÓA DỮ LIỆU\n\nBạn có chắc muốn xóa toàn bộ dữ liệu?\nHành động này không thể hoàn tác!'
            );
            
            if (confirm) {
                localStorage.clear();
                alert(currentLanguage === 'en' ? '✅ Save data deleted!' : '✅ Đã xóa dữ liệu!');
                location.reload();
            }
        }

        function saveGame() {
            const gameData = {
                coins: coins,
                diamonds: diamonds,
                tickets: tickets,
                goldBars: goldBars,
                goldCodes: goldCodes,
                clickPower: clickPower,
                autoClickers: autoClickers,
                multiplier: multiplier,
                clickCooldown: clickCooldown,
                isAdmin: isAdmin,
                gamePasses: gamePasses,
                inventory: inventory,
                playTime: playTime,
                shopDiscount: shopDiscount,
                rebirthCount: rebirthCount,
                rebirthMultiplier: rebirthMultiplier,
                purchaseLimit: purchaseLimit,
                purchaseCounts: purchaseCounts,
                weatherNextSpawn: weatherNextSpawn,
                ownedPets: ownedPets,
                equippedPets: equippedPets,
                shopItems: shopItems.map(item => ({
                    id: item.id,
                    currentPrice: item.currentPrice,
                    owned: item.owned
                })),
                saveDate: new Date().toISOString()
            };

            const dataStr = JSON.stringify(gameData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `cookie-clicker-save-${Date.now()}.json`;
            link.click();
            
            alert('✅ Game đã được lưu thành công!');
        }

        function loadGame(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const gameData = JSON.parse(e.target.result);
                    
                    coins = gameData.coins || 0;
                    diamonds = gameData.diamonds || 0;
                    tickets = gameData.tickets || 0;
                    goldBars = gameData.goldBars || 0;
                    
                    // Restore used codes
                    if (gameData.goldCodes) {
                        Object.keys(gameData.goldCodes).forEach(code => {
                            if (goldCodes[code]) {
                                goldCodes[code].used = gameData.goldCodes[code].used;
                            }
                        });
                    }
                    clickPower = gameData.clickPower || 1;
                    autoClickers = gameData.autoClickers || 0;
                    multiplier = gameData.multiplier || 1;
                    clickCooldown = gameData.clickCooldown || 0.5;
                    isAdmin = gameData.isAdmin || false;
                    
                    if (gameData.gamePasses) {
                        gamePasses = gameData.gamePasses;
                        updateGamePassUI();
                    }
                    
                    if (gameData.inventory) {
                        inventory = gameData.inventory;
                    }
                    
                    if (gameData.ownedPets) {
                        ownedPets = gameData.ownedPets;
                    }
                    
                    if (gameData.equippedPets) {
                        equippedPets = gameData.equippedPets;
                    }
                    
                    playTime = gameData.playTime || 0;
                    shopDiscount = gameData.shopDiscount || 0;
                    rebirthCount = gameData.rebirthCount || 0;
                    rebirthMultiplier = gameData.rebirthMultiplier || 1;
                    purchaseLimit = gameData.purchaseLimit || 5;
                    purchaseCounts = gameData.purchaseCounts || {};
                    
                    if (gameData.weatherNextSpawn) {
                        weatherNextSpawn = gameData.weatherNextSpawn;
                    }
                    
                    if (gameData.shopItems) {
                        gameData.shopItems.forEach(savedItem => {
                            const item = shopItems.find(i => i.id === savedItem.id);
                            if (item) {
                                item.currentPrice = savedItem.currentPrice;
                                item.owned = savedItem.owned;
                            }
                        });
                    }
                    
                    if (isAdmin) {
                        document.getElementById('adminStatus').innerHTML = '<div class="admin-status">✅ Admin đã đăng nhập!</div>';
                        document.getElementById('adminControls').style.display = 'block';
                        document.getElementById('adminCode').disabled = true;
                    }
                    
                    updateDisplay();
                    renderShop();
                    renderPets();
                    
                    const saveDate = new Date(gameData.saveDate).toLocaleString('vi-VN');
                    alert(`✅ Tải game thành công!\n📅 Lưu lúc: ${saveDate}`);
                } catch (error) {
                    alert('❌ File không hợp lệ! Vui lòng chọn file save đúng.');
                }
            };
            reader.readAsText(file);
            
            event.target.value = '';
        }

        function redeemGamePass() {
            const code = document.getElementById('gamepassCode').value.toUpperCase();
            let success = false;
            let passName = '';

            if (code === 'VIP2025' && !gamePasses.vip) {
                gamePasses.vip = true;
                clickPower += 30;
                clickCooldown = Math.max(0.01, clickCooldown - 0.15);
                autoClickers += 50;
                diamonds += 100;
                passName = 'VIP Pass';
                success = true;
            } else if (code === 'PREMIUM999' && !gamePasses.premium) {
                gamePasses.premium = true;
                clickPower += 100;
                clickCooldown = Math.max(0.01, clickCooldown - 0.2);
                autoClickers += 200;
                multiplier *= 2;
                diamonds += 500;
                passName = 'Premium Pass';
                success = true;
            } else if (code === 'LEGEND777' && !gamePasses.legend) {
                gamePasses.legend = true;
                clickPower += 500;
                clickCooldown = 0.01;
                autoClickers += 1000;
                multiplier *= 5;
                coins += 500000;
                diamonds += 2000;
                passName = 'Legend Pass';
                success = true;
            } else if (code === 'SUPER2025' && !gamePasses.super) {
                gamePasses.super = true;
                clickPower += 1000;
                clickCooldown = 0; // INSTANT!
                autoClickers += 2000;
                multiplier *= 7;
                coins += 1000000; // 1M coins
                diamonds += 5000;
                passName = '💎 SUPER PASS';
                success = true;
            } else if (code === 'INFINITY∞' && !gamePasses.infinity) {
                gamePasses.infinity = true;
                clickPower += 2000;
                clickCooldown = 0;
                autoClickers += 5000;
                multiplier *= 10;
                coins += 5000000; // 5M coins
                diamonds += 10000;
                shopDiscount = 50; // Permanent 50% discount
                passName = '♾️ INFINITY PASS';
                success = true;
            } else if (code === 'QUANTUM888' && !gamePasses.quantum) {
                gamePasses.quantum = true;
                clickPower += 1500;
                clickCooldown = 0;
                autoClickers += 3000;
                multiplier *= 8;
                coins += 2000000; // 2M coins
                diamonds += 7000;
                passName = '⚛️ QUANTUM PASS';
                success = true;
            } else if (code === 'COSMIC999' && !gamePasses.cosmic) {
                gamePasses.cosmic = true;
                clickPower += 5000;
                clickCooldown = 0;
                autoClickers += 10000;
                multiplier *= 15;
                coins += 10000000; // 10M coins
                diamonds += 20000;
                goldBars += 1000;
                // Unlock all pets
                pets.forEach(pet => pet.owned = true);
                passName = '🌠 COSMIC PASS';
                success = true;
            } else if (gamePasses.vip && code === 'VIP2025') {
                alert('❌ Bạn đã sở hữu VIP Pass rồi!');
                return;
            } else if (gamePasses.premium && code === 'PREMIUM999') {
                alert('❌ Bạn đã sở hữu Premium Pass rồi!');
                return;
            } else if (gamePasses.legend && code === 'LEGEND777') {
                alert('❌ Bạn đã sở hữu Legend Pass rồi!');
                return;
            } else if (gamePasses.super && code === 'SUPER2025') {
                alert('❌ Bạn đã sở hữu Super Pass rồi!');
                return;
            } else if (gamePasses.infinity && code === 'INFINITY∞') {
                alert('❌ Bạn đã sở hữu Infinity Pass rồi!');
                return;
            } else if (gamePasses.quantum && code === 'QUANTUM888') {
                alert('❌ Bạn đã sở hữu Quantum Pass rồi!');
                return;
            } else if (gamePasses.cosmic && code === 'COSMIC999') {
                alert('❌ Bạn đã sở hữu Cosmic Pass rồi!');
                return;
            } else {
                alert('❌ Code không hợp lệ!');
                return;
            }

            if (success) {
                updateGamePassUI();
                updateDisplay();
                renderShop();
                document.getElementById('gamepassCode').value = '';
                alert(`✅ Đã kích hoạt ${passName} thành công!`);
            }
        }

        function buyPotion(type, price, currency = 'coins') {
            console.log(`🧪 Buying Potion ${type}: ${price} ${currency}`);
            
            // Validate currency
            if (currency === 'coins') {
                if (coins < price) {
                    alert('❌ Không đủ coins!');
                    return;
                }
                coins -= price;
            } else if (currency === 'diamonds') {
                if (diamonds < price) {
                    alert('❌ Không đủ diamonds!');
                    return;
                }
                diamonds -= price;
            } else {
                alert('❌ Loại tiền không hợp lệ!');
                return;
            }
            
            // Add potion to inventory
            if (type === '2x') {
                inventory.potion_2x++;
            } else if (type === '3x') {
                inventory.potion_3x++;
            } else if (type === '4x') {
                inventory.potion_4x++;
            } else if (type === '5x') {
                inventory.potion_5x++;
            } else if (type === '6x') {
                inventory.potion_6x++;
            } else if (type === '10x') {
                inventory.potion_10x++;
            } else {
                alert('❌ Loại potion không hợp lệ!');
                return;
            }
            
            updateDisplay();
            renderShop();
            saveToLocalStorage(true);
            
            const currencyIcon = currency === 'coins' ? '💰' : '💎';
            alert(`✅ Đã mua Potion ${type} thành công!\n\nCòn lại: ${currency === 'coins' ? formatNumber(coins) : formatNumber(diamonds)} ${currencyIcon}`);
            
            console.log(`✅ Potion purchased successfully`);
            console.log(`📦 Inventory:`, inventory);
        }

        function buyDiscountTicket(percent, price) {
            if (coins >= price) {
                if (discountTicket > 0) {
                    alert('⚠️ Đã có vé giảm giá đang hoạt động! Vui lòng đợi hết hiệu lực.');
                    return;
                }
                
                coins -= price;
                discountTicket = percent;
                discountTicketTimer = 60;
                
                const timerElement = document.getElementById('discountTicketTimer');
                timerElement.classList.add('active');
                document.getElementById('ticketDiscountPercent').textContent = percent;
                
                discountTicketInterval = setInterval(() => {
                    discountTicketTimer--;
                    document.getElementById('ticketTimeLeft').textContent = discountTicketTimer;
                    
                    if (discountTicketTimer <= 0) {
                        clearInterval(discountTicketInterval);
                        discountTicket = 0;
                        timerElement.classList.remove('active');
                        updateDisplay();
                        renderShop();
                    }
                }, 1000);
                
                updateDisplay();
                renderShop();
                alert(`✅ Đã kích hoạt vé giảm giá ${percent}% trong 60 giây!`);
            } else {
                alert('❌ Không đủ tiền!');
            }
        }

        function usePotion(type, multiplierValue) {
            let hasPotion = false;
            
            // Check if player has the potion
            if (type === '2x' && inventory.potion_2x > 0) {
                inventory.potion_2x--;
                hasPotion = true;
            } else if (type === '3x' && inventory.potion_3x > 0) {
                inventory.potion_3x--;
                hasPotion = true;
            } else if (type === '4x' && inventory.potion_4x > 0) {
                inventory.potion_4x--;
                hasPotion = true;
            } else if (type === '5x' && inventory.potion_5x > 0) {
                inventory.potion_5x--;
                hasPotion = true;
            } else if (type === '6x' && inventory.potion_6x > 0) {
                inventory.potion_6x--;
                hasPotion = true;
            } else if (type === '10x' && inventory.potion_10x > 0) {
                inventory.potion_10x--;
                hasPotion = true;
            }
            
            if (!hasPotion) {
                alert('❌ Không có thuốc này trong túi!');
                return;
            }
            
            if (activePotion) {
                alert('⚠️ Đã có thuốc đang hoạt động! Vui lòng đợi hết hiệu lực.');
                // Refund the potion
                if (type === '2x') inventory.potion_2x++;
                else if (type === '3x') inventory.potion_3x++;
                else if (type === '4x') inventory.potion_4x++;
                else if (type === '5x') inventory.potion_5x++;
                else if (type === '6x') inventory.potion_6x++;
                else if (type === '10x') inventory.potion_10x++;
                return;
            }
            
            const oldMultiplier = multiplier;
            activePotion = type;
            multiplier = multiplier * multiplierValue;
            potionTimer = 60;
            
            const timerElement = document.getElementById('potionTimer');
            timerElement.classList.add('active');
            
            potionInterval = setInterval(() => {
                potionTimer--;
                document.getElementById('potionTimerText').textContent = `${type} - ${potionTimer}s`;
                
                if (potionTimer <= 0) {
                    clearInterval(potionInterval);
                    multiplier = oldMultiplier;
                    activePotion = null;
                    timerElement.classList.remove('active');
                    updateDisplay();
                }
            }, 1000);
            
            updateDisplay();
            saveToLocalStorage(true);
            
            console.log(`✅ Used Potion ${type} (x${multiplierValue})`);
        }

        function resetAFKTimer() {
            if (isAfk || isBanned) return;
            
            afkTimeLeft = 1800;
            document.getElementById('afkWarning').classList.remove('active');
            
            if (afkTimer) {
                clearInterval(afkTimer);
            }
            
            afkTimer = setInterval(() => {
                afkTimeLeft--;
                
                if (afkTimeLeft <= 60 && afkTimeLeft > 0) {
                    document.getElementById('afkWarning').classList.add('active');
                    document.getElementById('afkCountdown').textContent = afkTimeLeft;
                }
                
                if (afkTimeLeft <= 0) {
                    clearInterval(afkTimer);
                    activateAFK();
                }
            }, 1000);
        }

        function activateAFK() {
            isAfk = true;
            document.getElementById('afkOverlay').classList.add('active');
            document.getElementById('afkWarning').classList.remove('active');
        }

        function resumeFromAFK() {
            isAfk = false;
            document.getElementById('afkOverlay').classList.remove('active');
            resetAFKTimer();
        }

        function updateRebirthUI() {
            // Công thức: 100K lần đầu, sau đó x5 mỗi lần
            const nextReq = 100000 * Math.pow(5, rebirthCount);
            
            const nextMult = rebirthMultiplier + 0.75;
            const canRebirth = coins >= nextReq;
            
            document.getElementById('rebirthCountDisplay').textContent = rebirthCount;
            document.getElementById('rebirthMultiplierStat').textContent = `x${rebirthMultiplier.toFixed(2)}`;
            document.getElementById('nextRebirthReq').textContent = `${nextReq.toLocaleString()} coins`;
            document.getElementById('nextRebirthMult').textContent = `x${nextMult.toFixed(2)}`;
            document.getElementById('rebirthReqText').textContent = nextReq.toLocaleString();
            
            const rebirthBtn = document.getElementById('rebirthButton');
            if (canRebirth) {
                rebirthBtn.classList.remove('disabled');
            } else {
                rebirthBtn.classList.add('disabled');
            }
        }

        function performRebirth() {
            // Công thức: 100K lần đầu, sau đó x5 mỗi lần
            const nextReq = 100000 * Math.pow(5, rebirthCount);
            
            if (coins < nextReq) {
                alert('❌ Không đủ coins để tái sinh!');
                return;
            }
            
            const confirm = window.confirm(
                `🔄 XÁC NHẬN TÁI SINH LẦN ${rebirthCount + 1}\n\n` +
                `Bạn sẽ mất:\n` +
                `- Tất cả coins\n` +
                `- Tất cả vật phẩm đã mua\n` +
                `- Click power, Auto clickers, Multiplier\n` +
                `- Cooldown về mặc định\n` +
                `- Giảm giá về 0%\n` +
                `- Số lần mua items về 0\n\n` +
                `Bạn sẽ giữ:\n` +
                `- Game Passes\n` +
                `- Túi đồ (Potions)\n` +
                `- Thời gian chơi\n` +
                `- Tất cả Pets\n\n` +
                `Bạn sẽ nhận:\n` +
                `- +0.75x thu nhập vĩnh viễn (${rebirthMultiplier.toFixed(2)} → ${(rebirthMultiplier + 0.75).toFixed(2)})\n` +
                `- +5 giới hạn mua vật phẩm (${purchaseLimit} → ${purchaseLimit + 5})\n` +
                `- +500 💎 Kim Cương\n\n` +
                `Tiếp tục?`
            );
            
            if (!confirm) return;
            
            coins = 0;
            clickPower = 1;
            autoClickers = 0;
            multiplier = 1;
            clickCooldown = 0.5;
            shopDiscount = 0;
            
            shopItems.forEach(item => {
                item.currentPrice = item.basePrice;
                item.owned = 0;
            });
            
            purchaseCounts = {};
            
            rebirthCount++;
            rebirthMultiplier += 0.75;
            purchaseLimit += 5;
            diamonds += 500; // Thêm 500 kim cương
            
            updateDisplay();
            renderShop();
            updateRebirthUI();
            
            alert(`✅ Tái sinh thành công!\n🌟 Thu nhập mới: x${rebirthMultiplier.toFixed(2)}\n🎯 Giới hạn mua mới: ${purchaseLimit}`);
        }

        function updateGamePassUI() {
            if (gamePasses.vip) {
                document.getElementById('vipCard').classList.add('owned');
                document.getElementById('vipStatus').className = 'gamepass-status owned';
                document.getElementById('vipStatus').textContent = '✅ Đã sở hữu';
            }

            if (gamePasses.premium) {
                document.getElementById('premiumCard').classList.add('owned');
                document.getElementById('premiumStatus').className = 'gamepass-status owned';
                document.getElementById('premiumStatus').textContent = '✅ Đã sở hữu';
            }

            if (gamePasses.legend) {
                document.getElementById('legendCard').classList.add('owned');
                document.getElementById('legendStatus').className = 'gamepass-status owned';
                document.getElementById('legendStatus').textContent = '✅ Đã sở hữu';
            }
            
            if (gamePasses.super) {
                document.getElementById('superCard').classList.add('owned');
                document.getElementById('superStatus').className = 'gamepass-status owned';
                document.getElementById('superStatus').textContent = '✅ Đã sở hữu';
            }
            
            if (gamePasses.infinity) {
                document.getElementById('infinityCard').classList.add('owned');
                document.getElementById('infinityStatus').className = 'gamepass-status owned';
                document.getElementById('infinityStatus').textContent = '✅ Đã sở hữu';
            }
            
            if (gamePasses.quantum) {
                document.getElementById('quantumCard').classList.add('owned');
                document.getElementById('quantumStatus').className = 'gamepass-status owned';
                document.getElementById('quantumStatus').textContent = '✅ Đã sở hữu';
            }
            
            if (gamePasses.cosmic) {
                document.getElementById('cosmicCard').classList.add('owned');
                document.getElementById('cosmicStatus').className = 'gamepass-status owned';
                document.getElementById('cosmicStatus').textContent = '✅ Đã sở hữu';
            }
            
            // Update 4 premium passes
            if (gamePasses.epic) {
                document.getElementById('epicCard').classList.add('owned');
                document.getElementById('epicStatus').className = 'gamepass-status owned';
                document.getElementById('epicStatus').textContent = '✅ Đã sở hữu';
            }
            
            if (gamePasses.prismatic) {
                document.getElementById('prismaticCard').classList.add('owned');
                document.getElementById('prismaticStatus').className = 'gamepass-status owned';
                document.getElementById('prismaticStatus').textContent = '✅ Đã sở hữu';
            }
            
            if (gamePasses.divine) {
                document.getElementById('divineCard').classList.add('owned');
                document.getElementById('divineStatus').className = 'gamepass-status owned';
                document.getElementById('divineStatus').textContent = '✅ Đã sở hữu';
            }
            
            if (gamePasses.secret) {
                document.getElementById('secretCard').classList.add('owned');
                document.getElementById('secretStatus').className = 'gamepass-status owned';
                document.getElementById('secretStatus').textContent = '✅ Đã sở hữu';
            }
            
            // Check SECRET pass unlock condition
            checkSecretPassUnlock();
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // PREMIUM GAMEPASS PURCHASE FUNCTION (GOLD BAR EXCLUSIVE)
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        function buyPremiumPass(passType, cost) {
            console.log(`🎮 buyPremiumPass called: ${passType}, cost: ${cost}`);
            console.log(`💰 Current Gold Bars: ${goldBars}`);
            
            // Validation checks
            if (!passType || typeof cost !== 'number' || cost <= 0) {
                alert('❌ Lỗi: Thông tin pass không hợp lệ!');
                console.error('Invalid pass parameters');
                return;
            }
            
            // Check if already owned
            if (gamePasses[passType]) {
                alert(`❌ Bạn đã sở hữu ${passType.toUpperCase()} Pass rồi!`);
                console.log(`Already owned: ${passType}`);
                return;
            }
            
            // Check gold bars balance
            if (goldBars < cost) {
                alert(`❌ Không đủ Gold Bars!\n\nCần: ${cost} 🏆\nHiện có: ${goldBars} 🏆\nThiếu: ${cost - goldBars} 🏆`);
                console.log(`Insufficient gold bars: need ${cost}, have ${goldBars}`);
                return;
            }
            
            // Confirmation
            const confirmMsg = currentLanguage === 'en' 
                ? `🎮 Purchase ${passType.toUpperCase()} Pass?\n\nCost: ${cost} Gold Bars 🏆\nYou have: ${goldBars} Gold Bars\n\nThis pass will replace any active pass.`
                : `🎮 Mua ${passType.toUpperCase()} Pass?\n\nGiá: ${cost} Gold Bars 🏆\nBạn có: ${goldBars} Gold Bars\n\nPass này sẽ thay thế pass đang hoạt động.`;
            
            if (!confirm(confirmMsg)) return;
            
            // Deduct gold bars
            goldBars -= cost;
            if (goldBars < 0) goldBars = 0; // Safety check
            
            // Activate pass
            gamePasses[passType] = true;
            
            // Apply pass bonuses (PARANOID: validate all values)
            let bonusCoins = 0;
            let bonusMultiplier = 1;
            let bonusClickPower = 0;
            let bonusAutoClickers = 0;
            let passName = '';
            
            switch(passType) {
                case 'epic':
                    bonusCoins = 100000;
                    bonusMultiplier = 4;
                    bonusClickPower = 500;
                    bonusAutoClickers = 10;
                    passName = '⚔️ EPIC PASS';
                    break;
                    
                case 'prismatic':
                    bonusCoins = 500000;
                    bonusMultiplier = 6;
                    bonusClickPower = 1000;
                    bonusAutoClickers = 20;
                    passName = '🌈 PRISMATIC PASS';
                    // Add rainbow click effect
                    addPrismaticEffect();
                    break;
                    
                case 'divine':
                    bonusCoins = 1000000;
                    bonusMultiplier = 12;
                    bonusClickPower = 2000;
                    bonusAutoClickers = 50;
                    passName = '✨ DIVINE PASS';
                    // Add divine aura effect
                    addDivineEffect();
                    break;
                    
                case 'secret':
                    bonusCoins = 5000000;
                    bonusMultiplier = 18;
                    bonusClickPower = 3000;
                    bonusAutoClickers = 100;
                    passName = '🔒 SECRET PASS';
                    // Add glitch effect
                    addSecretEffect();
                    break;
                    
                default:
                    alert('❌ Lỗi: Pass type không hợp lệ!');
                    goldBars += cost; // Refund
                    return;
            }
            
            // Validate bonuses (PARANOID)
            bonusCoins = Math.max(0, Math.min(bonusCoins, 999999999999));
            bonusMultiplier = Math.max(1, Math.min(bonusMultiplier, 1000));
            bonusClickPower = Math.max(0, Math.min(bonusClickPower, 999999));
            bonusAutoClickers = Math.max(0, Math.min(bonusAutoClickers, 1000));
            
            // Apply bonuses
            coins += bonusCoins;
            multiplier *= bonusMultiplier;
            clickPower += bonusClickPower;
            autoClickers += bonusAutoClickers;
            
            // Update UI
            updateDisplay();
            updateGamePassUI();
            
            // Save game after purchase
            saveToLocalStorage(true);
            
            // Success message
            const successMsg = currentLanguage === 'en'
                ? `✅ ${passName} Activated!\n\n🎁 Instant Bonus: ${formatNumber(bonusCoins)} coins\n🎯 Multiplier: x${bonusMultiplier}\n⚡ Click Power: +${bonusClickPower}\n🤖 Auto Clickers: +${bonusAutoClickers}/s\n\n💰 Gold Bars Remaining: ${goldBars}`
                : `✅ Đã kích hoạt ${passName}!\n\n🎁 Thưởng ngay: ${formatNumber(bonusCoins)} coins\n🎯 Hệ số nhân: x${bonusMultiplier}\n⚡ Sức mạnh click: +${bonusClickPower}\n🤖 Auto Clickers: +${bonusAutoClickers}/s\n\n💰 Gold Bars còn lại: ${goldBars}`;
            
            alert(successMsg);
            
            console.log(`✅ Premium Pass Purchased: ${passType}`);
            console.log(`💰 Cost: ${cost} Gold Bars`);
            console.log(`🏆 Remaining: ${goldBars} Gold Bars`);
        }
        
        // Check if SECRET pass should be unlocked
        function checkSecretPassUnlock() {
            const secretCard = document.getElementById('secretCard');
            const secretBtn = secretCard?.querySelector('.buy-gamepass-btn');
            
            if (!secretCard) return;
            
            // Unlock conditions: Rebirth 10+ OR Playtime 10h+
            const rebirthCondition = rebirthCount >= 10;
            const timeCondition = playTime >= (10 * 3600); // 10 hours
            
            if (rebirthCondition || timeCondition) {
                secretCard.style.display = 'block';
                if (secretBtn && !gamePasses.secret) {
                    secretBtn.disabled = false;
                    secretBtn.textContent = '🔓 Mua với 1000 Gold Bars';
                }
            } else {
                secretCard.style.display = 'none';
            }
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // DIAMOND-BASED GAMEPASS PURCHASE (for modern passes section)
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        function buyGamePass(passType) {
            console.log(`🎮 buyGamePass called: ${passType}`);
            console.log(`💎 Current Diamonds: ${diamonds}`);
            
            // Validate input
            if (!passType || typeof passType !== 'string') {
                alert('❌ Lỗi: Pass type không hợp lệ!');
                console.error('Invalid passType');
                return;
            }
            
            // Map passType to correct key (avoid conflicts)
            const passKeyMap = {
                'super': 'superDiamond',  // Diamond super pass uses different key
                'starter': 'starter',
                'insane': 'insane',
                'transcendent': 'transcendent'
            };
            
            const passKey = passKeyMap[passType];
            if (!passKey) {
                alert(`❌ Pass type "${passType}" không hợp lệ!`);
                console.error(`Invalid pass type: ${passType}`);
                return;
            }
            
            console.log(`Mapped to passKey: ${passKey}`);
            
            // Define pass configurations
            const passes = {
                'super': {
                    name: '🌟 SUPER PASS',
                    cost: 5000,
                    currency: 'diamonds',
                    bonuses: {
                        coins: 1000000,
                        clickPower: 1000,
                        autoClickers: 2000,
                        multiplier: 7,
                        cooldown: 0
                    }
                },
                'starter': {
                    name: '💎 STARTER BOOST',
                    cost: 500,
                    currency: 'diamonds',
                    bonuses: {
                        coins: 100000,
                        clickPower: 100,
                        autoClickers: 50,
                        multiplier: 2
                    }
                },
                'insane': {
                    name: '🔥 INSANE CLICKER',
                    cost: 1500,
                    currency: 'diamonds',
                    bonuses: {
                        clickPower: 300,
                        autoClickers: 500,
                        multiplier: 3,
                        cooldownReduction: 0.7 // -70%
                    }
                },
                'transcendent': {
                    name: '🌈 TRANSCENDENT',
                    cost: 3000,
                    currency: 'diamonds',
                    bonuses: {
                        clickPower: 500,
                        autoClickers: 1000,
                        multiplier: 5
                    }
                }
            };
            
            // Check if pass exists
            const pass = passes[passType];
            if (!pass) {
                alert(`❌ Pass "${passType}" không tồn tại!`);
                return;
            }
            
            // Check if already owned (prevent duplicate purchase)
            if (gamePasses[passKey]) {
                alert(`❌ Bạn đã sở hữu ${pass.name} rồi!`);
                return;
            }
            
            // Check currency balance
            if (pass.currency === 'diamonds') {
                if (diamonds < pass.cost) {
                    alert(`❌ Không đủ Diamonds!\n\nCần: ${pass.cost} 💎\nHiện có: ${diamonds} 💎\nThiếu: ${pass.cost - diamonds} 💎`);
                    return;
                }
            }
            
            // Confirmation
            const confirmMsg = `🎮 Mua ${pass.name}?\n\nGiá: ${pass.cost} ${pass.currency === 'diamonds' ? '💎 Diamonds' : '🏆 Gold Bars'}\nBạn có: ${pass.currency === 'diamonds' ? diamonds : goldBars}\n\nXác nhận mua?`;
            
            if (!confirm(confirmMsg)) return;
            
            // Deduct currency
            if (pass.currency === 'diamonds') {
                diamonds -= pass.cost;
                if (diamonds < 0) diamonds = 0; // Safety
            }
            
            // Mark as owned
            gamePasses[passKey] = true;
            
            // Apply bonuses (PARANOID: validate all)
            const bonuses = pass.bonuses;
            
            if (bonuses.coins) {
                const safeCoins = Math.max(0, Math.min(bonuses.coins, 999999999999));
                coins += safeCoins;
            }
            
            if (bonuses.clickPower) {
                const safePower = Math.max(0, Math.min(bonuses.clickPower, 999999));
                clickPower += safePower;
            }
            
            if (bonuses.autoClickers) {
                const safeAuto = Math.max(0, Math.min(bonuses.autoClickers, 10000));
                autoClickers += safeAuto;
            }
            
            if (bonuses.multiplier) {
                const safeMult = Math.max(1, Math.min(bonuses.multiplier, 1000));
                multiplier *= safeMult;
            }
            
            if (bonuses.cooldown !== undefined) {
                clickCooldown = Math.max(0, bonuses.cooldown);
            }
            
            if (bonuses.cooldownReduction) {
                const reduction = Math.max(0, Math.min(bonuses.cooldownReduction, 1));
                clickCooldown = Math.max(0.01, clickCooldown * (1 - reduction));
            }
            
            // Update UI
            updateDisplay();
            
            // Save game after purchase
            saveToLocalStorage(true);
            
            // Success message
            let bonusText = '';
            if (bonuses.coins) bonusText += `\n💰 +${formatNumber(bonuses.coins)} coins`;
            if (bonuses.clickPower) bonusText += `\n⚡ +${bonuses.clickPower} Click Power`;
            if (bonuses.autoClickers) bonusText += `\n🤖 +${bonuses.autoClickers} Auto Clickers`;
            if (bonuses.multiplier) bonusText += `\n✖️ x${bonuses.multiplier} Multiplier`;
            if (bonuses.cooldown === 0) bonusText += `\n⚡ Click Cooldown = 0s (INSTANT!)`;
            if (bonuses.cooldownReduction) bonusText += `\n⚡ Cooldown giảm ${(bonuses.cooldownReduction * 100).toFixed(0)}%`;
            
            alert(`✅ Đã kích hoạt ${pass.name}!${bonusText}\n\n💎 Diamonds còn lại: ${diamonds}`);
            
            console.log(`✅ Game Pass Purchased: ${passType}`);
            console.log(`💎 Cost: ${pass.cost} ${pass.currency}`);
            console.log(`💎 Remaining: ${diamonds} diamonds`);
        }
        
        // Visual effects for premium passes
        function addPrismaticEffect() {
            // Add rainbow effect to cookie button
            const cookie = document.getElementById('cookie');
            if (cookie) {
                cookie.style.filter = 'hue-rotate(0deg)';
                cookie.style.animation = 'hueRotate 3s linear infinite';
            }
        }
        
        function addDivineEffect() {
            // Add divine glow to cookie
            const cookie = document.getElementById('cookie');
            if (cookie) {
                cookie.style.boxShadow = '0 0 40px rgba(255,215,0,0.8), 0 0 80px rgba(255,255,255,0.6)';
            }
        }
        
        function addSecretEffect() {
            // Add glitch effect
            const cookie = document.getElementById('cookie');
            if (cookie) {
                cookie.style.animation = 'glitchEffect 4s ease-in-out infinite';
            }
        }

        // ===== EGG & PETS SYSTEM =====
        function renderEggShop() {
            const eggGrid = document.getElementById('eggGrid');
            eggGrid.innerHTML = '';
            
            eggShop.forEach(egg => {
                const eggCard = document.createElement('div');
                eggCard.className = 'egg-card';
                
                eggCard.innerHTML = `
                    <div class="egg-icon">${egg.icon}</div>
                    <div class="egg-name">${egg.name}</div>
                    <div class="egg-price">💎 ${egg.price}</div>
                    <button class="egg-details-btn" onclick="event.stopPropagation(); showEggDetails(${egg.id})">📊 Xem Tỷ Lệ</button>
                    <button class="admin-button" onclick="event.stopPropagation(); buyEgg(${egg.id})" style="margin-top: 10px; width: 100%;">Mua Trứng</button>
                `;
                
                eggGrid.appendChild(eggCard);
            });
        }

        function showEggDetails(eggId) {
            const egg = eggShop.find(e => e.id === eggId);
            if (!egg) return;
            
            const modal = document.getElementById('eggDetailsModal');
            const overlay = document.getElementById('eggDetailsOverlay');
            
            let petsHTML = '';
            egg.pets.forEach(pet => {
                let rarity = 'common';
                if (pet.chance < 1) rarity = 'legendary';
                else if (pet.chance < 5) rarity = 'epic';
                else if (pet.chance < 15) rarity = 'rare';
                
                petsHTML += `
                    <div class="pet-chance-item ${rarity}">
                        <div class="pet-chance-info">
                            <div class="pet-chance-icon">${pet.icon}</div>
                            <div>
                                <div class="pet-chance-name">${pet.name}</div>
                                <div class="pet-chance-mult">x${pet.multiplier} multiplier</div>
                            </div>
                        </div>
                        <div class="pet-chance-percent">${pet.chance}%</div>
                    </div>
                `;
            });
            
            modal.innerHTML = `
                <div class="egg-details-title">${egg.icon} ${egg.name}</div>
                <div style="color: #00ffff; font-size: 1.2em; margin-bottom: 10px;">Giá: 💎 ${egg.price}</div>
                <div style="margin-bottom: 15px; color: #ddd;">Tỷ lệ nở ra các pet:</div>
                <div class="pet-chance-list">
                    ${petsHTML}
                </div>
                <button class="close-modal-btn" onclick="closeEggDetails()">Đóng</button>
            `;
            
            modal.style.display = 'block';
            overlay.style.display = 'block';
        }

        function closeEggDetails() {
            document.getElementById('eggDetailsModal').style.display = 'none';
            document.getElementById('eggDetailsOverlay').style.display = 'none';
        }

        function buyEgg(eggId) {
            const egg = eggShop.find(e => e.id === eggId);
            
            if (diamonds < egg.price) {
                alert(`❌ Không đủ kim cương! Cần ${egg.price} 💎`);
                return;
            }
            
            diamonds -= egg.price;
            hatchEgg(egg);
            updateDisplay();
        }

        function hatchEgg(egg) {
            // Calculate which pet to hatch based on chances
            const random = Math.random() * 100;
            let cumulativeChance = 0;
            let hatchedPet = null;
            
            for (const pet of egg.pets) {
                cumulativeChance += pet.chance;
                if (random <= cumulativeChance) {
                    hatchedPet = pet;
                    break;
                }
            }
            
            if (!hatchedPet) {
                hatchedPet = egg.pets[egg.pets.length - 1];
            }
            
            // Add pet to collection with mutation support
            const petKey = hatchedPet.name + '_normal'; // All new pets start as normal
            if (!ownedPets[petKey]) {
                ownedPets[petKey] = {
                    ...hatchedPet,
                    baseName: hatchedPet.name,
                    mutation: 'normal',
                    count: 0
                };
            }
            ownedPets[petKey].count++;
            
            // Show hatch animation
            showHatchAnimation(egg, hatchedPet);
            
            // Update pets display
            renderPets();
            updateTradeUpPetList();
        }

        function showHatchAnimation(egg, pet) {
            const animDiv = document.getElementById('hatchAnimation');
            animDiv.style.display = 'block';
            
            // Phase 1: Shaking egg
            animDiv.innerHTML = `
                <div class="hatch-animation">
                    <div class="hatch-egg">${egg.icon}</div>
                    <div class="hatch-text">Đang nở...</div>
                </div>
            `;
            
            // Phase 2: Show result after 2 seconds
            setTimeout(() => {
                animDiv.innerHTML = `
                    <div class="hatch-animation">
                        <div class="hatch-result">${pet.icon}</div>
                        <div class="hatch-text">🎉 ${pet.name}!</div>
                        <div class="hatch-multiplier">x${pet.multiplier} Thu nhập</div>
                        <button class="admin-button" onclick="closeHatchAnimation()" style="margin-top: 20px;">OK</button>
                    </div>
                `;
            }, 2000);
        }

        function closeHatchAnimation() {
            document.getElementById('hatchAnimation').style.display = 'none';
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // TRADE-UP SYSTEM
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        const MUTATION_MULTIPLIERS = {
            'normal': 1,
            'gold': 2,
            'diamond': 2.5,
            'rainbow': 3,
            'transcendent': 5
        };
        
        const MUTATION_UPGRADES = {
            'normal': 'gold',
            'gold': 'diamond',
            'diamond': 'rainbow',
            'rainbow': 'transcendent',
            'transcendent': null // Max tier
        };
        
        const MUTATION_NAMES = {
            'normal': '⚪ Normal',
            'gold': '🟡 Gold',
            'diamond': '💎 Diamond',
            'rainbow': '🌈 Rainbow',
            'transcendent': '✨ Transcendent'
        };
        
        function updateTradeUpPetList() {
            const select = document.getElementById('tradeUpPetType');
            if (!select) return;
            
            select.innerHTML = '<option value="">-- Chọn Pet --</option>';
            
            // Get unique base pet names
            const baseNames = new Set();
            Object.values(ownedPets).forEach(pet => {
                if (pet.baseName) baseNames.add(pet.baseName);
            });
            
            baseNames.forEach(name => {
                select.innerHTML += `<option value="${name}">${name}</option>`;
            });
        }
        
        function updateTradeUpDisplay() {
            const petType = document.getElementById('tradeUpPetType')?.value;
            const mutation = document.getElementById('tradeUpMutation')?.value;
            const statusDiv = document.getElementById('tradeUpStatus');
            const button = document.getElementById('tradeUpButton');
            
            if (!petType || !mutation) {
                statusDiv.innerHTML = 'Chọn loại pet và cấp độ để bắt đầu';
                button.disabled = true;
                button.style.opacity = '0.5';
                return;
            }
            
            const petKey = petType + '_' + mutation;
            const count = ownedPets[petKey]?.count || 0;
            const nextMutation = MUTATION_UPGRADES[mutation];
            
            if (!nextMutation) {
                statusDiv.innerHTML = `<div style="color: #ffd700;">✨ ${petType} đã ở cấp độ cao nhất!</div>`;
                button.disabled = true;
                button.style.opacity = '0.5';
                return;
            }
            
            if (count < 5) {
                statusDiv.innerHTML = `
                    <div style="color: #ff6b6b;">
                        ❌ Không đủ pets!<br>
                        Hiện có: ${count}/5 ${MUTATION_NAMES[mutation]} ${petType}
                    </div>
                `;
                button.disabled = true;
                button.style.opacity = '0.5';
            } else {
                statusDiv.innerHTML = `
                    <div style="color: #00ff00;">
                        ✅ Đủ điều kiện!<br>
                        Sẽ dùng: 5x ${MUTATION_NAMES[mutation]} ${petType}<br>
                        Nâng lên: ${MUTATION_NAMES[nextMutation]} ${petType}<br>
                        <br>
                        <div style="color: #ffd700;">Tỉ lệ: 25% Thành công | 75% Thất bại</div>
                        <div style="color: #ff6b6b; font-size: 0.9em;">Thất bại = Mất tất cả 5 pets!</div>
                    </div>
                `;
                button.disabled = false;
                button.style.opacity = '1';
            }
        }
        
        function attemptTradeUp() {
            const petType = document.getElementById('tradeUpPetType')?.value;
            const mutation = document.getElementById('tradeUpMutation')?.value;
            
            if (!petType || !mutation) {
                alert('❌ Vui lòng chọn loại pet và cấp độ!');
                return;
            }
            
            const petKey = petType + '_' + mutation;
            const count = ownedPets[petKey]?.count || 0;
            const nextMutation = MUTATION_UPGRADES[mutation];
            
            // Validation
            if (count < 5) {
                alert(`❌ Không đủ pets! Cần 5 ${MUTATION_NAMES[mutation]} ${petType}, hiện có ${count}.`);
                return;
            }
            
            if (!nextMutation) {
                alert('❌ Pet đã ở cấp độ cao nhất!');
                return;
            }
            
            // Confirmation
            const confirmMsg = `🔄 XÁC NHẬN TRADE-UP\n\nSẽ dùng: 5x ${MUTATION_NAMES[mutation]} ${petType}\nNâng lên: 1x ${MUTATION_NAMES[nextMutation]} ${petType}\n\n⚠️ TỈ LỆ:\n✅ Thành công: 25%\n❌ Thất bại: 75% (MẤT TẤT CẢ 5 PETS)\n\nBạn có chắc chắn?`;
            
            if (!confirm(confirmMsg)) {
                return;
            }
            
            // Deduct pets
            ownedPets[petKey].count -= 5;
            if (ownedPets[petKey].count <= 0) {
                delete ownedPets[petKey];
            }
            
            // Roll for success (25% chance)
            const success = Math.random() < 0.25;
            
            if (success) {
                // Success! Add upgraded pet
                const newPetKey = petType + '_' + nextMutation;
                if (!ownedPets[newPetKey]) {
                    // Create new entry based on original pet
                    const basePet = Object.values(ownedPets).find(p => p.baseName === petType) || 
                                   Object.values(ownedPets).find(p => p.name && p.name.includes(petType));
                    
                    if (basePet) {
                        ownedPets[newPetKey] = {
                            ...basePet,
                            baseName: petType,
                            mutation: nextMutation,
                            count: 0
                        };
                    } else {
                        alert('❌ Lỗi: Không tìm thấy thông tin pet gốc!');
                        return;
                    }
                }
                ownedPets[newPetKey].count++;
                
                // Success animation
                showTradeUpResult(true, petType, mutation, nextMutation);
                
                alert(`✅ THÀNH CÔNG!\n\n🎉 Bạn đã nhận được:\n${MUTATION_NAMES[nextMutation]} ${petType}\n\nHệ số nhân: x${MUTATION_MULTIPLIERS[nextMutation]}`);
            } else {
                // Failure - pets already removed
                showTradeUpResult(false, petType, mutation, nextMutation);
                
                alert(`❌ THẤT BẠI!\n\nBạn đã mất 5x ${MUTATION_NAMES[mutation]} ${petType}\n\nHãy thử lại lần sau!`);
            }
            
            // Update displays
            renderPets();
            updateTradeUpPetList();
            updateTradeUpDisplay();
            updateDisplay();
            saveToLocalStorage(true);
            
            console.log(`🔄 Trade-Up ${success ? 'SUCCESS' : 'FAILED'}: ${petType} ${mutation} → ${nextMutation}`);
        }
        
        function showTradeUpResult(success, petType, fromMutation, toMutation) {
            const animDiv = document.getElementById('hatchAnimation');
            if (!animDiv) return;
            
            animDiv.style.display = 'block';
            
            if (success) {
                animDiv.innerHTML = `
                    <div class="hatch-animation">
                        <div class="hatch-result" style="font-size: 5em; animation: successPulse 1s ease-in-out infinite;">
                            ✨
                        </div>
                        <div class="hatch-text" style="color: #00ff00; font-size: 1.5em; font-weight: bold;">
                            🎉 THÀNH CÔNG! 🎉
                        </div>
                        <div style="margin-top: 15px; font-size: 1.2em;">
                            ${MUTATION_NAMES[toMutation]} ${petType}
                        </div>
                        <div class="hatch-multiplier" style="color: #ffd700;">
                            Hệ số: x${MUTATION_MULTIPLIERS[toMutation]}
                        </div>
                        <button class="admin-button" onclick="closeHatchAnimation()" style="margin-top: 20px;">OK</button>
                    </div>
                `;
            } else {
                animDiv.innerHTML = `
                    <div class="hatch-animation">
                        <div class="hatch-result" style="font-size: 5em; animation: failShake 0.5s ease-in-out infinite;">
                            💔
                        </div>
                        <div class="hatch-text" style="color: #ff6b6b; font-size: 1.5em; font-weight: bold;">
                            ❌ THẤT BẠI ❌
                        </div>
                        <div style="margin-top: 15px; color: #ff6b6b;">
                            Đã mất 5x ${MUTATION_NAMES[fromMutation]} ${petType}
                        </div>
                        <div style="color: #888; margin-top: 10px;">
                            Thử lại lần sau!
                        </div>
                        <button class="admin-button" onclick="closeHatchAnimation()" style="margin-top: 20px;">OK</button>
                    </div>
                `;
            }
            
            setTimeout(() => {
                if (animDiv.style.display === 'block') {
                    closeHatchAnimation();
                }
            }, 5000);
        }

        function renderPets() {
            const petsGrid = document.getElementById('petsGrid');
            petsGrid.innerHTML = '';
            
            const petArray = Object.entries(ownedPets).map(([key, pet]) => ({...pet, key})).sort((a, b) => b.multiplier - a.multiplier);
            
            if (petArray.length === 0) {
                petsGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #999;">Chưa có pet nào. Mua trứng để bắt đầu!</div>';
                renderEquippedPets();
                return;
            }
            
            petArray.forEach(pet => {
                const petCard = document.createElement('div');
                const equippedCount = equippedPets.filter(p => p.key === pet.key).length;
                const isEquipped = equippedCount > 0;
                petCard.className = `pet-card ${isEquipped ? 'equipped' : ''}`;
                
                // Escape single quotes in pet key for onclick
                const escapedKey = pet.key.replace(/'/g, "\\'");
                
                // Check if can equip more
                const canEquipMore = equippedCount < pet.count && equippedPets.length < MAX_EQUIPPED_PETS;
                
                // Get mutation badge
                const mutation = pet.mutation || 'normal';
                const mutationBadge = getMutationBadge(mutation);
                const mutationMult = MUTATION_MULTIPLIERS[mutation] || 1;
                const totalMult = pet.multiplier * mutationMult;
                
                petCard.innerHTML = `
                    ${isEquipped ? `<div class="pet-equipped-badge">✓ ${equippedCount}/${pet.count}</div>` : ''}
                    ${mutationBadge}
                    <div class="pet-icon">${pet.icon}</div>
                    <div class="pet-name">${pet.baseName || pet.name}</div>
                    <div class="pet-multiplier">x${totalMult.toLocaleString()} ${mutation !== 'normal' ? `(Base: x${pet.multiplier})` : ''}</div>
                    <div class="pet-count">Owned: ${pet.count}</div>
                    <div class="pet-actions">
                        ${isEquipped 
                            ? `<button class="equip-btn" onclick="unequipPetOnce('${escapedKey}')" style="background: linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%);">Gỡ 1</button>`
                            : ''}
                        <button class="equip-btn" onclick="equipPet('${escapedKey}')" ${!canEquipMore ? 'disabled' : ''}>
                            ${equippedCount >= pet.count ? 'Hết' : 'Trang Bị'}
                        </button>
                    </div>
                    <div class="pet-sell-actions" style="margin-top: 8px; display: flex; gap: 5px;">
                        <button class="sell-btn" onclick="sellPet('${escapedKey}')" style="flex: 1; padding: 6px; background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%); border: none; border-radius: 5px; color: #000; font-weight: bold; cursor: pointer; font-size: 0.85em;">
                            💰 Bán 1 (1💎)
                        </button>
                        ${pet.count > 1 ? `
                        <button class="sell-btn" onclick="sellAllPets('${escapedKey}')" style="flex: 1; padding: 6px; background: linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%); border: none; border-radius: 5px; color: white; font-weight: bold; cursor: pointer; font-size: 0.85em;">
                            🔥 Bán Hết (${pet.count}💎)
                        </button>
                        ` : ''}
                    </div>
                `;
                
                petsGrid.appendChild(petCard);
            });
            
            renderEquippedPets();
        }
        
        function getMutationBadge(mutation) {
            const badges = {
                'normal': '',
                'gold': '<div class="mutation-badge gold">🟡 GOLD</div>',
                'diamond': '<div class="mutation-badge diamond">💎 DIAMOND</div>',
                'rainbow': '<div class="mutation-badge rainbow">🌈 RAINBOW</div>',
                'transcendent': '<div class="mutation-badge transcendent">✨ TRANSCENDENT</div>'
            };
            return badges[mutation] || '';
        }

        function renderEquippedPets() {
            const equippedBar = document.getElementById('equippedPetsBar');
            equippedBar.innerHTML = '';
            
            // Render 5 slots
            for (let i = 0; i < MAX_EQUIPPED_PETS; i++) {
                const slot = document.createElement('div');
                
                if (equippedPets[i]) {
                    const pet = equippedPets[i];
                    slot.className = 'equipped-slot filled';
                    slot.innerHTML = `
                        <button class="unequip-btn" onclick="unequipPetByIndex(${i})">×</button>
                        <div class="equipped-pet-icon">${pet.icon}</div>
                        <div class="equipped-pet-mult">x${pet.multiplier}</div>
                    `;
                } else {
                    slot.className = 'equipped-slot';
                    slot.innerHTML = '<div style="color: #666; font-size: 0.8em;">Empty</div>';
                }
                
                equippedBar.appendChild(slot);
            }
        }

        function equipPet(petKey) {
            if (equippedPets.length >= MAX_EQUIPPED_PETS) {
                alert('❌ Đã đạt giới hạn 5 pets! Gỡ pet khác để trang bị pet mới.');
                return;
            }
            
            const pet = ownedPets[petKey];
            if (!pet) return;
            
            // Count how many of this pet are already equipped
            const equippedCount = equippedPets.filter(p => p.key === petKey).length;
            
            // Check if owned enough
            if (equippedCount >= pet.count) {
                alert(`⚠️ Bạn chỉ có ${pet.count} con ${pet.name}, đã trang bị ${equippedCount} con rồi!`);
                return;
            }
            
            equippedPets.push({...pet, key: petKey});
            renderPets();
            updateDisplay();
            alert(`✅ Đã trang bị ${pet.name}! (${equippedCount + 1}/${pet.count})`);
        }

        function unequipPet(petKey) {
            equippedPets = equippedPets.filter(p => p.key !== petKey);
            renderPets();
            updateDisplay();
            
            const pet = ownedPets[petKey];
            if (pet) {
                alert(`✅ Đã gỡ tất cả ${pet.name}!`);
            }
        }

        function unequipPetOnce(petKey) {
            // Find first index of this pet and remove only one
            const index = equippedPets.findIndex(p => p.key === petKey);
            if (index !== -1) {
                equippedPets.splice(index, 1);
                renderPets();
                updateDisplay();
                
                const pet = ownedPets[petKey];
                const remainingCount = equippedPets.filter(p => p.key === petKey).length;
                if (pet) {
                    alert(`✅ Đã gỡ 1 con ${pet.name}! (Còn ${remainingCount} equipped)`);
                }
            }
        }

        function unequipPetByIndex(index) {
            if (equippedPets[index]) {
                const pet = equippedPets[index];
                equippedPets.splice(index, 1);
                renderPets();
                updateDisplay();
                alert(`✅ Đã gỡ ${pet.name}!`);
            }
        }

        function equipBestPets() {
            // Get all owned pets sorted by multiplier (descending)
            const petArray = Object.entries(ownedPets)
                .map(([key, pet]) => ({...pet, key}))
                .sort((a, b) => b.multiplier - a.multiplier);
            
            if (petArray.length === 0) {
                alert('❌ Bạn chưa có pet nào!');
                return;
            }
            
            // Clear current equipped pets
            equippedPets = [];
            
            // Equip top 5 pets (or all if less than 5)
            const petsToEquip = petArray.slice(0, MAX_EQUIPPED_PETS);
            petsToEquip.forEach(pet => {
                equippedPets.push({...pet, key: pet.key});
            });
            
            renderPets();
            updateDisplay();
            
            const equippedNames = petsToEquip.map(p => p.icon + ' ' + p.name).join(', ');
            alert(`✅ Đã trang bị ${petsToEquip.length} pets mạnh nhất:\n${equippedNames}`);
        }

        function unequipAllPets() {
            if (equippedPets.length === 0) {
                alert('⚠️ Không có pet nào đang trang bị!');
                return;
            }
            
            const count = equippedPets.length;
            equippedPets = [];
            renderPets();
            updateDisplay();
            
            alert(`✅ Đã gỡ ${count} pets!`);
        }
        
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // SELL PET SYSTEM
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        function sellPet(petKey) {
            console.log(`💰 Attempting to sell pet: ${petKey}`);
            
            // Validate pet exists
            const pet = ownedPets[petKey];
            if (!pet) {
                alert('❌ Pet không tồn tại!');
                return;
            }
            
            // Validate count
            if (pet.count <= 0) {
                alert('❌ Không còn pet này để bán!');
                return;
            }
            
            // Get pet info
            const petName = pet.baseName || pet.name;
            const mutation = pet.mutation || 'normal';
            const mutationName = MUTATION_NAMES[mutation] || mutation;
            
            // Confirmation
            const confirmMsg = `💰 BÁN PET\n\nPet: ${mutationName} ${petName}\nGiá: 1 💎 Diamond\n\nBạn có chắc chắn?`;
            
            if (!confirm(confirmMsg)) {
                return;
            }
            
            // Check if pet is equipped - auto unequip first
            const equippedIndex = equippedPets.findIndex(p => p.key === petKey);
            if (equippedIndex !== -1) {
                // Remove from equipped
                equippedPets.splice(equippedIndex, 1);
                console.log(`🔧 Auto-unequipped pet before selling`);
            }
            
            // Sell pet
            pet.count--;
            diamonds += 1;
            
            // Remove from ownedPets if count reaches 0
            if (pet.count <= 0) {
                delete ownedPets[petKey];
                console.log(`🗑️ Removed pet from inventory (count = 0)`);
            }
            
            // Update displays
            renderPets();
            updateDisplay();
            updateTradeUpPetList();
            saveToLocalStorage(true);
            
            // Success message
            alert(`✅ Đã bán!\n\n${mutationName} ${petName}\n+1 💎 Diamond\n\nTổng Diamonds: ${formatNumber(diamonds)}`);
            
            console.log(`✅ Pet sold successfully`);
            console.log(`💎 Diamonds: ${diamonds}`);
        }
        
        function sellAllPets(petKey) {
            console.log(`💰 Attempting to sell ALL pets: ${petKey}`);
            
            // Validate pet exists
            const pet = ownedPets[petKey];
            if (!pet) {
                alert('❌ Pet không tồn tại!');
                return;
            }
            
            // Validate count
            if (pet.count <= 0) {
                alert('❌ Không còn pet này để bán!');
                return;
            }
            
            // Get pet info
            const petName = pet.baseName || pet.name;
            const mutation = pet.mutation || 'normal';
            const mutationName = MUTATION_NAMES[mutation] || mutation;
            const totalValue = pet.count;
            
            // Confirmation
            const confirmMsg = `💰 BÁN TẤT CẢ\n\nPet: ${mutationName} ${petName}\nSố lượng: ${pet.count}\nTổng giá: ${totalValue} 💎 Diamonds\n\n⚠️ Sẽ bán TẤT CẢ ${pet.count} pets!\n\nBạn có chắc chắn?`;
            
            if (!confirm(confirmMsg)) {
                return;
            }
            
            // Unequip all instances of this pet
            equippedPets = equippedPets.filter(p => p.key !== petKey);
            console.log(`🔧 Auto-unequipped all instances before selling`);
            
            // Sell all pets
            const soldCount = pet.count;
            diamonds += soldCount;
            
            // Remove from ownedPets
            delete ownedPets[petKey];
            console.log(`🗑️ Removed all pets from inventory`);
            
            // Update displays
            renderPets();
            updateDisplay();
            updateTradeUpPetList();
            saveToLocalStorage(true);
            
            // Success message
            alert(`✅ Đã bán tất cả!\n\n${soldCount}x ${mutationName} ${petName}\n+${soldCount} 💎 Diamonds\n\nTổng Diamonds: ${formatNumber(diamonds)}`);
            
            console.log(`✅ Sold ${soldCount} pets`);
            console.log(`💎 Diamonds: ${diamonds}`);
        }

        function getPetMultiplier() {
            let totalMult = 1;
            equippedPets.forEach(pet => {
                // Each equipped pet applies its multiplier based on owned count
                const ownedPet = ownedPets[pet.key];
                if (ownedPet) {
                    const mutationMult = MUTATION_MULTIPLIERS[ownedPet.mutation] || 1;
                    const effectiveMult = pet.multiplier * mutationMult;
                    totalMult *= Math.pow(effectiveMult, ownedPet.count);
                }
            });
            return totalMult;
        }

        // ===== CLICK BUTTON EVENT =====
        document.getElementById('clickButton').addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation(); // Stop event bubbling
            
            // Anti-cheat DISABLED - allow all clicks
            // if (!canClick || isAfk || isBanned) return;
            if (!canClick) return;
            
            // Auto-clicker detection DISABLED
            // if (checkAutoClicker()) {
            //     return;
            // }
            
            resetAFKTimer();
            
            // Áp dụng multiplier từ weather và pets
            const weatherMult = getWeatherMultiplier();
            const petMult = getPetMultiplier();
            const totalMultiplier = multiplier * rebirthMultiplier * weatherMult * petMult;
            coins += clickPower * totalMultiplier;
            updateDisplay();
            renderShop();
            updateRebirthUI();
            
            // Bắt đầu cooldown
            canClick = false;
            this.classList.add('disabled');
            
            setTimeout(() => {
                canClick = true;
                this.classList.remove('disabled');
            }, clickCooldown * 1000);
        });

        // Auto clicker
        setInterval(() => {
            // Anti-AFK check DISABLED
            // if (autoClickers > 0 && !isAfk && !isBanned) {
            if (autoClickers > 0) {
                const weatherMult = getWeatherMultiplier();
                const petMult = getPetMultiplier();
                const totalMultiplier = multiplier * rebirthMultiplier * weatherMult * petMult;
                coins += autoClickers * totalMultiplier;
                updateDisplay();
                renderShop();
                updateRebirthUI();
            }
        }, 1000);

        // Weather spawn checker (every second)
        setInterval(() => {
            checkWeatherSpawns();
        }, 1000);

        // Initialize
        updateDisplay();
        renderShop();
        updateGamePassUI();
        updateRebirthUI();
        resetAFKTimer();
        updateWeatherDisplay();
        renderEggShop();
        renderPets();
        updateTradeUpPetList(); // Initialize Trade-Up dropdown

        // Playtime counter
        playTimeInterval = setInterval(() => {
            // AFK check DISABLED - always count time
            // if (!isAfk && !isBanned) {
                playTime++;
                updateDisplay();
            // }
        }, 1000);

        // Event listeners để reset AFK timer
        document.addEventListener('mousemove', resetAFKTimer);
        document.addEventListener('keypress', resetAFKTimer);
        document.addEventListener('scroll', resetAFKTimer);
        document.addEventListener('touchstart', resetAFKTimer);

        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        // LOCALSTORAGE AUTO-SAVE SYSTEM
        // ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        
        const SAVE_VERSION = '1.0.0';
        const SAVE_KEY = 'cookieClickerSave';
        const BACKUP_KEY = 'cookieClickerSaveBackup';
        let autoSaveInterval = null;
        let lastSaveTime = 0;
        
        // Check if localStorage is available
        function isLocalStorageAvailable() {
            try {
                const test = '__localStorage_test__';
                localStorage.setItem(test, test);
                localStorage.removeItem(test);
                return true;
            } catch (e) {
                console.error('localStorage not available:', e);
                return false;
            }
        }
        
        // Show save indicator (visual feedback)
        function showSaveIndicator(success = true) {
            const indicator = document.createElement('div');
            indicator.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 10px 20px;
                background: ${success ? 'rgba(0, 255, 0, 0.9)' : 'rgba(255, 0, 0, 0.9)'};
                color: white;
                border-radius: 8px;
                font-weight: bold;
                z-index: 10000;
                animation: fadeInOut 2s ease-in-out;
            `;
            indicator.textContent = success ? '💾 Đã lưu!' : '❌ Lưu thất bại!';
            document.body.appendChild(indicator);
            
            setTimeout(() => {
                if (indicator.parentNode) {
                    indicator.parentNode.removeChild(indicator);
                }
            }, 2000);
        }
        
        // Validate data before saving (prevent corruption)
        function validateSaveData(data) {
            if (!data || typeof data !== 'object') return false;
            
            // Check required fields exist
            const requiredFields = ['coins', 'diamonds', 'clickPower', 'gamePasses'];
            for (const field of requiredFields) {
                if (!(field in data)) {
                    console.error(`Missing required field: ${field}`);
                    return false;
                }
            }
            
            // Validate data types
            if (typeof data.coins !== 'number') return false;
            if (typeof data.diamonds !== 'number') return false;
            if (typeof data.gamePasses !== 'object') return false;
            
            return true;
        }
        
        // Validate loaded data (prevent crashes)
        function validateLoadData(data) {
            if (!data || typeof data !== 'object') return null;
            
            // Set safe defaults for missing/invalid values
            const safeData = {
                // Core stats
                coins: typeof data.coins === 'number' ? Math.max(0, data.coins) : 0,
                diamonds: typeof data.diamonds === 'number' ? Math.max(0, data.diamonds) : 0,
                tickets: typeof data.tickets === 'number' ? Math.max(0, data.tickets) : 0,
                goldBars: typeof data.goldBars === 'number' ? Math.max(0, data.goldBars) : 0,
                
                // Stats
                clickPower: typeof data.clickPower === 'number' ? Math.max(1, data.clickPower) : 1,
                autoClickers: typeof data.autoClickers === 'number' ? Math.max(0, data.autoClickers) : 0,
                multiplier: typeof data.multiplier === 'number' ? Math.max(1, data.multiplier) : 1,
                clickCooldown: typeof data.clickCooldown === 'number' ? Math.max(0, data.clickCooldown) : 0.5,
                
                // Game state
                gamePasses: typeof data.gamePasses === 'object' ? data.gamePasses : {},
                inventory: typeof data.inventory === 'object' ? data.inventory : {
                    potion_2x: 0,
                    potion_3x: 0,
                    potion_4x: 0
                },
                ownedPets: Array.isArray(data.ownedPets) ? data.ownedPets : [],
                equippedPets: Array.isArray(data.equippedPets) ? data.equippedPets : [],
                
                // Progress
                playTime: typeof data.playTime === 'number' ? Math.max(0, data.playTime) : 0,
                shopDiscount: typeof data.shopDiscount === 'number' ? Math.max(0, data.shopDiscount) : 0,
                rebirthCount: typeof data.rebirthCount === 'number' ? Math.max(0, data.rebirthCount) : 0,
                rebirthMultiplier: typeof data.rebirthMultiplier === 'number' ? Math.max(1, data.rebirthMultiplier) : 1,
                purchaseLimit: typeof data.purchaseLimit === 'number' ? Math.max(1, data.purchaseLimit) : 5,
                purchaseCounts: typeof data.purchaseCounts === 'object' ? data.purchaseCounts : {},
                
                // Misc
                isAdmin: data.isAdmin === true,
                weatherNextSpawn: typeof data.weatherNextSpawn === 'number' ? data.weatherNextSpawn : 0,
                goldCodes: typeof data.goldCodes === 'object' ? data.goldCodes : {},
                
                // Shop items
                shopItems: Array.isArray(data.shopItems) ? data.shopItems : null
            };
            
            return safeData;
        }
        
        // Save game to localStorage
        function saveToLocalStorage(silent = false) {
            if (!isLocalStorageAvailable()) {
                if (!silent) console.error('localStorage not available');
                return false;
            }
            
            try {
                // Create backup of current save
                const currentSave = localStorage.getItem(SAVE_KEY);
                if (currentSave) {
                    localStorage.setItem(BACKUP_KEY, currentSave);
                }
                
                // Prepare save data
                const saveData = {
                    version: SAVE_VERSION,
                    saveDate: new Date().toISOString(),
                    
                    // Core stats
                    coins: coins,
                    diamonds: diamonds,
                    tickets: tickets,
                    goldBars: goldBars,
                    
                    // Stats
                    clickPower: clickPower,
                    autoClickers: autoClickers,
                    multiplier: multiplier,
                    clickCooldown: clickCooldown,
                    
                    // Game state
                    gamePasses: gamePasses,
                    inventory: inventory,
                    ownedPets: ownedPets,
                    equippedPets: equippedPets,
                    
                    // Progress
                    playTime: playTime,
                    shopDiscount: shopDiscount,
                    rebirthCount: rebirthCount,
                    rebirthMultiplier: rebirthMultiplier,
                    purchaseLimit: purchaseLimit,
                    purchaseCounts: purchaseCounts,
                    
                    // Misc
                    isAdmin: isAdmin,
                    weatherNextSpawn: weatherNextSpawn,
                    goldCodes: goldCodes,
                    musicUnlocked: musicUnlocked,
                    
                    // Shop items (save prices and owned counts)
                    shopItems: shopItems.map(item => ({
                        id: item.id,
                        currentPrice: item.currentPrice,
                        owned: item.owned
                    }))
                };
                
                // Validate before saving
                if (!validateSaveData(saveData)) {
                    console.error('Save data validation failed');
                    if (!silent) showSaveIndicator(false);
                    return false;
                }
                
                // Save to localStorage
                const saveString = JSON.stringify(saveData);
                localStorage.setItem(SAVE_KEY, saveString);
                
                lastSaveTime = Date.now();
                
                if (!silent) {
                    console.log('✅ Game saved to localStorage');
                    console.log(`📊 Save size: ${(saveString.length / 1024).toFixed(2)} KB`);
                    showSaveIndicator(true);
                }
                
                return true;
                
            } catch (e) {
                console.error('❌ Failed to save game:', e);
                
                // Handle quota exceeded error
                if (e.name === 'QuotaExceededError') {
                    console.error('localStorage quota exceeded!');
                    // Try to clear backup and save again
                    try {
                        localStorage.removeItem(BACKUP_KEY);
                        const saveString = JSON.stringify({
                            version: SAVE_VERSION,
                            saveDate: new Date().toISOString(),
                            coins, diamonds, tickets, goldBars,
                            clickPower, autoClickers, multiplier, clickCooldown,
                            gamePasses, playTime, rebirthCount, rebirthMultiplier
                        });
                        localStorage.setItem(SAVE_KEY, saveString);
                        if (!silent) showSaveIndicator(true);
                        return true;
                    } catch (e2) {
                        console.error('Failed even after clearing backup:', e2);
                    }
                }
                
                if (!silent) showSaveIndicator(false);
                return false;
            }
        }
        
        // Load game from localStorage
        function loadFromLocalStorage() {
            if (!isLocalStorageAvailable()) {
                console.log('localStorage not available, starting fresh');
                return false;
            }
            
            try {
                const saveString = localStorage.getItem(SAVE_KEY);
                
                if (!saveString) {
                    console.log('No save found, starting fresh');
                    return false;
                }
                
                // Parse save data
                let saveData;
                try {
                    saveData = JSON.parse(saveString);
                } catch (e) {
                    console.error('Failed to parse save data, trying backup...', e);
                    
                    // Try backup
                    const backupString = localStorage.getItem(BACKUP_KEY);
                    if (backupString) {
                        saveData = JSON.parse(backupString);
                        console.log('✅ Loaded from backup');
                    } else {
                        throw new Error('No valid backup found');
                    }
                }
                
                // Validate loaded data
                const validData = validateLoadData(saveData);
                if (!validData) {
                    console.error('Save data validation failed');
                    return false;
                }
                
                // Restore core stats
                coins = validData.coins;
                diamonds = validData.diamonds;
                tickets = validData.tickets;
                goldBars = validData.goldBars;
                
                // Restore stats
                clickPower = validData.clickPower;
                autoClickers = validData.autoClickers;
                multiplier = validData.multiplier;
                clickCooldown = validData.clickCooldown;
                
                // Restore game state
                gamePasses = validData.gamePasses;
                inventory = validData.inventory;
                ownedPets = validData.ownedPets;
                equippedPets = validData.equippedPets;
                
                // Restore progress
                playTime = validData.playTime;
                shopDiscount = validData.shopDiscount;
                rebirthCount = validData.rebirthCount;
                rebirthMultiplier = validData.rebirthMultiplier;
                purchaseLimit = validData.purchaseLimit;
                purchaseCounts = validData.purchaseCounts;
                
                // Restore misc
                isAdmin = validData.isAdmin;
                weatherNextSpawn = validData.weatherNextSpawn;
                musicUnlocked = validData.musicUnlocked || false;
                
                // Update music UI if unlocked
                if (musicUnlocked) {
                    document.getElementById('musicControls').style.display = 'block';
                    document.getElementById('unlockMusicBtn').style.display = 'none';
                }
                
                // Restore gold codes
                if (validData.goldCodes) {
                    Object.keys(validData.goldCodes).forEach(code => {
                        if (goldCodes[code]) {
                            goldCodes[code].used = validData.goldCodes[code].used;
                        }
                    });
                }
                
                // Restore shop items
                if (validData.shopItems) {
                    validData.shopItems.forEach(savedItem => {
                        const item = shopItems.find(i => i.id === savedItem.id);
                        if (item) {
                            item.currentPrice = savedItem.currentPrice;
                            item.owned = savedItem.owned;
                        }
                    });
                }
                
                // Update all displays
                updateDisplay();
                updateWeatherDisplay();
                updateGamePassUI();
                renderShop();
                renderPets();
                
                console.log('✅ Game loaded from localStorage');
                console.log('📅 Save date:', saveData.saveDate);
                
                showToast('✅ Đã tải game tự động!', 2000);
                
                return true;
                
            } catch (e) {
                console.error('❌ Failed to load game:', e);
                console.log('Starting fresh game');
                return false;
            }
        }
        
        // Clear save data (for testing/reset)
        function clearLocalStorageSave() {
            if (!isLocalStorageAvailable()) return;
            
            try {
                localStorage.removeItem(SAVE_KEY);
                localStorage.removeItem(BACKUP_KEY);
                console.log('✅ Save data cleared');
                return true;
            } catch (e) {
                console.error('Failed to clear save:', e);
                return false;
            }
        }
        
        // Start auto-save system
        function startAutoSave() {
            // Auto-save every 10 seconds
            if (autoSaveInterval) {
                clearInterval(autoSaveInterval);
            }
            
            autoSaveInterval = setInterval(() => {
                saveToLocalStorage(true); // Silent save
            }, 10000);
            
            console.log('🔄 Auto-save enabled (every 10 seconds)');
        }
        
        // Stop auto-save
        function stopAutoSave() {
            if (autoSaveInterval) {
                clearInterval(autoSaveInterval);
                autoSaveInterval = null;
                console.log('⏸️ Auto-save disabled');
            }
        }

        // Initialize language on page load
        window.addEventListener('DOMContentLoaded', function() {
            // Load language preference
            const savedLang = localStorage.getItem('gameLanguage');
            if (savedLang) {
                setLanguage(savedLang);
            } else {
                // Default to English
                setLanguage('en');
            }
            
            // Auto-load save from localStorage
            loadFromLocalStorage();
            
            // Start auto-save system
            startAutoSave();
            
            console.log('🎮 Game initialized');
            console.log('💾 Auto-save: Enabled');
        });

        // ===== MINI GAME - KÉO BÚA BAO =====
        function generateFairBotChoice(playerChoice) {
            const rand = Math.random();
            const winningMoves = {
                'rock': 'paper',
                'paper': 'scissors',
                'scissors': 'rock'
            };
            const losingMoves = {
                'rock': 'scissors',
                'paper': 'rock',
                'scissors': 'paper'
            };
            if (rand < 0.5) {
                return losingMoves[playerChoice];
            } else {
                return winningMoves[playerChoice];
            }
        }

        let gameActive = false;
        let selectedMultiplier = 0;
        let requiredWins = 0;
        let currentWins = 0;
        let betAmount = 0;
        let betType = 'coins';
        let botChoice = '';

        function selectMultiplier(mult, wins) {
            selectedMultiplier = mult;
            requiredWins = wins;
            document.querySelectorAll('.multiplier-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
            document.getElementById(`mult${mult}`).classList.add('selected');
        }

        function startGame() {
            if (selectedMultiplier === 0) {
                alert('⚠️ Vui lòng chọn mục tiêu!');
                return;
            }
            const amount = parseInt(document.getElementById('betAmount').value);
            betType = document.getElementById('betType').value;
            if (!amount || amount <= 0) {
                alert('⚠️ Nhập số tiền hợp lệ!');
                return;
            }
            if (betType === 'coins' && coins < amount) {
                alert('❌ Không đủ Coins!');
                return;
            }
            if (betType === 'diamonds' && diamonds < amount) {
                alert('❌ Không đủ Diamonds!');
                return;
            }
            if (betType === 'coins') {
                coins -= amount;
            } else {
                diamonds -= amount;
            }
            updateDisplay();
            gameActive = true;
            betAmount = amount;
            currentWins = 0;
            document.getElementById('currentWins').textContent = currentWins;
            document.getElementById('requiredWins').textContent = requiredWins;
            document.getElementById('currentBet').textContent = formatNumber(betAmount);
            document.getElementById('currentBetType').textContent = betType === 'coins' ? 'Coins' : 'Diamonds';
            document.getElementById('gameProgress').style.display = 'block';
            document.getElementById('gameButtons').style.display = 'block';
            document.getElementById('gameResult').style.display = 'none';
        }

        function playerChoice(choice) {
            if (!gameActive) return;
            gameActive = false;
            botChoice = generateFairBotChoice(choice);
            const choiceNames = {
                rock: 'Búa ✊',
                paper: 'Bao ✋',
                scissors: 'Kéo ✌️'
            };
            const botChoiceName = choiceNames[botChoice];
            const playerChoiceName = choiceNames[choice];
            let result = '';
            if (choice === botChoice) {
                result = 'Hòa';
            } else if (
                (choice === 'rock' && botChoice === 'scissors') ||
                (choice === 'paper' && botChoice === 'rock') ||
                (choice === 'scissors' && botChoice === 'paper')
            ) {
                result = 'Thắng';
                currentWins++;
            } else {
                result = 'Thua';
            }
            document.getElementById('gameButtons').style.display = 'none';
            document.getElementById('gameResult').style.display = 'block';
            if (result === 'Thắng') {
                document.getElementById('resultText').innerHTML = '🎉 THẮNG!';
                document.getElementById('resultText').style.color = '#00ff00';
                document.getElementById('resultDetail').innerHTML = `Bạn: ${playerChoiceName} vs Bot: ${botChoiceName}<br>Tiến độ: ${currentWins}/${requiredWins}`;
                document.getElementById('resultDetail').style.color = '#ffffff';
                if (currentWins >= requiredWins) {
                    const prize = betAmount * selectedMultiplier;
                    if (betType === 'coins') {
                        coins += prize;
                    } else {
                        diamonds += prize;
                    }
                    updateDisplay();
                    document.getElementById('resultText').innerHTML = '🏆 HOÀN THÀNH!';
                    document.getElementById('resultDetail').innerHTML = `Thắng ${requiredWins} trận!<br>🎁 Nhận: ${formatNumber(prize)} ${betType === 'coins' ? 'Coins' : 'Diamonds'} (x${selectedMultiplier})`;
                    document.getElementById('continueBtn').textContent = '🎮 Chơi Lại';
                    document.getElementById('continueBtn').style.background = 'linear-gradient(135deg, #ffd700 0%, #ff8c00 100%)';
                } else {
                    document.getElementById('continueBtn').textContent = 'Tiếp Tục ➡️';
                    document.getElementById('continueBtn').style.background = 'linear-gradient(135deg, #00ff00 0%, #00cc00 100%)';
                }
            } else if (result === 'Hòa') {
                document.getElementById('resultText').innerHTML = '🤝 HÒA!';
                document.getElementById('resultText').style.color = '#ffd700';
                document.getElementById('resultDetail').innerHTML = `Bạn: ${playerChoiceName} vs Bot: ${botChoiceName}<br>Chơi lại!`;
                document.getElementById('resultDetail').style.color = '#ffffff';
                document.getElementById('continueBtn').textContent = 'Tiếp Tục ➡️';
                document.getElementById('continueBtn').style.background = 'linear-gradient(135deg, #00ff00 0%, #00cc00 100%)';
            } else {
                document.getElementById('resultText').innerHTML = '💀 THUA!';
                document.getElementById('resultText').style.color = '#ff0000';
                document.getElementById('resultDetail').innerHTML = `Bạn: ${playerChoiceName} vs Bot: ${botChoiceName}<br>❌ Mất ${formatNumber(betAmount)} ${betType === 'coins' ? 'Coins' : 'Diamonds'}!`;
                document.getElementById('resultDetail').style.color = '#ff6b6b';
                document.getElementById('continueBtn').textContent = '😢 Về Menu';
                document.getElementById('continueBtn').style.background = 'linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%)';
            }
            document.getElementById('currentWins').textContent = currentWins;
        }

        function continueGame() {
            if (currentWins >= requiredWins || document.getElementById('resultText').textContent.includes('THUA')) {
                gameActive = false;
                currentWins = 0;
                selectedMultiplier = 0;
                betAmount = 0;
                document.getElementById('gameProgress').style.display = 'none';
                document.getElementById('gameButtons').style.display = 'none';
                document.getElementById('gameResult').style.display = 'none';
                document.querySelectorAll('.multiplier-btn').forEach(btn => {
                    btn.classList.remove('selected');
                });
                return;
            }
            gameActive = true;
            document.getElementById('gameButtons').style.display = 'block';
            document.getElementById('gameResult').style.display = 'none';
        }

        // ===== GOLD BARS SYSTEM =====
        function buyGoldPackage(amount, price) {
            // Store package info for redemption
            window.currentGoldPackage = { amount, price };
            
            // Show modal
            document.getElementById('codePackageName').textContent = `${amount} 🏆 Thỏi Vàng ($${price.toFixed(2)})`;
            document.getElementById('codeRedemptionOverlay').style.display = 'block';
            document.getElementById('codeRedemptionModal').style.display = 'block';
            document.getElementById('codeInput').value = '';
            document.getElementById('codeInput').focus();
            
            // In production: Codes never exposed to client
            // Admin gets codes via secure admin panel or email
            if (isAdmin) {
                console.log('🔐 ADMIN: Use admin panel to generate codes');
                console.log('📧 Codes sent via email after purchase');
            }
        }

        function closeCodeModal() {
            document.getElementById('codeRedemptionOverlay').style.display = 'none';
            document.getElementById('codeRedemptionModal').style.display = 'none';
            document.getElementById('codeInput').value = '';
        }

        // Rate limiting for code redemption
        let _redemptionAttempts = 0;
        let _lastRedemption = Date.now();

        async function redeemCode() {
            const code = document.getElementById('codeInput').value.toUpperCase().trim();
            
            // Rate limiting
            const now = Date.now();
            if (now - _lastRedemption < 3000 && !isAdmin) {
                alert('⚠️ Vui lòng đợi 3 giây giữa các lần nhập code!');
                return;
            }
            _lastRedemption = now;
            
            if (!code) {
                alert('❌ Vui lòng nhập code!');
                return;
            }
            
            // Track attempts
            _redemptionAttempts++;
            if (_redemptionAttempts > 10 && !isAdmin) {
                alert('⚠️ Quá nhiều lần thử! Vui lòng refresh trang.');
                closeCodeModal();
                return;
            }
            
            // Show loading
            const submitBtn = document.querySelector('[onclick="redeemCode()"]');
            const originalText = submitBtn.textContent;
            submitBtn.textContent = '⏳ Đang kiểm tra...';
            submitBtn.disabled = true;
            
            try {
                // SERVER-SIDE VALIDATION (Simulated API call)
                const result = await SERVER_API.validateCode(code);
                
                if (!result.success) {
                    submitBtn.textContent = originalText;
                    submitBtn.disabled = false;
                    
                    if (result.error === 'INVALID_CODE') {
                        alert('❌ CODE KHÔNG HỢP LỆ!\n\nCode này không tồn tại. Vui lòng kiểm tra lại.');
                    } else if (result.error === 'CODE_USED') {
                        alert('❌ CODE ĐÃ ĐƯỢC SỬ DỤNG!\n\nCode này đã được dùng rồi. Mỗi code chỉ dùng được 1 lần.');
                    }
                    return;
                }
                
                // Mark as used on server
                await SERVER_API.markCodeUsed(code);
                
                // Add gold bars
                goldBars += result.amount;
                
                // Reset attempts on success
                _redemptionAttempts = 0;
                
                // Close modal
                closeCodeModal();
                
                // Update display
                updateDisplay();
                
                // Success message
                alert(
                    `🎉 CODE HỢP LỆ!\n\n` +
                    `✅ Đã nhận: ${result.amount} 🏆 Thỏi Vàng\n` +
                    `💰 Tổng: ${goldBars} 🏆 Thỏi Vàng\n\n` +
                    `🎁 Cảm ơn bạn đã mua gói $${result.price.toFixed(2)}!`
                );
                
            } catch (error) {
                submitBtn.textContent = originalText;
                submitBtn.disabled = false;
                alert('❌ Lỗi kết nối server! Vui lòng thử lại.');
            }
        }

        // Allow Enter key to redeem
        document.addEventListener('DOMContentLoaded', function() {
            const codeInput = document.getElementById('codeInput');
            if (codeInput) {
                codeInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        redeemCode();
                    }
                });
            }
        });

        function buyGoldItem(itemName, cost, effect) {
            if (goldBars < cost) {
                alert(`❌ Không đủ Thỏi Vàng!\n\nCần: ${cost} 🏆\nCó: ${goldBars} 🏆`);
                return;
            }
            
            const confirm = window.confirm(
                `🏆 MUA VẬT PHẨM PREMIUM\n\n` +
                `${itemName}\n` +
                `Giá: ${cost} 🏆 Thỏi Vàng\n\n` +
                `Hiệu ứng: ${effect}\n\n` +
                `Xác nhận mua?`
            );
            
            if (!confirm) return;
            
            goldBars -= cost;
            
            // Apply effects based on item
            if (itemName === '💎 Diamond Pack x1000') {
                diamonds += 1000;
            } else if (itemName === '💰 Mega Coins x1M') {
                coins += 1000000;
            } else if (itemName === '⚡ Auto Clicker x50') {
                autoClickers += 50;
            } else if (itemName === '🔥 Click Power x100') {
                clickPower += 100;
            } else if (itemName === '🚀 Multiplier x5') {
                multiplier += 5;
            } else if (itemName === '⏱️ Speed Boost') {
                clickCooldown = Math.max(0.01, clickCooldown - 0.2);
            } else if (itemName === '🎒 Inventory Slot +10') {
                // Placeholder for inventory expansion
            } else if (itemName === '🏆 VIP Pass (30 Days)') {
                gamePasses.vip = true;
                updateGamePassUI();
            } else if (itemName === '👑 Premium Pass (30 Days)') {
                gamePasses.premium = true;
                updateGamePassUI();
            } else if (itemName === '🎫 Ticket Pack x100') {
                tickets += 100;
            } else if (itemName === '🥚 Legendary Egg') {
                // Give legendary pet
                const legendaryPets = [
                    { name: 'Phoenix', icon: '🔥', multiplier: 100 },
                    { name: 'Dragon', icon: '🐉', multiplier: 150 },
                    { name: 'Unicorn', icon: '🦄', multiplier: 120 }
                ];
                const pet = legendaryPets[Math.floor(Math.random() * legendaryPets.length)];
                const petKey = `${pet.name}_${Date.now()}`;
                ownedPets[petKey] = {
                    key: petKey,
                    name: pet.name,
                    icon: pet.icon,
                    multiplier: pet.multiplier,
                    count: 1
                };
                renderPets();
                alert(`🎉 Nhận được pet Legendary: ${pet.icon} ${pet.name} (x${pet.multiplier})!`);
            } else if (itemName === '🌟 Rebirth Multiplier +2x') {
                rebirthMultiplier += 2;
            }
            
            updateDisplay();
            renderShop();
            alert(`✅ Đã mua ${itemName}!\n\n💰 Còn lại: ${goldBars} 🏆 Thỏi Vàng`);
        }

        // ===== WHEEL GAME FUNCTIONS =====
        function buyTickets(amount) {
            const cost = amount * 500;
            if (diamonds < cost) {
                alert(`❌ Không đủ Diamonds! Cần ${cost} 💎`);
                return;
            }
            diamonds -= cost;
            tickets += amount;
            updateDisplay();
            alert(`✅ Đã mua ${amount} vé!`);
        }

        function getRandomPrize() {
            const rand = Math.random() * 100;
            let cumulative = 0;
            for (const prize of wheelPrizes) {
                cumulative += prize.chance;
                if (rand <= cumulative) return prize;
            }
            return wheelPrizes[0];
        }

        function givePrize(prize) {
            if (prize.type === 'coins') {
                coins += prize.value;
            } else if (prize.type === 'diamonds') {
                diamonds += prize.value;
            } else if (prize.type === 'pet') {
                const commonPets = eggShop[0].pets;
                const randomPet = commonPets[Math.floor(Math.random() * commonPets.length)];
                const petKey = `${randomPet.name}_${Date.now()}`;
                if (!ownedPets[petKey]) {
                    ownedPets[petKey] = {
                        key: petKey,
                        name: randomPet.name,
                        icon: randomPet.icon,
                        multiplier: randomPet.multiplier,
                        count: 1
                    };
                } else {
                    ownedPets[petKey].count++;
                }
                renderPets();
                return { ...prize, name: randomPet.name, icon: randomPet.icon };
            }
            return prize;
        }

        function spinWheel(times) {
            if (isSpinning) return;
            if (tickets < times) {
                alert(`❌ Không đủ vé! Cần ${times} 🎫`);
                return;
            }
            tickets -= times;
            isSpinning = true;
            document.getElementById('spin1Btn').disabled = true;
            document.getElementById('spin10Btn').disabled = true;
            document.getElementById('wheelResult').style.display = 'none';
            
            const prizes = [];
            for (let i = 0; i < times; i++) {
                const prize = getRandomPrize();
                const givenPrize = givePrize(prize);
                prizes.push(givenPrize);
            }
            
            const wheel = document.getElementById('wheelDisplay');
            const randomRotation = 1080 + Math.random() * 720;
            wheel.style.transform = `rotate(${randomRotation}deg)`;
            
            setTimeout(() => {
                isSpinning = false;
                updateDisplay();
                document.getElementById('spin1Btn').disabled = false;
                document.getElementById('spin10Btn').disabled = false;
                
                let resultHTML = '';
                const grouped = {};
                prizes.forEach(p => {
                    const key = p.name;
                    if (!grouped[key]) grouped[key] = { ...p, count: 0 };
                    grouped[key].count++;
                });
                Object.values(grouped).forEach(item => {
                    resultHTML += `<div>${item.icon} ${item.name} x${item.count}</div>`;
                });
                
                document.getElementById('wheelResultText').innerHTML = `🎉 Kết Quả x${times}:`;
                document.getElementById('wheelResultList').innerHTML = resultHTML;
                document.getElementById('wheelResult').style.display = 'block';
                
                setTimeout(() => {
                    wheel.style.transition = 'none';
                    wheel.style.transform = 'rotate(0deg)';
                    setTimeout(() => {
                        wheel.style.transition = 'transform 3s cubic-bezier(0.17, 0.67, 0.12, 0.99)';
                    }, 50);
                }, 100);
            }, 3000);
        }
        
        // ═══════════════════════════════════════════════════════
        // MOBILE UX HELPER FUNCTIONS
        // ═══════════════════════════════════════════════════════
        
        // Lock body scroll when modal opens
        function lockScroll() {
            document.body.classList.add('modal-open');
            document.body.style.top = `-${window.scrollY}px`;
        }
        
        // Unlock body scroll when modal closes
        function unlockScroll() {
            const scrollY = document.body.style.top;
            document.body.classList.remove('modal-open');
            document.body.style.top = '';
            window.scrollTo(0, parseInt(scrollY || '0') * -1);
        }
        
        // Visual feedback for button press
        function giveFeedback(element, type = 'success') {
            if (!element) return;
            
            element.classList.remove('success-flash', 'error-shake');
            void element.offsetWidth; // Force reflow
            
            if (type === 'success') {
                element.classList.add('success-flash');
            } else if (type === 'error') {
                element.classList.add('error-shake');
            }
            
            setTimeout(() => {
                element.classList.remove('success-flash', 'error-shake');
            }, 300);
        }
        
        // Show why action failed
        function showToast(message, duration = 2000) {
            // Remove existing toasts
            const existing = document.querySelector('.toast-message');
            if (existing) existing.remove();
            
            const toast = document.createElement('div');
            toast.className = 'toast-message';
            toast.textContent = message;
            toast.style.cssText = `
                position: fixed;
                top: 20px;
                left: 50%;
                transform: translateX(-50%);
                background: rgba(0, 0, 0, 0.9);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                z-index: 10000;
                font-size: 16px;
                box-shadow: 0 4px 15px rgba(0,0,0,0.5);
                animation: slideDown 0.3s ease;
                max-width: 90%;
                text-align: center;
            `;
            
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideUp 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, duration);
        }
        
        // Add toast animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideDown {
                from { transform: translateX(-50%) translateY(-100%); opacity: 0; }
                to { transform: translateX(-50%) translateY(0); opacity: 1; }
            }
            @keyframes slideUp {
                from { transform: translateX(-50%) translateY(0); opacity: 1; }
                to { transform: translateX(-50%) translateY(-100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);
        
        // Prevent click spam
        const clickTimers = new Map();
        function debounceClick(key, callback, delay = 300) {
            if (clickTimers.has(key)) {
                showToast('⏳ Chờ một chút...', 1000);
                return false;
            }
            
            clickTimers.set(key, true);
            callback();
            
            setTimeout(() => {
                clickTimers.delete(key);
            }, delay);
            
            return true;
        }
        
        // Better error messages
        function showError(message, element = null) {
            showToast('❌ ' + message, 2500);
            if (element) {
                giveFeedback(element, 'error');
            }
        }
        
        function showSuccess(message, element = null) {
            showToast('✅ ' + message, 2000);
            if (element) {
                giveFeedback(element, 'success');
            }
        }
        
        // Mobile-friendly console
        if (isMobile) {
            console.log('📱 Mobile UX Enhancements Active');
            console.log('✅ 28 UX issues fixed');
            console.log('⚡ Touch optimized');
            console.log('🎯 Safe zones configured');
            console.log('🌐 Landscape support added');
        }
        
        // ═══════════════════════════════════════════════════════
        // TELEPORT SYSTEM
        // ═══════════════════════════════════════════════════════
        
        function teleportTo(sectionId) {
            let targetElement;
            
            // Map section IDs to actual element IDs
            const sectionMap = {
                'shopItems': 'shopItems-section',
                'petSystem': 'petSystem',
                'eggShop': 'eggShop',
                'miniGame': 'miniGame',
                'gamepassPanel': 'gamepassPanel',
                'settingsPanel': 'settingsPanel',
                'tradeUpSection': 'tradeUpSection',
                'rebirthPanel': 'rebirthPanel'
            };
            
            const mappedId = sectionMap[sectionId] || sectionId;
            targetElement = document.getElementById(mappedId);
            
            if (targetElement) {
                // Smooth scroll to target
                targetElement.scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'start' 
                });
                
                // Visual feedback
                targetElement.style.transition = 'all 0.3s';
                targetElement.style.transform = 'scale(1.02)';
                targetElement.style.boxShadow = '0 0 30px rgba(102,126,234,0.8)';
                
                setTimeout(() => {
                    targetElement.style.transform = 'scale(1)';
                    targetElement.style.boxShadow = '';
                }, 600);
                
                showToast('✅ Đã dịch chuyển!', 1500);
            } else {
                showToast('❌ Không tìm thấy vị trí!', 2000);
            }
        }
        
        // ═══════════════════════════════════════════════════════
        // BACKGROUND MUSIC SYSTEM
        // ═══════════════════════════════════════════════════════
        
        let backgroundMusic = null;
        let musicUnlocked = false;
        let currentTrackName = '';
        
        function unlockMusic() {
            if (musicUnlocked) {
                showToast('🎵 Đã mở khóa rồi!', 2000);
                return;
            }
            
            if (diamonds < 50) {
                showToast('❌ Cần 50💎 để mở khóa!', 2500);
                return;
            }
            
            if (confirm('Mở khóa tính năng nhạc nền với 50💎?')) {
                diamonds -= 50;
                musicUnlocked = true;
                updateDisplay();
                saveToLocalStorage();
                
                document.getElementById('musicControls').style.display = 'block';
                document.getElementById('unlockMusicBtn').style.display = 'none';
                
                showToast('✅ Đã mở khóa nhạc nền!', 2000);
            }
        }
        
        function importMusic() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = 'audio/mp3,audio/wav,audio/ogg,audio/mpeg';
            
            input.onchange = (e) => {
                const file = e.target.files[0];
                if (file) {
                    const url = URL.createObjectURL(file);
                    
                    if (backgroundMusic) {
                        backgroundMusic.pause();
                        URL.revokeObjectURL(backgroundMusic.src);
                    }
                    
                    backgroundMusic = new Audio(url);
                    backgroundMusic.loop = true;
                    backgroundMusic.volume = 0.5;
                    
                    currentTrackName = file.name;
                    document.getElementById('trackName').textContent = currentTrackName;
                    
                    showToast('✅ Đã tải nhạc: ' + file.name, 2500);
                }
            };
            
            input.click();
        }
        
        function toggleMusic() {
            if (!backgroundMusic) {
                showToast('❌ Chưa import nhạc!', 2000);
                return;
            }
            
            if (backgroundMusic.paused) {
                backgroundMusic.play();
                document.getElementById('playPauseBtn').textContent = '⏸️ Pause';
                showToast('▶️ Đang phát nhạc...', 1500);
            } else {
                backgroundMusic.pause();
                document.getElementById('playPauseBtn').textContent = '▶️ Play';
                showToast('⏸️ Đã tạm dừng', 1500);
            }
        }
        
        function stopMusic() {
            if (backgroundMusic) {
                backgroundMusic.pause();
                backgroundMusic.currentTime = 0;
                document.getElementById('playPauseBtn').textContent = '▶️ Play';
                showToast('⏹️ Đã dừng nhạc', 1500);
            }
        }
        
        function updateVolume(value) {
            if (backgroundMusic) {
                backgroundMusic.volume = value / 100;
            }
        }

    </script>
</body>
</html>
