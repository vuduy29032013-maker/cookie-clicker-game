<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Clicker Game-By Vuduy 7/7  </title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 3em;
            background: linear-gradient(to right, #ffd700, #ff8c00);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .coins-display {
            font-size: 2.5em;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .stats {
            font-size: 0.9em;
            color: #ddd;
            margin-top: 10px;
        }

        .main-content {
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .game-section {
            flex: 1;
            min-width: 300px;
            text-align: center;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .click-button {
            width: 250px;
            height: 250px;
            border-radius: 50%;
            background: linear-gradient(135deg, #ffd700, #ff8c00);
            border: 8px solid #ffed4e;
            font-size: 6em;
            cursor: pointer;
            transition: transform 0.1s;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
        }

        .click-button:hover:not(.disabled) {
            transform: scale(1.05);
        }

        .click-button:active:not(.disabled) {
            transform: scale(0.95);
        }

        .click-button.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .shop-section {
            flex: 1;
            min-width: 300px;
        }

        .shop-title {
            font-size: 2em;
            margin-bottom: 20px;
            text-align: center;
        }

        .shop-items {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .shop-item {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
        }

        .shop-item:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-2px);
        }

        .shop-item.disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .item-info {
            flex: 1;
        }

        .item-name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .item-description {
            font-size: 0.9em;
            color: #ddd;
        }

        .item-owned {
            font-size: 0.8em;
            color: #ffd700;
            margin-top: 5px;
        }

        .buy-button {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .buy-button:hover {
            transform: scale(1.05);
        }

        .buy-button:active {
            transform: scale(0.95);
        }

        .buy-button.disabled {
            background: #666;
            cursor: not-allowed;
        }

        .icon {
            font-size: 2em;
            margin-right: 10px;
        }

        .admin-panel {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ffd700;
            z-index: 100;
        }

        .playtime-panel {
            position: fixed;
            top: 20px;
            right: 350px;
            background: rgba(0, 0, 0, 0.7);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #00ff00;
            font-size: 1.2em;
            font-weight: bold;
            color: #00ff00;
        }

        .admin-input {
            padding: 8px;
            border-radius: 5px;
            border: none;
            margin-right: 5px;
            width: 150px;
        }

        .admin-button {
            padding: 8px 15px;
            background: #ffd700;
            border: none;
            border-radius: 5px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
        }

        .admin-button:hover {
            background: #ffed4e;
        }

        .admin-controls {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #ffd700;
            max-height: 500px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .admin-controls::-webkit-scrollbar {
            width: 8px;
        }

        .admin-controls::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .admin-controls::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            border-radius: 4px;
        }

        .admin-controls::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #ff8c00 0%, #ffd700 100%);
        }

        .admin-money-button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
            width: 100%;
        }

        .admin-money-button:hover {
            transform: scale(1.05);
        }

        .weather-controls {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #ffd700;
        }

        .weather-control-title {
            font-size: 0.9em;
            margin-bottom: 8px;
            color: #ffd700;
        }

        .weather-buttons {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
            max-height: 400px;
            overflow-y: auto;
            padding-right: 5px;
        }

        .weather-buttons::-webkit-scrollbar {
            width: 8px;
        }

        .weather-buttons::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
        }

        .weather-buttons::-webkit-scrollbar-thumb {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border-radius: 4px;
        }

        .weather-buttons::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(135deg, #00f2fe 0%, #4facfe 100%);
        }

        .weather-summon-btn {
            padding: 6px 10px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border: none;
            border-radius: 5px;
            color: white;
            font-size: 0.8em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .weather-summon-btn:hover {
            transform: scale(1.05);
        }

        .weather-clear-btn {
            padding: 8px 15px;
            background: linear-gradient(135deg, #ff6b6b 0%, #ff4757 100%);
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            margin-top: 5px;
            width: 100%;
        }

        .weather-clear-btn:hover {
            transform: scale(1.05);
        }

        .weather-panel {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.85);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #00bfff;
            z-index: 100;
            min-width: 250px;
            max-width: 350px;
        }

        .weather-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
            color: #00bfff;
            text-align: center;
        }

        .weather-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .weather-item {
            background: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 8px;
            border: 2px solid;
            display: flex;
            justify-content: space-between;
            align-items: center;
            animation: weatherFadeIn 0.3s ease-in;
        }

        .weather-item.wind {
            border-color: #87ceeb;
            background: rgba(135, 206, 235, 0.2);
        }

        .weather-item.cloud {
            border-color: #b0c4de;
            background: rgba(176, 196, 222, 0.2);
        }

        .weather-item.rain {
            border-color: #4682b4;
            background: rgba(70, 130, 180, 0.2);
        }

        .weather-item.night {
            border-color: #191970;
            background: rgba(25, 25, 112, 0.2);
        }

        .weather-item.moonlight {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.2);
        }

        .weather-item.meteor {
            border-color: #ff6347;
            background: rgba(255, 99, 71, 0.2);
        }
        .weather-item.acid {
            border-color: #9acd32;
            background: rgba(154, 205, 50, 0.2);
        }

        .weather-item.diamond {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.2);
        }

        .weather-item.emerald {
            border-color: #50c878;
            background: rgba(80, 200, 120, 0.2);
        }

        .weather-item.adminabuse {
            border-color: #ff00ff;
            background: rgba(255, 0, 255, 0.2);
        }

        .weather-item.earthquake {
            border-color: #ff4500;
            background: rgba(255, 69, 0, 0.2);
        }

        .weather-item.thunderstorm {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.2);
        }

        .weather-item.superstorm {
            border-color: #8b00ff;
            background: rgba(139, 0, 255, 0.2);
        }

        .weather-item.winteraurora {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.2);
        }

        .weather-item.shootingstars {
            border-color: #ffe4b5;
            background: rgba(255, 228, 181, 0.2);
        }

        .weather-item.permafrost {
            border-color: #00bfff;
            background: rgba(0, 191, 255, 0.2);
        }

        .weather-item.cyclone {
            border-color: #adff2f;
            background: rgba(173, 255, 47, 0.2);
        }

        .weather-item.dissonant {
            border-color: #ff1493;
            background: rgba(255, 20, 147, 0.2);
        }

        .weather-item.beestorm {
            border-color: #ffa500;
            background: rgba(255, 165, 0, 0.2);
        }

        .weather-item.tropicalrain {
            border-color: #32cd32;
            background: rgba(50, 205, 50, 0.2);
        }

        .weather-item.gentledrizzle {
            border-color: #87ceeb;
            background: rgba(135, 206, 235, 0.2);
        }

        .weather-item.ownerabuse {
            border-color: #ff0000;
            background: rgba(255, 0, 0, 0.3);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
            animation: ownerPulse 2s infinite;
        }

        @keyframes ownerPulse {
            0%, 100% {
                border-color: #ff0000;
                box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
            }
            50% {
                border-color: #ffd700;
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.8);
            }
        }

        @keyframes godPulse {
            0%, 100% {
                transform: scale(1);
                box-shadow: 0 0 30px rgba(255, 215, 0, 0.8), 0 0 60px rgba(255, 255, 255, 0.5);
            }
            50% {
                transform: scale(1.05);
                box-shadow: 0 0 50px rgba(255, 215, 0, 1), 0 0 80px rgba(255, 255, 255, 0.8);
            }
        }

        .weather-item.rainbowrain {
            border-color: #ff69b4;
            background: linear-gradient(135deg, rgba(255,0,0,0.2), rgba(255,165,0,0.2), rgba(255,255,0,0.2), rgba(0,255,0,0.2), rgba(0,0,255,0.2), rgba(75,0,130,0.2), rgba(238,130,238,0.2));
        }

        .weather-item.goldrain {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.3);
        }

        .weather-item.silverrain {
            border-color: #c0c0c0;
            background: rgba(192, 192, 192, 0.3);
        }

        .weather-item.cosmicrain {
            border-color: #4b0082;
            background: rgba(75, 0, 130, 0.3);
        }

        .weather-item.secretrain {
            border-color: #8a2be2;
            background: rgba(138, 43, 226, 0.3);
        }

        .weather-item.whitehole {
            border-color: #ffffff;
            background: rgba(255, 255, 255, 0.3);
        }

        .weather-item.supernova {
            border-color: #ff4500;
            background: rgba(255, 69, 0, 0.3);
        }

        .weather-item.nancorenova {
            border-color: #00ffff;
            background: rgba(0, 255, 255, 0.3);
        }

        .weather-item.corruptzenaura {
            border-color: #800080;
            background: rgba(128, 0, 128, 0.3);
        }

        .weather-item.fullmoon {
            border-color: #f0e68c;
            background: rgba(240, 230, 140, 0.3);
        }

        .weather-item.safaridusk {
            border-color: #ff8c00;
            background: rgba(255, 140, 0, 0.3);
        }

        .weather-item.yetinight {
            border-color: #add8e6;
            background: rgba(173, 216, 230, 0.3);
        }

        .weather-item.silentnight {
            border-color: #191970;
            background: rgba(25, 25, 112, 0.3);
        }

        .weather-item.boomboxparty {
            border-color: #ff1493;
            background: rgba(255, 20, 147, 0.3);
        }

        .weather-item.frozeniceking {
            border-color: #00bfff;
            background: rgba(0, 191, 255, 0.3);
        }

        .weather-item.radioactiverain {
            border-color: #00ff00;
            background: rgba(0, 255, 0, 0.3);
        }

        .weather-item.oilrain {
            border-color: #000000;
            background: rgba(50, 50, 50, 0.5);
        }

        .weather-item.sandstrike {
            border-color: #daa520;
            background: rgba(218, 165, 32, 0.3);
            box-shadow: 0 0 15px rgba(218, 165, 32, 0.4);
        }

        /* EGG SHOP & PETS */
        .diamond-display {
            font-size: 1.3em;
            color: #00ffff;
            font-weight: bold;
            margin-left: 20px;
        }

        .egg-shop {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(0, 255, 255, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .egg-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .egg-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #00ffff;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .egg-card:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px rgba(0, 255, 255, 0.5);
        }

        .egg-details-btn {
            margin-top: 10px;
            padding: 5px 15px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid #00ffff;
            border-radius: 5px;
            color: white;
            font-size: 0.85em;
            cursor: pointer;
            transition: all 0.2s;
        }

        .egg-details-btn:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .egg-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .egg-name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .egg-price {
            color: #00ffff;
            font-size: 1.1em;
            font-weight: bold;
        }

        .pets-panel {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .pet-inventory-section {
            margin-bottom: 30px;
        }

        .equipped-pets-bar {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 15px 0;
            padding: 15px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            border: 2px solid #00ff00;
        }

        .equipped-slot {
            width: 80px;
            height: 80px;
            background: rgba(255, 255, 255, 0.1);
            border: 2px dashed #666;
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
        }

        .equipped-slot.filled {
            border: 2px solid #00ff00;
            background: rgba(0, 255, 0, 0.1);
        }

        .equipped-pet-icon {
            font-size: 2em;
        }

        .equipped-pet-mult {
            font-size: 0.7em;
            color: #00ff00;
            font-weight: bold;
        }

        .unequip-btn {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff4444;
            border: none;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 0.7em;
            cursor: pointer;
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .unequip-btn:hover {
            background: #ff0000;
        }

        .pets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .pet-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #ffd700;
            border-radius: 8px;
            padding: 10px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
        }

        .pet-card:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
        }

        .pet-card.equipped {
            border-color: #00ff00;
            background: rgba(0, 255, 0, 0.15);
        }

        .pet-equipped-badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background: #00ff00;
            color: #000;
            font-size: 0.7em;
            padding: 2px 6px;
            border-radius: 10px;
            font-weight: bold;
        }

        .pet-icon {
            font-size: 2.5em;
        }

        .pet-name {
            font-size: 0.9em;
            margin-top: 5px;
        }

        .pet-multiplier {
            color: #00ff00;
            font-weight: bold;
            font-size: 0.85em;
        }

        .pet-count {
            color: #ffd700;
            font-size: 0.8em;
        }

        .pet-actions {
            margin-top: 5px;
            display: flex;
            gap: 5px;
            justify-content: center;
        }

        .equip-btn {
            padding: 4px 10px;
            background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%);
            border: none;
            border-radius: 5px;
            color: #000;
            font-weight: bold;
            font-size: 0.75em;
            cursor: pointer;
        }

        .equip-btn:hover {
            transform: scale(1.05);
        }

        .equip-btn:disabled {
            background: #666;
            cursor: not-allowed;
        }

        .section-subtitle {
            font-size: 1.1em;
            margin-bottom: 10px;
            color: #ffd700;
            text-align: center;
        }

        .hatch-animation {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            border: 5px solid #ffd700;
            border-radius: 20px;
            padding: 40px;
            z-index: 10000;
            text-align: center;
            min-width: 400px;
            animation: hatchPulse 0.5s infinite;
        }

        .egg-details-modal {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.95);
            border: 3px solid #00ffff;
            border-radius: 15px;
            padding: 30px;
            z-index: 10000;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .egg-details-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 9999;
        }

        .egg-details-title {
            font-size: 1.8em;
            margin-bottom: 20px;
            color: #00ffff;
        }

        .pet-chance-list {
            text-align: left;
            margin: 20px 0;
        }

        .pet-chance-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            margin: 8px 0;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
            border-left: 4px solid #ffd700;
        }

        .pet-chance-item.legendary {
            border-left-color: #ff69b4;
            background: rgba(255, 105, 180, 0.1);
        }

        .pet-chance-item.epic {
            border-left-color: #9370db;
            background: rgba(147, 112, 219, 0.1);
        }

        .pet-chance-item.rare {
            border-left-color: #4169e1;
            background: rgba(65, 105, 225, 0.1);
        }

        .pet-chance-item.common {
            border-left-color: #90ee90;
            background: rgba(144, 238, 144, 0.1);
        }

        .pet-chance-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pet-chance-icon {
            font-size: 1.5em;
        }

        .pet-chance-name {
            font-weight: bold;
        }

        .pet-chance-mult {
            color: #00ff00;
            font-size: 0.9em;
        }

        .pet-chance-percent {
            font-size: 1.1em;
            font-weight: bold;
            color: #ffd700;
        }

        .close-modal-btn {
            margin-top: 20px;
            padding: 10px 30px;
            background: linear-gradient(135deg, #00ffff 0%, #0080ff 100%);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            font-size: 1em;
        }

        .close-modal-btn:hover {
            transform: scale(1.05);
        }

        @keyframes hatchPulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); }
            50% { transform: translate(-50%, -50%) scale(1.05); }
        }

        .hatch-egg {
            font-size: 6em;
            margin-bottom: 20px;
            animation: shake 0.5s infinite;
        }

        @keyframes shake {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }

        .hatch-result {
            font-size: 8em;
            margin: 20px 0;
        }

        .hatch-text {
            font-size: 1.5em;
            margin-bottom: 10px;
        }

        .hatch-multiplier {
            color: #00ff00;
            font-size: 1.3em;
            font-weight: bold;
        }

        .weather-info {
            flex: 1;
        }

        .weather-name {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 3px;
        }

        .weather-effect {
            font-size: 0.85em;
            color: #ddd;
        }

        .weather-timer {
            font-size: 1.1em;
            font-weight: bold;
            color: #ffd700;
            min-width: 45px;
            text-align: right;
        }

        .weather-empty {
            text-align: center;
            color: #999;
            font-style: italic;
            padding: 20px;
        }

        @keyframes weatherFadeIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .admin-status {
            color: #00ff00;
            font-weight: bold;
            margin-top: 5px;
        }

        .save-panel {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
            text-align: center;
        }

        .save-title {
            font-size: 1.5em;
            margin-bottom: 15px;
        }

        .save-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }

        .save-button, .load-button {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 1em;
        }

        .save-button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .load-button {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .save-button:hover, .load-button:hover {
            transform: scale(1.05);
        }

        .save-button:active, .load-button:active {
            transform: scale(0.95);
        }

        .file-input {
            display: none;
        }

        .save-info {
            margin-top: 15px;
            font-size: 0.9em;
            color: #ddd;
        }

        .gamepass-panel {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 215, 0, 0.5);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .gamepass-title {
            font-size: 1.5em;
            margin-bottom: 15px;
            text-align: center;
            color: #ffd700;
        }

        .gamepass-input-section {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .gamepass-input {
            padding: 10px;
            border-radius: 5px;
            border: 2px solid #ffd700;
            background: rgba(0, 0, 0, 0.3);
            color: white;
            width: 200px;
            font-size: 1em;
        }

        .redeem-button {
            padding: 10px 20px;
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            border: none;
            border-radius: 5px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .redeem-button:hover {
            transform: scale(1.05);
        }

        .gamepass-list {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .gamepass-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .gamepass-card.vip {
            border-color: #4169e1;
        }

        .gamepass-card.premium {
            border-color: #9370db;
        }

        .gamepass-card.legend {
            border-color: #ffd700;
        }

        .gamepass-card.owned {
            background: rgba(0, 255, 0, 0.1);
        }

        .gamepass-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .gamepass-benefits {
            font-size: 0.9em;
            color: #ddd;
            text-align: left;
            margin-top: 10px;
        }

        .gamepass-benefits li {
            margin: 5px 0;
        }

        .gamepass-status {
            margin-top: 10px;
            padding: 5px;
            border-radius: 5px;
            font-weight: bold;
        }

        .gamepass-status.owned {
            background: rgba(0, 255, 0, 0.3);
            color: #00ff00;
        }

        .gamepass-status.not-owned {
            background: rgba(255, 0, 0, 0.3);
            color: #ff6b6b;
        }

        .potion-shop, .inventory-panel {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .section-title {
            font-size: 1.5em;
            margin-bottom: 15px;
            text-align: center;
        }

        .potion-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .potion-card {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .potion-card.x2 {
            border-color: #4169e1;
        }

        .potion-card.x3 {
            border-color: #9370db;
        }

        .potion-card.x4 {
            border-color: #ff6347;
        }

        .potion-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .potion-name {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .potion-effect {
            font-size: 0.9em;
            color: #ddd;
            margin-bottom: 10px;
        }

        .buy-potion-button {
            padding: 8px 16px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
        }

        .buy-potion-button:hover {
            transform: scale(1.05);
        }

        .buy-potion-button.disabled {
            background: #666;
            cursor: not-allowed;
        }

        .inventory-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .inventory-item {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid #ffd700;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .inventory-count {
            font-size: 1.5em;
            color: #ffd700;
            margin: 10px 0;
        }

        .use-button {
            padding: 8px 16px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            border-radius: 5px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
        }

        .use-button:hover {
            transform: scale(1.05);
        }

        .use-button.disabled {
            background: #666;
            cursor: not-allowed;
        }

        .potion-timer {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.9);
            border: 3px solid #ffd700;
            border-radius: 15px;
            padding: 20px 40px;
            font-size: 2em;
            font-weight: bold;
            z-index: 1000;
            display: none;
            box-shadow: 0 0 30px rgba(255, 215, 0, 0.5);
        }

        .potion-timer.active {
            display: block;
        }

        .afk-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .afk-overlay.active {
            display: flex;
        }

        .afk-modal {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border: 3px solid #ff6b6b;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 500px;
        }

        .afk-title {
            font-size: 2.5em;
            margin-bottom: 20px;
            color: #ff6b6b;
        }

        .afk-message {
            font-size: 1.2em;
            margin-bottom: 30px;
            line-height: 1.6;
        }

        .afk-button {
            padding: 15px 40px;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .afk-button:hover {
            transform: scale(1.05);
        }

        .afk-warning {
            position: fixed;
            top: 100px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 107, 107, 0.95);
            border: 2px solid #ff0000;
            border-radius: 10px;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            z-index: 1001;
            display: none;
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
        }

        .afk-warning.active {
            display: block;
            animation: pulse 1s infinite;
        }

        .rebirth-panel {
            background: rgba(255, 215, 0, 0.2);
            border: 3px solid #ffd700;
            border-radius: 10px;
            padding: 20px;
            margin-top: 30px;
        }

        .rebirth-title {
            font-size: 1.8em;
            text-align: center;
            margin-bottom: 15px;
            color: #ffd700;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .rebirth-info {
            text-align: center;
            margin-bottom: 20px;
            font-size: 1.1em;
        }

        .rebirth-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .rebirth-stat {
            background: rgba(0, 0, 0, 0.3);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .rebirth-stat-label {
            font-size: 0.9em;
            color: #ddd;
            margin-bottom: 5px;
        }

        .rebirth-stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #ffd700;
        }

        .rebirth-button {
            padding: 15px 40px;
            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
            border: none;
            border-radius: 10px;
            color: #000;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            width: 100%;
            margin-top: 10px;
        }

        .rebirth-button:hover {
            transform: scale(1.02);
        }

        .rebirth-button.disabled {
            background: #666;
            cursor: not-allowed;
            opacity: 0.5;
        }

        .ban-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 0, 0, 0.95);
            z-index: 10000;
            display: none;
            justify-content: center;
            align-items: center;
        }

        .ban-overlay.active {
            display: flex;
        }

        .ban-modal {
            background: #000;
            border: 5px solid #ff0000;
            border-radius: 20px;
            padding: 40px;
            text-align: center;
            max-width: 600px;
            box-shadow: 0 0 50px rgba(255, 0, 0, 0.8);
        }

        .ban-title {
            font-size: 3em;
            margin-bottom: 20px;
            color: #ff0000;
            text-shadow: 0 0 20px rgba(255, 0, 0, 0.8);
        }

        .ban-message {
            font-size: 1.3em;
            margin-bottom: 30px;
            line-height: 1.8;
            color: #fff;
        }

        .discount-ticket-timer {
            position: fixed;
            top: 150px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 200, 0, 0.95);
            border: 2px solid #00ff00;
            border-radius: 10px;
            padding: 15px 30px;
            font-size: 1.1em;
            font-weight: bold;
            z-index: 1001;
            display: none;
            box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }

        .discount-ticket-timer.active {
            display: block;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .admin-panel, .playtime-panel {
                position: static;
                margin-bottom: 20px;
            }

            .potion-timer {
                font-size: 1.5em;
                padding: 15px 30px;
            }

            .afk-modal {
                padding: 30px 20px;
                margin: 20px;
            }

            .afk-title {
                font-size: 2em;
            }

            .afk-message {
                font-size: 1em;
            }
        }
    </style>
</head>
<body>
    <!-- Ban Overlay -->
    <div class="ban-overlay" id="banOverlay">
        <div class="ban-modal">
            <div class="ban-title">üö´ B·∫†N ƒê√É B·ªä BAN!</div>
            <div class="ban-message">
                ‚ö†Ô∏è H·ªÜ TH·ªêNG ANTI-CHEAT ƒê√É PH√ÅT HI·ªÜN B·∫†N S·ª¨ D·ª§NG AUTO CLICKER ‚ö†Ô∏è<br>
                <br>
                B·∫°n ƒë√£ click v·ªõi t·ªëc ƒë·ªô KH√îNG TH·ªÇ th·ª±c hi·ªán b·∫±ng tay ng∆∞·ªùi.<br>
                <br>
                <strong style="color: #ff6b6b;">T√ÄI KHO·∫¢N ƒê√É B·ªä KH√ìA Vƒ®NH VI·ªÑN!</strong><br>
                <br>
                Vui l√≤ng l√†m m·ªõi trang ƒë·ªÉ b·∫Øt ƒë·∫ßu l·∫°i.<br>
                Ch∆°i c√¥ng b·∫±ng!
            </div>
        </div>
    </div>

    <!-- Discount Ticket Timer -->
    <div class="discount-ticket-timer" id="discountTicketTimer">
        üí≥ V√© gi·∫£m gi√° <span id="ticketDiscountPercent">0</span>% - <span id="ticketTimeLeft">60</span>s
    </div>

    <!-- Playtime Panel -->
    <div class="playtime-panel">
        ‚è±Ô∏è Th·ªùi gian: <span id="playTime">00:00:00</span>
    </div>

    <!-- AFK Warning -->
    <div class="afk-warning" id="afkWarning">
        ‚ö†Ô∏è AFK Warning: <span id="afkCountdown">60</span>s
    </div>

    <!-- AFK Overlay -->
    <div class="afk-overlay" id="afkOverlay">
        <div class="afk-modal">
            <div class="afk-title">‚ö†Ô∏è ANTI-AFK</div>
            <div class="afk-message">
                B·∫°n ƒë√£ kh√¥ng ho·∫°t ƒë·ªông trong 30 ph√∫t!<br>
                Game ƒë√£ b·ªã kh√≥a ƒë·ªÉ tr√°nh AFK farm.<br>
                <br>
                Nh·∫•n n√∫t b√™n d∆∞·ªõi ƒë·ªÉ ti·∫øp t·ª•c ch∆°i.
            </div>
            <button class="afk-button" onclick="resumeFromAFK()">
                ‚úÖ T√¥i ƒë√£ quay l·∫°i!
            </button>
        </div>
    </div>

    <!-- Potion Timer Display -->
    <div class="potion-timer" id="potionTimer">
        <div id="potionTimerText">x2 - 60s</div>
    </div>

    <!-- Admin Panel -->
    <div class="admin-panel" id="adminPanel">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <div style="font-size: 1.2em;">üîê Admin Panel</div>
            <button onclick="toggleAdminPanel()" id="toggleAdminBtn" style="
                padding: 5px 15px;
                background: linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%);
                border: 2px solid #ff4444;
                border-radius: 5px;
                color: white;
                font-weight: bold;
                cursor: pointer;
                font-size: 0.9em;
            ">üëÅÔ∏è ·∫®n</button>
        </div>
        <div id="adminPanelContent">
            <input type="password" id="adminCode" class="admin-input" placeholder="Nh·∫≠p admin code">
            <button class="admin-button" onclick="checkAdminCode()">ƒêƒÉng nh·∫≠p</button>
            <div id="adminStatus"></div>
            <div id="adminControls" style="display: none;" class="admin-controls">
            <button class="admin-money-button" onclick="addAdminMoney()">üí∞ +100K Coins</button>
            <button class="admin-money-button" onclick="addAdminDiamonds()" style="background: linear-gradient(135deg, #00ffff 0%, #0080ff 100%); margin-top: 10px;">üíé +1000 Diamonds</button>
            
            <div class="weather-controls">
                <div class="weather-control-title">üå¶Ô∏è Tri·ªáu h·ªìi Th·ªùi ti·∫øt</div>
               <div class="weather-buttons">
                    <button class="weather-summon-btn" onclick="summonWeather('wind')">üí® Gi√≥</button>
                    <button class="weather-summon-btn" onclick="summonWeather('cloud')">‚òÅÔ∏è M√¢y</button>
                    <button class="weather-summon-btn" onclick="summonWeather('rain')">üåßÔ∏è M∆∞a</button>
                    <button class="weather-summon-btn" onclick="summonWeather('night')">üåô ƒê√™m</button>
                    <button class="weather-summon-btn" onclick="summonWeather('moonlight')">‚ú® TrƒÉng</button>
                    <button class="weather-summon-btn" onclick="summonWeather('meteor')">‚òÑÔ∏è Sao</button>
                    <button class="weather-summon-btn" onclick="summonWeather('acid')">‚ò£Ô∏è Acid</button>
                    <button class="weather-summon-btn" onclick="summonWeather('diamond')">üíé Kim C∆∞∆°ng</button>
                    <button class="weather-summon-btn" onclick="summonWeather('emerald')">üíö L·ª•c Kim</button>
                    <button class="weather-summon-btn" onclick="summonWeather('adminabuse')">üõ∏ Admin</button>
                    <button class="weather-summon-btn" onclick="summonWeather('earthquake')">üåã ƒê·ªông ƒê·∫•t</button>
                    <button class="weather-summon-btn" onclick="summonWeather('thunderstorm')">‚ö° B√£o S·∫•m</button>
                    <button class="weather-summon-btn" onclick="summonWeather('superstorm')">üå™Ô∏è Si√™u B√£o</button>
                    <button class="weather-summon-btn" onclick="summonWeather('winteraurora')">üåå C·ª±c Quang</button>
                    <button class="weather-summon-btn" onclick="summonWeather('shootingstars')">üå† M∆∞a Sao</button>
                    <button class="weather-summon-btn" onclick="summonWeather('permafrost')">‚ùÑÔ∏èüî• N·ªï BƒÉng</button>
                    <button class="weather-summon-btn" onclick="summonWeather('cyclone')">üåÄ L·ªëc Xo√°y</button>
                    <button class="weather-summon-btn" onclick="summonWeather('dissonant')">üé≠ H·ªón Lo·∫°n</button>
                    <button class="weather-summon-btn" onclick="summonWeather('beestorm')">üêù B√£o Ong</button>
                    <button class="weather-summon-btn" onclick="summonWeather('tropicalrain')">üå¥ M∆∞a Nhi·ªát ƒê·ªõi</button>
                    <button class="weather-summon-btn" onclick="summonWeather('gentledrizzle')">üåßÔ∏èüíß M∆∞a Ph√πn</button>
                    <button class="weather-summon-btn" onclick="summonWeather('ownerabuse')" style="background: linear-gradient(135deg, #ff0000 0%, #ffd700 100%);">‚öúÔ∏è OWNER</button>
                    <button class="weather-summon-btn" onclick="summonWeather('rainbowrain')">üåà Rainbow</button>
                    <button class="weather-summon-btn" onclick="summonWeather('goldrain')">üí∞ Gold</button>
                    <button class="weather-summon-btn" onclick="summonWeather('silverrain')">ü™ô Silver</button>
                    <button class="weather-summon-btn" onclick="summonWeather('cosmicrain')">üåå Cosmic</button>
                    <button class="weather-summon-btn" onclick="summonWeather('secretrain')">üîÆ Secret</button>
                    <button class="weather-summon-btn" onclick="summonWeather('whitehole')">‚ö™ White Hole</button>
                    <button class="weather-summon-btn" onclick="summonWeather('supernova')">üí• Supernova</button>
                    <button class="weather-summon-btn" onclick="summonWeather('nancorenova')">‚öõÔ∏è Nancore</button>
                    <button class="weather-summon-btn" onclick="summonWeather('corruptzenaura')">üëπ Corrupt Zen</button>
                    <button class="weather-summon-btn" onclick="summonWeather('fullmoon')">üåï Full Moon</button>
                    <button class="weather-summon-btn" onclick="summonWeather('safaridusk')">üåÖ Safari</button>
                    <button class="weather-summon-btn" onclick="summonWeather('yetinight')">üèîÔ∏è Yeti</button>
                    <button class="weather-summon-btn" onclick="summonWeather('silentnight')">üåÉ Silent</button>
                    <button class="weather-summon-btn" onclick="summonWeather('boomboxparty')">üéµ Boombox</button>
                    <button class="weather-summon-btn" onclick="summonWeather('frozeniceking')">‚ùÑÔ∏èüëë Ice King</button>
                    <button class="weather-summon-btn" onclick="summonWeather('radioactiverain')">‚ò¢Ô∏è Radioactive</button>
                    <button class="weather-summon-btn" onclick="summonWeather('oilrain')">üõ¢Ô∏è Oil</button>
                    <button class="weather-summon-btn" onclick="summonWeather('sandstrike')">üèúÔ∏è Sand</button>
                </div>
                <button class="weather-clear-btn" onclick="clearAllWeather()">üö´ X√≥a t·∫•t c·∫£ th·ªùi ti·∫øt</button>
            </div>

            <div class="weather-controls" style="margin-top: 20px;">
                <div class="weather-control-title">üêæ Tri·ªáu H·ªìi Pet</div>
                <div class="weather-buttons">
                    <button class="weather-summon-btn" onclick="summonPet('Bunny', 'üê∞', 1.1)">üê∞ Bunny</button>
                    <button class="weather-summon-btn" onclick="summonPet('Dog', 'üêï', 1.1)">üêï Dog</button>
                    <button class="weather-summon-btn" onclick="summonPet('Golden Lab', 'ü¶Æ', 1.15)">ü¶Æ Golden Lab</button>
                    <button class="weather-summon-btn" onclick="summonPet('Black Bunny', 'üêá', 1.2)">üêá Black Bunny</button>
                    <button class="weather-summon-btn" onclick="summonPet('Cat', 'üêà', 1.2)">üêà Cat</button>
                    <button class="weather-summon-btn" onclick="summonPet('Chicken', 'üêî', 1.2)">üêî Chicken</button>
                    <button class="weather-summon-btn" onclick="summonPet('Deer', 'ü¶å', 1.25)">ü¶å Deer</button>
                    <button class="weather-summon-btn" onclick="summonPet('Orange Tabby', 'üêà‚Äç‚¨õ', 1.5)">üêà‚Äç‚¨õ Orange Tabby</button>
                    <button class="weather-summon-btn" onclick="summonPet('Spotted Deer', 'ü¶å', 1.6)">ü¶å Spotted Deer</button>
                    <button class="weather-summon-btn" onclick="summonPet('Pig', 'üê∑', 1.7)">üê∑ Pig</button>
                    <button class="weather-summon-btn" onclick="summonPet('Rooster', 'üêì', 1.7)">üêì Rooster</button>
                    <button class="weather-summon-btn" onclick="summonPet('Monkey', 'üêí', 2)">üêí Monkey</button>
                    <button class="weather-summon-btn" onclick="summonPet('Cow', 'üêÑ', 2.5)">üêÑ Cow</button>
                    <button class="weather-summon-btn" onclick="summonPet('Silver Monkey', 'üêµ', 2.5)">üêµ Silver Monkey</button>
                    <button class="weather-summon-btn" onclick="summonPet('Sea Otter', 'ü¶¶', 3)">ü¶¶ Sea Otter</button>
                    <button class="weather-summon-btn" onclick="summonPet('Polar Bear', 'üêª‚Äç‚ùÑÔ∏è', 5)">üêª‚Äç‚ùÑÔ∏è Polar Bear</button>
                    <button class="weather-summon-btn" onclick="summonPet('Turtle', 'üê¢', 5)">üê¢ Turtle</button>
                    <button class="weather-summon-btn" onclick="summonPet('Grey Mouse', 'üê≠', 3)">üê≠ Grey Mouse</button>
                    <button class="weather-summon-btn" onclick="summonPet('Brown Mouse', 'üê≠', 3.5)">üê≠ Brown Mouse</button>
                    <button class="weather-summon-btn" onclick="summonPet('Squirrel', 'üêøÔ∏è', 3.5)">üêøÔ∏è Squirrel</button>
                    <button class="weather-summon-btn" onclick="summonPet('Red Giant Ant', 'üêú', 5)">üêú Red Giant Ant</button>
                    <button class="weather-summon-btn" onclick="summonPet('Red Fox', 'ü¶ä', 15)">ü¶ä Red Fox</button>
                    <button class="weather-summon-btn" onclick="summonPet('Queen Bee', 'üëë', 30)">üëë Queen Bee</button>
                    <button class="weather-summon-btn" onclick="summonPet('Disco Bee', 'üíé', 40)">üíé Disco Bee</button>
                    <button class="weather-summon-btn" onclick="summonPet('Hacker Dog', 'üêï‚Äçü¶∫', 40)" style="background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%);">üíª Hacker Dog</button>
                    <button class="weather-summon-btn" onclick="summonPet('Hacker Bunny', 'üê∞', 50)" style="background: linear-gradient(135deg, #00ff00 0%, #00cc00 100%);">üíª Hacker Bunny</button>
                    <button class="weather-summon-btn" onclick="summonPet(`Admin's Dog`, 'üêï‚Äçü¶∫', 20)" style="background: linear-gradient(135deg, #ff6b6b 0%, #ffd700 100%);">üêï‚Äçü¶∫ Admin's Dog</button>
                    <button class="weather-summon-btn" onclick="summonPet(`Admin's Cat`, 'üò∫', 25)" style="background: linear-gradient(135deg, #ff6b6b 0%, #ffd700 100%);">üò∫ Admin's Cat</button>
                    <button class="weather-summon-btn" onclick="summonPet('Bird Admin', 'ü¶Ö', 35)" style="background: linear-gradient(135deg, #ff6b6b 0%, #ffd700 100%);">ü¶Ö Bird Admin</button>
                    <button class="weather-summon-btn" onclick="summonPet(`God's Pet`, 'üåü', 30)" style="background: linear-gradient(135deg, #ffd700 0%, #ffffff 50%, #ffd700 100%); font-weight: bold; box-shadow: 0 0 30px rgba(255, 215, 0, 0.8); animation: godPulse 2s infinite;">üåü GOD'S PET</button>
                </div>
            </div>
        </div>
        </div> <!-- Close adminPanelContent -->
    </div>

    <!-- Weather Panel -->
    <div class="weather-panel" id="weatherPanel">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
            <div class="weather-title">üå¶Ô∏è Th·ªùi Ti·∫øt Hi·ªán T·∫°i</div>
            <button onclick="toggleWeatherPanel()" id="toggleWeatherBtn" style="
                padding: 5px 15px;
                background: linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%);
                border: 2px solid #ff4444;
                border-radius: 5px;
                color: white;
                font-weight: bold;
                cursor: pointer;
                font-size: 0.9em;
            ">üëÅÔ∏è ·∫®n</button>
        </div>
        <div id="weatherCountHidden" style="display: none; color: #00ffff; font-size: 1.1em; margin-bottom: 10px;">
            S·ªë th·ªùi ti·∫øt hi·ªán t·∫°i: <strong><span id="weatherCountNumber">0</span></strong>
        </div>
        <div id="weatherPanelContent">
            <div class="weather-list" id="weatherList">
                <div class="weather-empty">Kh√¥ng c√≥ th·ªùi ti·∫øt n√†o</div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="header">
            <h1>üç™ Cookie Clicker</h1>
            <div class="coins-display">
                <span>üí∞</span>
                <span id="coins">1</span>
                <span class="diamond-display">
                    üíé <span id="diamonds">0</span>
                </span>
            </div>
            <div class="stats">
                Click Power: <span id="clickPower">1</span> | 
                Auto: <span id="autoClickers">0</span>/s | 
                Multiplier: x<span id="multiplier">1</span> |
                Click Cooldown: <span id="clickCooldown">0.5</span>s |
                Rebirth: x<span id="rebirthMultiplierDisplay">1</span> |
                <span style="color: #00ff00;">üêæ Pets: x<span id="petMultiplierDisplay">1</span></span> |
                Gi·∫£m gi√°: <span id="discountDisplay">0</span>% |
                V√© gi·∫£m: <span id="ticketDiscountDisplay">0</span>% |
                Gi·ªõi h·∫°n mua: <span id="purchaseLimitDisplay">5</span>
            </div>
        </div>

        <!-- Cookie Button - Centered -->
        <div style="display: flex; justify-content: center; align-items: center; min-height: 350px; margin-bottom: 50px;">
            <button class="click-button" id="clickButton">üç™</button>
        </div>

        <div class="main-content">
            <div class="shop-section" style="width: 100%; max-width: 1200px; margin: 0 auto;">
                <h2 class="shop-title">üõí Shop</h2>
                <div class="shop-items" id="shopItems">
                    <!-- Items will be generated here -->
                </div>
            </div>

            <!-- Save/Load Panel -->
            <div class="save-panel">
                <div class="save-title">üíæ Save & Load Game</div>
                <div class="save-buttons">
                    <button class="save-button" onclick="saveGame()">üì• Export Save File</button>
                    <label for="loadFile" class="load-button" style="cursor: pointer; display: inline-block;">
                        üì§ Import Save File
                    </label>
                    <input type="file" id="loadFile" class="file-input" accept=".json" onchange="loadGame(event)">
                </div>
                <div class="save-info">
                    üí° Export ƒë·ªÉ l∆∞u game, Import ƒë·ªÉ t·∫£i l·∫°i ti·∫øn tr√¨nh
                </div>
            </div>

            <!-- Game Pass Panel -->
            <div class="gamepass-panel">
                <div class="gamepass-title">üé´ Game Pass Store</div>
                <div class="gamepass-input-section">
                    <input type="text" id="gamepassCode" class="gamepass-input" placeholder="Nh·∫≠p code Game Pass">
                    <button class="redeem-button" onclick="redeemGamePass()">üéÅ Redeem Code</button>
                </div>
                <div class="gamepass-list">
                    <div class="gamepass-card vip" id="vipCard">
                        <div class="gamepass-name">üíé VIP Pass</div>
                        <div>Code: <strong>VIP2025</strong></div>
                        <ul class="gamepass-benefits">
                            <li>‚ú® +30 Click Power</li>
                            <li>‚ö° Click Cooldown -0.15s</li>
                            <li>üí∞ +50 Auto Clickers/s</li>
                        </ul>
                        <div class="gamepass-status not-owned" id="vipStatus">‚ùå Ch∆∞a s·ªü h·ªØu</div>
                    </div>
                    <div class="gamepass-card premium" id="premiumCard">
                        <div class="gamepass-name">üëë Premium Pass</div>
                        <div>Code: <strong>PREMIUM999</strong></div>
                        <ul class="gamepass-benefits">
                            <li>üåü +100 Click Power</li>
                            <li>‚è±Ô∏è Click Cooldown -0.2s</li>
                            <li>ü§ñ +200 Auto Clickers/s</li>
                            <li>üéØ x2 Multiplier</li>
                        </ul>
                        <div class="gamepass-status not-owned" id="premiumStatus">‚ùå Ch∆∞a s·ªü h·ªØu</div>
                    </div>
                    <div class="gamepass-card legend" id="legendCard">
                        <div class="gamepass-name">üèÜ Legend Pass</div>
                        <div>Code: <strong>LEGEND777</strong></div>
                        <ul class="gamepass-benefits">
                            <li>‚ö° +500 Click Power</li>
                            <li>üöÄ Click Cooldown = 0.01s</li>
                            <li>üí´ +1000 Auto Clickers/s</li>
                            <li>üëë x5 Multiplier</li>
                            <li>üí∞ +500K coins kh·ªüi ƒë·∫ßu</li>
                        </ul>
                        <div class="gamepass-status not-owned" id="legendStatus">‚ùå Ch∆∞a s·ªü h·ªØu</div>
                    </div>
                </div>
            </div>

            <!-- Potion Shop -->
            <div class="potion-shop">
                <div class="section-title">üß™ C·ª≠a H√†ng Thu·ªëc</div>
                <div class="potion-grid">
                    <div class="potion-card x2">
                        <div class="potion-icon">üß™</div>
                        <div class="potion-name">Potion x2</div>
                        <div class="potion-effect">Nh√¢n ƒë√¥i thu nh·∫≠p 1 ph√∫t</div>
                        <button class="buy-potion-button" onclick="buyPotion('2x', 100)">
                            Mua - 100 üí∞
                        </button>
                    </div>
                    <div class="potion-card x3">
                        <div class="potion-icon">üß™</div>
                        <div class="potion-name">Potion x3</div>
                        <div class="potion-effect">Nh√¢n ba thu nh·∫≠p 1 ph√∫t</div>
                        <button class="buy-potion-button" onclick="buyPotion('3x', 3000)">
                            Mua - 3,000 üí∞
                        </button>
                    </div>
                    <div class="potion-card x4">
                        <div class="potion-icon">üß™</div>
                        <div class="potion-name">Potion x4</div>
                        <div class="potion-effect">Nh√¢n b·ªën thu nh·∫≠p 1 ph√∫t</div>
                        <button class="buy-potion-button" onclick="buyPotion('4x', 5000)">
                            Mua - 5,000 üí∞
                        </button>
                    </div>
                </div>
            </div>

            <!-- Discount Ticket Shop -->
            <div class="potion-shop">
                <div class="section-title">üí≥ C·ª≠a H√†ng V√© Gi·∫£m Gi√°</div>
                <div class="potion-grid">
                    <div class="potion-card x2">
                        <div class="potion-icon">üé´</div>
                        <div class="potion-name">V√© gi·∫£m 10%</div>
                        <div class="potion-effect">Gi·∫£m gi√° 10% trong 1 ph√∫t</div>
                        <button class="buy-potion-button" onclick="buyDiscountTicket(10, 100)">
                            Mua - 100 üí∞
                        </button>
                    </div>
                    <div class="potion-card x3">
                        <div class="potion-icon">üé´</div>
                        <div class="potion-name">V√© gi·∫£m 20%</div>
                        <div class="potion-effect">Gi·∫£m gi√° 20% trong 1 ph√∫t</div>
                        <button class="buy-potion-button" onclick="buyDiscountTicket(20, 500)">
                            Mua - 500 üí∞
                        </button>
                    </div>
                    <div class="potion-card x4">
                        <div class="potion-icon">üé´</div>
                        <div class="potion-name">V√© gi·∫£m 50%</div>
                        <div class="potion-effect">Gi·∫£m gi√° 50% trong 1 ph√∫t</div>
                        <button class="buy-potion-button" onclick="buyDiscountTicket(50, 100000)">
                            Mua - 100,000 üí∞
                        </button>
                    </div>
                </div>
            </div>

            <!-- Inventory -->
            <div class="inventory-panel">
                <div class="section-title">üéí T√∫i ƒê·ªì</div>
                <div class="inventory-grid">
                    <div class="inventory-item">
                        <div class="potion-icon">üß™</div>
                        <div class="potion-name">Potion x2</div>
                        <div class="inventory-count" id="inv2x">0</div>
                        <button class="use-button" onclick="usePotion('2x', 2)">
                            S·ª≠ d·ª•ng
                        </button>
                    </div>
                    <div class="inventory-item">
                        <div class="potion-icon">üß™</div>
                        <div class="potion-name">Potion x3</div>
                        <div class="inventory-count" id="inv3x">0</div>
                        <button class="use-button" onclick="usePotion('3x', 3)">
                            S·ª≠ d·ª•ng
                        </button>
                    </div>
                    <div class="inventory-item">
                        <div class="potion-icon">üß™</div>
                        <div class="potion-name">Potion x4</div>
                        <div class="inventory-count" id="inv4x">0</div>
                        <button class="use-button" onclick="usePotion('4x', 4)">
                            S·ª≠ d·ª•ng
                        </button>
                    </div>
                </div>
            </div>

            <!-- Rebirth Panel -->
            <div class="rebirth-panel">
                <div class="rebirth-title">üîÑ T√°i Sinh (Rebirth)</div>
                <div class="rebirth-info">
                    T√°i sinh s·∫Ω reset to√†n b·ªô ti·∫øn ƒë·ªô nh∆∞ng tƒÉng vƒ©nh vi·ªÖn thu nh·∫≠p!<br>
                    M·ªói l·∫ßn t√°i sinh: <strong>+0.75x thu nh·∫≠p</strong>
                </div>
                <div class="rebirth-stats">
                    <div class="rebirth-stat">
                        <div class="rebirth-stat-label">S·ªë l·∫ßn t√°i sinh</div>
                        <div class="rebirth-stat-value" id="rebirthCountDisplay">0</div>
                    </div>
                    <div class="rebirth-stat">
                        <div class="rebirth-stat-label">Multiplier hi·ªán t·∫°i</div>
                        <div class="rebirth-stat-value" id="rebirthMultiplierStat">x1.00</div>
                    </div>
                    <div class="rebirth-stat">
                        <div class="rebirth-stat-label">L·∫ßn t√°i sinh ti·∫øp theo</div>
                        <div class="rebirth-stat-value" id="nextRebirthReq">2,500 coins</div>
                    </div>
                    <div class="rebirth-stat">
                        <div class="rebirth-stat-label">Multiplier sau t√°i sinh</div>
                        <div class="rebirth-stat-value" id="nextRebirthMult">x1.75</div>
                    </div>
                </div>
                <button class="rebirth-button" id="rebirthButton" onclick="performRebirth()">
                    üîÑ T√°i Sinh - Y√™u c·∫ßu: <span id="rebirthReqText">2,500</span> coins
                </button>
            </div>

            <!-- Egg Shop -->
            <div class="egg-shop">
                <div class="section-title">ü•ö Egg Shop - Mua b·∫±ng Kim C∆∞∆°ng üíé</div>
                <div class="egg-grid" id="eggGrid">
                    <!-- Eggs will be generated here -->
                </div>
            </div>

            <!-- Pets Collection -->
            <div class="pets-panel">
                <div class="section-title">üêæ Pet System</div>
                
                <!-- Equipped Pets Bar -->
                <div class="pet-inventory-section">
                    <div class="section-subtitle">‚öîÔ∏è Pets ƒêang Trang B·ªã (T·ªëi ƒëa 5)</div>
                    <div style="text-align: center; margin-bottom: 10px;">
                        <button onclick="equipBestPets()" style="
                            padding: 10px 20px;
                            background: linear-gradient(135deg, #ffd700 0%, #ff8c00 100%);
                            border: 2px solid #ffd700;
                            border-radius: 8px;
                            color: #000;
                            font-weight: bold;
                            cursor: pointer;
                            font-size: 1em;
                            box-shadow: 0 0 15px rgba(255, 215, 0, 0.5);
                            transition: transform 0.2s;
                        " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            ‚≠ê S·ª≠ D·ª•ng Pet T·ªët Nh·∫•t
                        </button>
                        <button onclick="unequipAllPets()" style="
                            padding: 10px 20px;
                            background: linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%);
                            border: 2px solid #ff4444;
                            border-radius: 8px;
                            color: white;
                            font-weight: bold;
                            cursor: pointer;
                            font-size: 1em;
                            margin-left: 10px;
                            transition: transform 0.2s;
                        " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
                            ‚ùå G·ª° T·∫•t C·∫£
                        </button>
                    </div>
                    <div class="equipped-pets-bar" id="equippedPetsBar">
                        <!-- Equipped pets will be shown here -->
                    </div>
                </div>

                <!-- All Pets Collection -->
                <div class="pet-inventory-section">
                    <div class="section-subtitle">üì¶ T·∫•t C·∫£ Pets</div>
                    <div class="pets-grid" id="petsGrid">
                        <!-- Pets will be displayed here -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Hatch Animation -->
    <div id="hatchAnimation" style="display: none;"></div>

    <!-- Egg Details Modal -->
    <div id="eggDetailsOverlay" class="egg-details-overlay" style="display: none;" onclick="closeEggDetails()"></div>
    <div id="eggDetailsModal" class="egg-details-modal" style="display: none;"></div>

    <script>
        let coins = 0;
        let clickPower = 1;
        let autoClickers = 0;
        let multiplier = 1;
        let isAdmin = false;
        let clickCooldown = 0.5;
        let canClick = true;
        let gamePasses = {
            vip: false,
            premium: false,
            legend: false
        };
        let inventory = {
            potion_2x: 0,
            potion_3x: 0,
            potion_4x: 0
        };
        let activePotion = null;
        let potionTimer = 0;
        let potionInterval = null;
        let afkTimer = null;
        let afkTimeLeft = 1800;
        let isAfk = false;
        let playTime = 0;
        let playTimeInterval = null;
        let shopDiscount = 0;
        let rebirthCount = 0;
        let rebirthMultiplier = 1;
        let clickTimes = [];
        let isBanned = false;
        let discountTicket = 0;
        let discountTicketTimer = 0;
        let discountTicketInterval = null;
        let purchaseLimit = 5;
        let purchaseCounts = {};

        // ===== DIAMOND & PETS SYSTEM =====
        let diamonds = 0;
        let pets = [];
        let ownedPets = {};
        let equippedPets = []; // M·∫£ng ch·ª©a t·ªëi ƒëa 5 pets ƒëang ƒë∆∞·ª£c trang b·ªã
        const MAX_EQUIPPED_PETS = 5;

        // Egg data
        const eggShop = [
            {
                id: 1,
                name: 'Common Egg',
                icon: 'ü•ö',
                price: 10,
                pets: [
                    { name: 'Bunny', icon: 'üê∞', chance: 33.33, multiplier: 1.5 },
                    { name: 'Dog', icon: 'üêï', chance: 33.33, multiplier: 1.5 },
                    { name: 'Golden Lab', icon: 'ü¶Æ', chance: 33.33, multiplier: 2 }
                ]
            },
            {
                id: 2,
                name: 'Uncommon Egg',
                icon: 'ü•ö',
                price: 50,
                pets: [
                    { name: 'Black Bunny', icon: 'üêá', chance: 25, multiplier: 2 },
                    { name: 'Cat', icon: 'üêà', chance: 25, multiplier: 2 },
                    { name: 'Chicken', icon: 'üêî', chance: 25, multiplier: 2 },
                    { name: 'Deer', icon: 'ü¶å', chance: 25, multiplier: 2.5 }
                ]
            },
            {
                id: 3,
                name: 'Rare Egg',
                icon: 'ü•ö',
                price: 150,
                pets: [
                    { name: 'Orange Tabby', icon: 'üêà‚Äç‚¨õ', chance: 33.33, multiplier: 3 },
                    { name: 'Spotted Deer', icon: 'ü¶å', chance: 25, multiplier: 3 },
                    { name: 'Pig', icon: 'üê∑', chance: 16.67, multiplier: 4 },
                    { name: 'Rooster', icon: 'üêì', chance: 16.67, multiplier: 4 },
                    { name: 'Monkey', icon: 'üêí', chance: 8.33, multiplier: 5 }
                ]
            },
            {
                id: 4,
                name: 'Legendary Egg',
                icon: 'ü•ö',
                price: 500,
                pets: [
                    { name: 'Cow', icon: 'üêÑ', chance: 42.55, multiplier: 6 },
                    { name: 'Silver Monkey', icon: 'üêµ', chance: 42.55, multiplier: 6 },
                    { name: 'Sea Otter', icon: 'ü¶¶', chance: 10.64, multiplier: 8 },
                    { name: 'Polar Bear', icon: 'üêª‚Äç‚ùÑÔ∏è', chance: 2.13, multiplier: 10 },
                    { name: 'Turtle', icon: 'üê¢', chance: 2.13, multiplier: 10 }
                ]
            },
            {
                id: 5,
                name: 'Mythical Egg',
                icon: 'ü•ö',
                price: 1000,
                pets: [
                    { name: 'Grey Mouse', icon: 'üê≠', chance: 35.7, multiplier: 8 },
                    { name: 'Brown Mouse', icon: 'üê≠', chance: 26.8, multiplier: 9 },
                    { name: 'Squirrel', icon: 'üêøÔ∏è', chance: 26.8, multiplier: 9 },
                    { name: 'Red Giant Ant', icon: 'üêú', chance: 8.9, multiplier: 12 },
                    { name: 'Red Fox', icon: 'ü¶ä', chance: 1.8, multiplier: 15 }
                ]
            },
            {
                id: 6,
                name: 'Bug Egg',
                icon: 'ü•ö',
                price: 2000,
                pets: [
                    { name: 'Snail', icon: 'üêå', chance: 40, multiplier: 10 },
                    { name: 'Giant Ant', icon: 'üêú', chance: 30, multiplier: 12 },
                    { name: 'Caterpillar', icon: 'üêõ', chance: 25, multiplier: 14 },
                    { name: 'Praying Mantis', icon: 'ü¶ó', chance: 4, multiplier: 18 },
                    { name: 'Dragonfly', icon: 'ü¶ã', chance: 1, multiplier: 22 }
                ]
            },
            {
                id: 7,
                name: 'Night Egg',
                icon: 'üåô',
                price: 5000,
                pets: [
                    { name: 'Hedgehog', icon: 'ü¶î', chance: 47, multiplier: 12 },
                    { name: 'Mole', icon: 'ü¶°', chance: 23.5, multiplier: 14 },
                    { name: 'Frog', icon: 'üê∏', chance: 17.63, multiplier: 16 },
                    { name: 'Echo Frog', icon: 'üê∏', chance: 8.23, multiplier: 20 },
                    { name: 'Night Owl', icon: 'ü¶â', chance: 3.53, multiplier: 25 },
                    { name: 'Raccoon', icon: 'ü¶ù', chance: 0.12, multiplier: 30 }
                ]
            },
            {
                id: 8,
                name: 'Bee Egg',
                icon: 'üêù',
                price: 10000,
                pets: [
                    { name: 'Bee', icon: 'üêù', chance: 65, multiplier: 12 },
                    { name: 'Honey Bee', icon: 'üêù', chance: 25, multiplier: 15 },
                    { name: 'Bear Bee', icon: 'üêª', chance: 5, multiplier: 20 },
                    { name: 'Petal Bee', icon: 'üå∏', chance: 4, multiplier: 25 },
                    { name: 'Queen Bee', icon: 'üëë', chance: 1, multiplier: 30 }
                ]
            },
            {
                id: 9,
                name: 'Anti Bee Egg',
                icon: 'ü¶ü',
                price: 25000,
                pets: [
                    { name: 'Wasp', icon: 'ü¶ü', chance: 55, multiplier: 18 },
                    { name: 'Tarantula Hawk', icon: 'üï∑Ô∏è', chance: 30, multiplier: 22 },
                    { name: 'Moth', icon: 'ü¶ã', chance: 13.75, multiplier: 28 },
                    { name: 'Butterfly', icon: 'ü¶ã', chance: 1, multiplier: 35 },
                    { name: 'Disco Bee', icon: 'üíé', chance: 0.25, multiplier: 40 }
                ]
            },
            {
                id: 10,
                name: 'Admin Egg',
                icon: 'üëë',
                price: 500000,
                pets: [
                    { name: "Admin's Dog", icon: 'üêï‚Äçü¶∫', chance: 50, multiplier: 20 },
                    { name: "Admin's Cat", icon: 'üò∫', chance: 30, multiplier: 25 },
                    { name: 'Bird Admin', icon: 'ü¶Ö', chance: 20, multiplier: 35 }
                ]
            },
            {
                id: 11,
                name: 'Hacker Egg',
                icon: 'üíª',
                price: 200000,
                pets: [
                    { name: 'Hacker Dog', icon: 'üêï‚Äçü¶∫', chance: 60, multiplier: 40 },
                    { name: 'Hacker Bunny', icon: 'üê∞', chance: 40, multiplier: 50 }
                ]
            },
            {
                id: 12,
                name: 'God Egg',
                icon: '‚öúÔ∏è',
                price: 10000000,
                pets: [
                    { name: "God's Pet", icon: 'üåü', chance: 100, multiplier: 30 }
                ]
            }
        ];

        // ===== WEATHER SYSTEM =====
        let activeWeathers = [];
        let weatherTimers = {};
        let weatherIntervals = {};
        
        // ===== NUMBER FORMATTING =====
        function formatNumber(num) {
            if (num < 1000) return Math.floor(num).toString();
            
            const suffixes = [
                { value: 1e63, symbol: 'VG' },   // Vigintillion
                { value: 1e60, symbol: 'ND' },   // Novemdecillion
                { value: 1e57, symbol: 'OD' },   // Octodecillion
                { value: 1e54, symbol: 'SD' },   // Septendecillion
                { value: 1e51, symbol: 'SXD' },  // Sexdecillion
                { value: 1e48, symbol: 'QID' },  // Quindecillion
                { value: 1e45, symbol: 'QAD' },  // Quattuordecillion
                { value: 1e42, symbol: 'TD' },   // Tredecillion
                { value: 1e39, symbol: 'DD' },   // Duodecillion
                { value: 1e36, symbol: 'UD' },   // Undecillion
                { value: 1e33, symbol: 'DC' },   // Decillion
                { value: 1e30, symbol: 'NO' },   // Nonillion
                { value: 1e27, symbol: 'OC' },   // Octillion
                { value: 1e24, symbol: 'SP' },   // Septillion
                { value: 1e21, symbol: 'SX' },   // Sextillion
                { value: 1e18, symbol: 'QI' },   // Quintillion
                { value: 1e15, symbol: 'QA' },   // Quadrillion
                { value: 1e12, symbol: 'T' },    // Trillion
                { value: 1e9, symbol: 'B' },     // Billion
                { value: 1e6, symbol: 'M' },     // Million
                { value: 1e3, symbol: 'K' }      // Thousand
            ];
            
            for (let i = 0; i < suffixes.length; i++) {
                if (num >= suffixes[i].value) {
                    const shortened = num / suffixes[i].value;
                    return shortened.toFixed(2) + suffixes[i].symbol;
                }
            }
            
            return Math.floor(num).toLocaleString();
        }
        
        // Weather configuration
        const weatherConfig = {
            wind: {
                name: 'üí® Gi√≥',
                effect: 'T·ªëc ƒë·ªô click +0.3s',
                duration: 5,
                interval: 100,
                icon: 'üí®',
                class: 'wind'
            },
            cloud: {
                name: '‚òÅÔ∏è M√¢y',
                effect: 'Thu·ªëc & V√© gi·∫£m 3%',
                duration: 45,
                interval: 300,
                icon: '‚òÅÔ∏è',
                class: 'cloud'
            },
            rain: {
                name: 'üåßÔ∏è M∆∞a',
                effect: '+2 Click Power',
                duration: 45,
                interval: 600,
                icon: 'üåßÔ∏è',
                class: 'rain'
            },
            night: {
                name: 'üåô Ban ƒê√™m',
                effect: '+5 Click Power',
                duration: 30,
                interval: 1200,
                icon: 'üåô',
                class: 'night'
            },
            moonlight: {
                name: '‚ú® √Ånh TrƒÉng',
                effect: 'x5 Click Power',
                duration: 60,
                interval: 2400,
                icon: '‚ú®',
                class: 'moonlight'
            },
            meteor: {
                name: '‚òÑÔ∏è M∆∞a Sao BƒÉng',
                effect: 'x10 Click Power',
                duration: 60,
                interval: 3600,
                icon: '‚òÑÔ∏è',
                class: 'meteor'
            },
            snow: {
                name: '‚ùÑÔ∏è M∆∞a Tuy·∫øt',
                effect: 'Cooldown +0.5s',
                duration: 30,
                interval: 800,
                icon: '‚ùÑÔ∏è',
                class: 'snow'
            },
            acid: {
                name: '‚ò£Ô∏è M∆∞a Acid',
                effect: '-2 Click Power',
                duration: 60,
                interval: 10800,
                icon: '‚ò£Ô∏è',
                class: 'acid'
            },
            diamond: {
                name: 'üíé M∆∞a Kim C∆∞∆°ng',
                effect: 'x10 Click Power',
                duration: 90,
                interval: 14400,
                icon: 'üíé',
                class: 'diamond'
            },
            emerald: {
                name: 'üíö M∆∞a L·ª•c Kim',
                effect: 'x300 Click Power',
                duration: 120,
                interval: 18000,
                icon: 'üíö',
                class: 'emerald'
            },
            adminabuse: {
                name: 'üõ∏ Admin Abuse',
                effect: 'x500 Click Power',
                duration: 150,
                interval: 36000,
                icon: 'üõ∏',
                class: 'adminabuse'
            },
            earthquake: {
                name: 'üåã ƒê·ªông ƒê·∫•t',
                effect: '+15 Click Power',
                duration: 120,
                interval: 21600,
                icon: 'üåã',
                class: 'earthquake'
            },
            thunderstorm: {
                name: '‚ö° B√£o S·∫•m',
                effect: 'x100 Click Power',
                duration: 180,
                interval: 28800,
                icon: '‚ö°',
                class: 'thunderstorm'
            },
            superstorm: {
                name: 'üå™Ô∏è Si√™u B√£o',
                effect: 'x300 Click Power',
                duration: 240,
                interval: 36000,
                icon: 'üå™Ô∏è',
                class: 'superstorm'
            },
            winteraurora: {
                name: 'üåå C·ª±c Quang ƒê√¥ng',
                effect: 'x500 Click Power',
                duration: 300,
                interval: 72000,
                icon: 'üåå',
                class: 'winteraurora'
            },
            shootingstars: {
                name: 'üå† M∆∞a Sao',
                effect: 'x5 Ti·ªÅn Hi·ªán C√≥',
                duration: 60,
                interval: 108000,
                icon: 'üå†',
                class: 'shootingstars'
            },
            permafrost: {
                name: '‚ùÑÔ∏èüî• N·ªï BƒÉng Vƒ©nh C·ª≠u',
                effect: 'x1000 Ti·ªÅn Hi·ªán C√≥',
                duration: 90,
                interval: 144000,
                icon: '‚ùÑÔ∏èüî•',
                class: 'permafrost'
            },
            cyclone: {
                name: 'üåÄ L·ªëc Xo√°y',
                effect: '+10% Click Power',
                duration: 150,
                interval: 180000,
                icon: 'üåÄ',
                class: 'cyclone'
            },
            dissonant: {
                name: 'üé≠ H·ªón Lo·∫°n',
                effect: '+300 Click Power',
                duration: 180,
                interval: 360000,
                icon: 'üé≠',
                class: 'dissonant'
            },
            beestorm: {
                name: 'üêù B√£o Ong',
                effect: '+34920111 Click Power',
                duration: 300,
                interval: 86400,
                icon: 'üêù',
                class: 'beestorm'
            },
            tropicalrain: {
                name: 'üå¥ M∆∞a Nhi·ªát ƒê·ªõi',
                effect: '+150 Click Power',
                duration: 90,
                interval: 1680,
                icon: 'üå¥',
                class: 'tropicalrain'
            },
            gentledrizzle: {
                name: 'üåßÔ∏èüíß M∆∞a Ph√πn',
                effect: 'x2 Ti·ªÅn Hi·ªán C√≥',
                duration: 120,
                interval: 1860,
                icon: 'üåßÔ∏èüíß',
                class: 'gentledrizzle'
            },
            ownerabuse: {
                name: '‚öúÔ∏è Owner Abuse',
                effect: 'x10000 Click Power',
                duration: 600,
                interval: 1800000,
                icon: '‚öúÔ∏è',
                class: 'ownerabuse'
            },
            rainbowrain: {
                name: 'üåà Rainbow Rain',
                effect: 'x50 Click Power',
                duration: 180,
                interval: 2700,
                icon: 'üåà',
                class: 'rainbowrain'
            },
            goldrain: {
                name: 'üí∞ Gold Rain',
                effect: 'x200 Click Power',
                duration: 240,
                interval: 3600,
                icon: 'üí∞',
                class: 'goldrain'
            },
            silverrain: {
                name: 'ü™ô Silver Rain',
                effect: 'x75 Click Power',
                duration: 200,
                interval: 3000,
                icon: 'ü™ô',
                class: 'silverrain'
            },
            cosmicrain: {
                name: 'üåå Cosmic Rain',
                effect: 'x1000 Click Power',
                duration: 300,
                interval: 7200,
                icon: 'üåå',
                class: 'cosmicrain'
            },
            secretrain: {
                name: 'üîÆ Secret Rain',
                effect: 'x5000 Click Power',
                duration: 360,
                interval: 10800,
                icon: 'üîÆ',
                class: 'secretrain'
            },
            whitehole: {
                name: '‚ö™ White Hole',
                effect: 'x500 Ti·ªÅn Hi·ªán C√≥',
                duration: 240,
                interval: 14400,
                icon: '‚ö™',
                class: 'whitehole'
            },
            supernova: {
                name: 'üí• Super Nova',
                effect: 'x2000 Click Power',
                duration: 300,
                interval: 18000,
                icon: 'üí•',
                class: 'supernova'
            },
            nancorenova: {
                name: '‚öõÔ∏è Nancore Nova',
                effect: '+1000000 Click Power',
                duration: 360,
                interval: 21600,
                icon: '‚öõÔ∏è',
                class: 'nancorenova'
            },
            corruptzenaura: {
                name: 'üëπ Corrupt Zen Aura',
                effect: 'x3000 Click Power',
                duration: 420,
                interval: 28800,
                icon: 'üëπ',
                class: 'corruptzenaura'
            },
            fullmoon: {
                name: 'üåï Full Moon',
                effect: 'x150 Click Power',
                duration: 480,
                interval: 43200,
                icon: 'üåï',
                class: 'fullmoon'
            },
            safaridusk: {
                name: 'üåÖ Safari Dusk',
                effect: '+5000 Click Power',
                duration: 540,
                interval: 54000,
                icon: 'üåÖ',
                class: 'safaridusk'
            },
            yetinight: {
                name: 'üèîÔ∏è Yeti Night',
                effect: 'x800 Click Power',
                duration: 600,
                interval: 64800,
                icon: 'üèîÔ∏è',
                class: 'yetinight'
            },
            silentnight: {
                name: 'üåÉ Silent Night',
                effect: '+50% Click Power',
                duration: 660,
                interval: 72000,
                icon: 'üåÉ',
                class: 'silentnight'
            },
            boomboxparty: {
                name: 'üéµ Boombox Party',
                effect: 'x250 Click Power',
                duration: 720,
                interval: 86400,
                icon: 'üéµ',
                class: 'boomboxparty'
            },
            frozeniceking: {
                name: '‚ùÑÔ∏èüëë Frozen Ice King',
                effect: 'x4000 Click Power',
                duration: 780,
                interval: 108000,
                icon: '‚ùÑÔ∏èüëë',
                class: 'frozeniceking'
            },
            radioactiverain: {
                name: '‚ò¢Ô∏è Radioactive Rain',
                effect: '+100000 Click Power',
                duration: 840,
                interval: 144000,
                icon: '‚ò¢Ô∏è',
                class: 'radioactiverain'
            },
            oilrain: {
                name: 'üõ¢Ô∏è Oil Rain',
                effect: 'x100 Ti·ªÅn Hi·ªán C√≥',
                duration: 900,
                interval: 180000,
                icon: 'üõ¢Ô∏è',
                class: 'oilrain'
            },
            sandstrike: {
                name: 'üèúÔ∏è Sand Strike',
                effect: 'x1500 Click Power',
                duration: 480,
                interval: 360000,
                icon: 'üèúÔ∏è',
                class: 'sandstrike'
            }
        };
        // Weather next spawn times
        let weatherNextSpawn = {
            wind: 100,
            cloud: 300,
            rain: 600,
            night: 1200,
            moonlight: 2400,
            meteor: 3600,
            snow: 800,
            acid: 10800,
            diamond: 14400,
            emerald: 18000,
            adminabuse: 36000,
            earthquake: 21600,
            thunderstorm: 28800,
            superstorm: 36000,
            winteraurora: 72000,
            shootingstars: 108000,
            permafrost: 144000,
            cyclone: 180000,
            dissonant: 360000,
            beestorm: 86400,
            tropicalrain: 1680,
            gentledrizzle: 1860,
            ownerabuse: 1800000,
            rainbowrain: 2700,
            goldrain: 3600,
            silverrain: 3000,
            cosmicrain: 7200,
            secretrain: 10800,
            whitehole: 14400,
            supernova: 18000,
            nancorenova: 21600,
            corruptzenaura: 28800,
            fullmoon: 43200,
            safaridusk: 54000,
            yetinight: 64800,
            silentnight: 72000,
            boomboxparty: 86400,
            frozeniceking: 108000,
            radioactiverain: 144000,
            oilrain: 180000,
            sandstrike: 360000
        };

        const shopItems = [
            {
                id: 1,
                name: '+1 Click Power',
                description: 'TƒÉng 1 coin m·ªói click',
                icon: '‚ö°',
                basePrice: 10,
                currentPrice: 10,
                owned: 0,
                effect: () => clickPower++
            },
            {
                id: 2,
                name: 'Auto Clicker',
                description: '+1 coin m·ªói gi√¢y',
                icon: 'ü§ñ',
                basePrice: 100,
                currentPrice: 100,
                owned: 0,
                effect: () => autoClickers++
            },
            {
                id: 3,
                name: 'Faster Click',
                description: 'Gi·∫£m 0.05s th·ªùi gian ch·ªù click',
                icon: '‚ö°',
                basePrice: 500,
                currentPrice: 500,
                owned: 0,
                effect: () => {
                    clickCooldown = Math.max(0.05, clickCooldown - 0.05);
                }
            },
            {
                id: 4,
                name: 'Super Click',
                description: '+5 click power',
                icon: '‚≠ê',
                basePrice: 1000,
                currentPrice: 1000,
                owned: 0,
                effect: () => clickPower += 5
            },
            {
                id: 5,
                name: 'Mega Clicker',
                description: '+10 coins m·ªói gi√¢y',
                icon: '‚ú®',
                basePrice: 3000,
                currentPrice: 3000,
                owned: 0,
                effect: () => autoClickers += 10
            },
            {
                id: 6,
                name: '2x Multiplier',
                description: 'Nh√¢n ƒë√¥i t·∫•t c·∫£ thu nh·∫≠p',
                icon: 'üëë',
                basePrice: 15000,
                currentPrice: 15000,
                owned: 0,
                effect: () => multiplier *= 2
            },
            {
                id: 7,
                name: 'Ultra Click',
                description: '+20 click power',
                icon: 'üíé',
                basePrice: 10000,
                currentPrice: 10000,
                owned: 0,
                effect: () => clickPower += 20
            },
            {
                id: 8,
                name: 'Factory',
                description: '+50 coins m·ªói gi√¢y',
                icon: 'üè≠',
                basePrice: 30000,
                currentPrice: 30000,
                owned: 0,
                effect: () => autoClickers += 50
            },
            {
                id: 9,
                name: 'Golden Touch',
                description: '+100 click power',
                icon: 'üåü',
                basePrice: 75000,
                currentPrice: 75000,
                owned: 0,
                effect: () => clickPower += 100
            },
            {
                id: 10,
                name: 'Time Warp',
                description: 'Gi·∫£m 0.03s cooldown',
                icon: '‚è∞',
                basePrice: 120000,
                currentPrice: 120000,
                owned: 0,
                effect: () => {
                    clickCooldown = Math.max(0.01, clickCooldown - 0.03);
                }
            },
            {
                id: 11,
                name: 'Robot Army',
                description: '+100 coins m·ªói gi√¢y',
                icon: 'ü§ñ',
                basePrice: 200000,
                currentPrice: 200000,
                owned: 0,
                effect: () => autoClickers += 100
            },
            {
                id: 12,
                name: 'Diamond Finger',
                description: '+250 click power',
                icon: 'üíç',
                basePrice: 350000,
                currentPrice: 350000,
                owned: 0,
                effect: () => clickPower += 250
            },
            {
                id: 13,
                name: 'Money Printer',
                description: '+200 coins m·ªói gi√¢y',
                icon: 'üñ®Ô∏è',
                basePrice: 600000,
                currentPrice: 600000,
                owned: 0,
                effect: () => autoClickers += 200
            },
            {
                id: 14,
                name: 'Cosmic Power',
                description: '+400 click power',
                icon: 'üåå',
                basePrice: 1200000,
                currentPrice: 1200000,
                owned: 0,
                effect: () => clickPower += 400
            },
            {
                id: 15,
                name: 'Quantum Clicker',
                description: '+500 coins m·ªói gi√¢y',
                icon: '‚öõÔ∏è',
                basePrice: 2500000,
                currentPrice: 2500000,
                owned: 0,
                effect: () => autoClickers += 500
            },
            {
                id: 16,
                name: 'Infinity Stone',
                description: '+1000 click power',
                icon: 'üí†',
                basePrice: 6000000,
                currentPrice: 6000000,
                owned: 0,
                effect: () => clickPower += 1000
            },
            {
                id: 17,
                name: 'Universe Generator',
                description: '+1500 coins m·ªói gi√¢y',
                icon: 'üå†',
                basePrice: 25000000,
                currentPrice: 25000000,
                owned: 0,
                effect: () => autoClickers += 1500
            },
            {
                id: 18,
                name: 'The Divine',
                description: '5% gi·∫£m gi√° m·ªçi v·∫≠t ph·∫©m',
                icon: '‚ú®',
                basePrice: 50000000,
                currentPrice: 50000000,
                owned: 0,
                effect: () => {
                    shopDiscount += 5;
                }
            },
            {
                id: 19,
                name: 'The Primastic',
                description: '1.2% c∆° h·ªôi ho√†n ti·ªÅn',
                icon: 'üíé',
                basePrice: 1000000000,
                currentPrice: 1000000000,
                owned: 0,
                effect: () => {}
            },
            {
                id: 20,
                name: 'The Transcendent',
                description: '0.8% c∆° h·ªôi ho√†n x10 ti·ªÅn',
                icon: 'üåü',
                basePrice: 2500000000,
                currentPrice: 2500000000,
                owned: 0,
                effect: () => {}
            },
            {
                id: 21,
                name: 'The God',
                description: '+1 gi·ªõi h·∫°n mua v·∫≠t ph·∫©m',
                icon: '‚öúÔ∏è',
                basePrice: 2500000000,
                currentPrice: 2500000000,
                owned: 0,
                effect: () => {
                    purchaseLimit++;
                }
            },
            {
                id: 22,
                name: 'Admin Power',
                description: '+50 Click Power',
                icon: 'üî±',
                basePrice: 50000000000, // 50B
                currentPrice: 50000000000,
                owned: 0,
                effect: () => {
                    clickPower += 50;
                }
            },
            {
                id: 23,
                name: 'Owner Power',
                description: '+200 Click Power',
                icon: 'üëë',
                basePrice: 2000000000000000, // 2QA
                currentPrice: 2000000000000000,
                owned: 0,
                effect: () => {
                    clickPower += 200;
                }
            },
            {
                id: 24,
                name: '67 Power',
                description: '+670 Click Power',
                icon: '‚ö°',
                basePrice: 5000000000000000, // 5QA
                currentPrice: 5000000000000000,
                owned: 0,
                effect: () => {
                    clickPower += 670;
                }
            },
            {
                id: 25,
                name: '36 Power',
                description: '+3600 Click Power',
                icon: 'üí´',
                basePrice: 1000000000000000000, // 1QI
                currentPrice: 1000000000000000000,
                owned: 0,
                effect: () => {
                    clickPower += 3600;
                }
            },
            {
                id: 26,
                name: 'Nancore',
                description: '+10000 Click Power',
                icon: '‚öõÔ∏è',
                basePrice: 2000000000000000000000, // 2SX
                currentPrice: 2000000000000000000000,
                owned: 0,
                effect: () => {
                    clickPower += 10000;
                }
            }
        ];

        const rebirthRequirements = [5000, 100000, 500000, 2000000];

        // ===== WEATHER FUNCTIONS =====
        function activateWeather(type) {
            if (activeWeathers.includes(type)) return; // Already active
            
            activeWeathers.push(type);
            const config = weatherConfig[type];
            weatherTimers[type] = config.duration;
            
            // Apply weather effect
            applyWeatherEffect(type, true);
            
            // Start countdown
            weatherIntervals[type] = setInterval(() => {
                weatherTimers[type]--;
                updateWeatherDisplay();
                
                if (weatherTimers[type] <= 0) {
                    deactivateWeather(type);
                }
            }, 1000);
            
            updateWeatherDisplay();
        }

        function deactivateWeather(type) {
            if (!activeWeathers.includes(type)) return;
            
            // Remove weather effect
            applyWeatherEffect(type, false);
            
            // Clean up
            clearInterval(weatherIntervals[type]);
            delete weatherIntervals[type];
            delete weatherTimers[type];
            activeWeathers = activeWeathers.filter(w => w !== type);
            
            updateWeatherDisplay();
        }

        function applyWeatherEffect(type, apply) {
            switch(type) {
                case 'wind':
                    // TƒÉng/gi·∫£m 0.3s cooldown
                    if (apply) {
                        clickCooldown = Math.max(0.01, clickCooldown - 0.3);
                    } else {
                        clickCooldown += 0.3;
                    }
                    break;
                case 'cloud':
                    // Gi·∫£m gi√° ƒë∆∞·ª£c x·ª≠ l√Ω trong renderShop()
                    renderShop();
                    break;
                case 'rain':
                    // +2/-2 click power
                    if (apply) {
                        clickPower += 2;
                    } else {
                        clickPower = Math.max(1, clickPower - 2);
                    }
                    break;
                case 'night':
                    // +5/-5 click power
                    if (apply) {
                        clickPower += 5;
                    } else {
                        clickPower = Math.max(1, clickPower - 5);
                    }
                    break;
                case 'moonlight':
                    // x5 click power (nh√¢n/chia)
                    // Kh√¥ng √°p d·ª•ng tr·ª±c ti·∫øp v√†o clickPower, x·ª≠ l√Ω khi click
                    break;
                case 'meteor':
                    // x10 click power (nh√¢n/chia)
                    // Kh√¥ng √°p d·ª•ng tr·ª±c ti·∫øp v√†o clickPower, x·ª≠ l√Ω khi click
                    break;
                case 'acid':
                    // -2/+2 click power
                    if (apply) {
                        clickPower = Math.max(1, clickPower - 2);
                    } else {
                        clickPower += 2;
                    }
                    break;
                case 'diamond':
                    // x10 click power
                    // Kh√¥ng √°p d·ª•ng tr·ª±c ti·∫øp v√†o clickPower, x·ª≠ l√Ω khi click
                    break;
                case 'emerald':
                    // x300 click power
                    // Kh√¥ng √°p d·ª•ng tr·ª±c ti·∫øp v√†o clickPower, x·ª≠ l√Ω khi click
                    break;
                case 'adminabuse':
                    // x500 click power
                    // Kh√¥ng √°p d·ª•ng tr·ª±c ti·∫øp v√†o clickPower, x·ª≠ l√Ω khi click
                    break;
                case 'earthquake':
                    if (apply) {
                        clickPower += 15;
                    } else {
                        clickPower = Math.max(1, clickPower - 15);
                    }
                    break;
                case 'thunderstorm':
                    // x100 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'superstorm':
                    // x300 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'winteraurora':
                    // x500 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'shootingstars':
                    // x5 ti·ªÅn hi·ªán c√≥ - x·ª≠ l√Ω khi activate
                    if (apply) {
                        coins *= 5;
                        updateDisplay();
                    }
                    break;
                case 'permafrost':
                    // x1000 ti·ªÅn hi·ªán c√≥ - x·ª≠ l√Ω khi activate
                    if (apply) {
                        coins *= 1000;
                        updateDisplay();
                    }
                    break;
                case 'cyclone':
                    // +10% click power
                    if (apply) {
                        clickPower = Math.ceil(clickPower * 1.1);
                    } else {
                        clickPower = Math.ceil(clickPower / 1.1);
                    }
                    break;
                case 'dissonant':
                    if (apply) {
                        clickPower += 300;
                    } else {
                        clickPower = Math.max(1, clickPower - 300);
                    }
                    break;
                case 'beestorm':
                    if (apply) {
                        clickPower += 34920111;
                    } else {
                        clickPower = Math.max(1, clickPower - 34920111);
                    }
                    break;
                case 'tropicalrain':
                    if (apply) {
                        clickPower += 150;
                    } else {
                        clickPower = Math.max(1, clickPower - 150);
                    }
                    break;
                case 'gentledrizzle':
                    // x2 ti·ªÅn hi·ªán c√≥ - x·ª≠ l√Ω khi activate
                    if (apply) {
                        coins *= 2;
                        updateDisplay();
                    }
                    break;
                case 'ownerabuse':
                    // x10000 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'rainbowrain':
                    // x50 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'goldrain':
                    // x200 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'silverrain':
                    // x75 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'cosmicrain':
                    // x1000 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'secretrain':
                    // x5000 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'whitehole':
                    // x500 ti·ªÅn hi·ªán c√≥
                    if (apply) {
                        coins *= 500;
                        updateDisplay();
                    }
                    break;
                case 'supernova':
                    // x2000 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'nancorenova':
                    // +1000000 click power
                    if (apply) {
                        clickPower += 1000000;
                    } else {
                        clickPower = Math.max(1, clickPower - 1000000);
                    }
                    break;
                case 'corruptzenaura':
                    // x3000 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'fullmoon':
                    // x150 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'safaridusk':
                    // +5000 click power
                    if (apply) {
                        clickPower += 5000;
                    } else {
                        clickPower = Math.max(1, clickPower - 5000);
                    }
                    break;
                case 'yetinight':
                    // x800 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'silentnight':
                    // +50% click power
                    if (apply) {
                        clickPower = Math.ceil(clickPower * 1.5);
                    } else {
                        clickPower = Math.ceil(clickPower / 1.5);
                    }
                    break;
                case 'boomboxparty':
                    // x250 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'frozeniceking':
                    // x4000 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
                case 'radioactiverain':
                    // +100000 click power
                    if (apply) {
                        clickPower += 100000;
                    } else {
                        clickPower = Math.max(1, clickPower - 100000);
                    }
                    break;
                case 'oilrain':
                    // x100 ti·ªÅn hi·ªán c√≥
                    if (apply) {
                        coins *= 100;
                        updateDisplay();
                    }
                    break;
                case 'sandstrike':
                    // x1500 click power - x·ª≠ l√Ω trong getWeatherMultiplier
                    break;
            }
            updateDisplay();
        }

        function getWeatherMultiplier() {
            let multiplier = 1;
            if (activeWeathers.includes('moonlight')) multiplier *= 3;
            if (activeWeathers.includes('meteor')) multiplier *= 5;
            if (activeWeathers.includes('diamond')) multiplier *= 5;
            if (activeWeathers.includes('emerald')) multiplier *= 10;
            if (activeWeathers.includes('adminabuse')) multiplier *= 3;
            if (activeWeathers.includes('thunderstorm')) multiplier *= 8;
            if (activeWeathers.includes('superstorm')) multiplier *= 10;
            if (activeWeathers.includes('winteraurora')) multiplier *= 3;
            if (activeWeathers.includes('ownerabuse')) multiplier *= 50;
            if (activeWeathers.includes('rainbowrain')) multiplier *= 4;
            if (activeWeathers.includes('goldrain')) multiplier *= 8;
            if (activeWeathers.includes('silverrain')) multiplier *= 6;
            if (activeWeathers.includes('cosmicrain')) multiplier *= 5;
            if (activeWeathers.includes('secretrain')) multiplier *= 25;
            if (activeWeathers.includes('supernova')) multiplier *= 10;
            if (activeWeathers.includes('corruptzenaura')) multiplier *= 15;
            if (activeWeathers.includes('fullmoon')) multiplier *= 7;
            if (activeWeathers.includes('yetinight')) multiplier *= 4;
            if (activeWeathers.includes('boomboxparty')) multiplier *= 9;
            if (activeWeathers.includes('frozeniceking')) multiplier *= 20;
            if (activeWeathers.includes('sandstrike')) multiplier *= 8;
            return multiplier;
        }


        function getWeatherDiscount() {
            let discount = 0;
            if (activeWeathers.includes('cloud')) discount += 3;
            return discount;
        }

        function updateWeatherDisplay() {
            const weatherList = document.getElementById('weatherList');
            
            // Update count for hidden mode
            document.getElementById('weatherCountNumber').textContent = activeWeathers.length;
            
            if (activeWeathers.length === 0) {
                weatherList.innerHTML = '<div class="weather-empty">Kh√¥ng c√≥ th·ªùi ti·∫øt n√†o</div>';
                return;
            }
            
            let html = '';
            activeWeathers.forEach(type => {
                const config = weatherConfig[type];
                const timeLeft = weatherTimers[type];
                html += `
                    <div class="weather-item ${config.class}">
                        <div class="weather-info">
                            <div class="weather-name">${config.name}</div>
                            <div class="weather-effect">${config.effect}</div>
                        </div>
                        <div class="weather-timer">${timeLeft}s</div>
                    </div>
                `;
            });
            
            weatherList.innerHTML = html;
        }

        function summonWeather(type) {
            if (!isAdmin) return;
            activateWeather(type);
        }

        function clearAllWeather() {
            if (!isAdmin) return;
            
            // Deactivate all active weathers
            [...activeWeathers].forEach(type => {
                deactivateWeather(type);
            });
        }

        function checkWeatherSpawns() {
            if (isBanned || isAfk) return;
            
            // Check each weather type
            Object.keys(weatherNextSpawn).forEach(type => {
                weatherNextSpawn[type]--;
                
                if (weatherNextSpawn[type] <= 0) {
                    activateWeather(type);
                    // Reset spawn timer
                    weatherNextSpawn[type] = weatherConfig[type].interval;
                }
            });
        }

        // ===== ANTI-AUTO CLICKER SYSTEM =====
        function checkAutoClicker() {
            const now = Date.now();
            clickTimes.push(now);
            
            // Ch·ªâ gi·ªØ l·∫°i 10 l·∫ßn click g·∫ßn nh·∫•t
            if (clickTimes.length > 10) {
                clickTimes.shift();
            }
            
            // Ki·ªÉm tra n·∫øu c√≥ √≠t nh·∫•t 5 l·∫ßn click
            if (clickTimes.length >= 5) {
                // T√≠nh kho·∫£ng c√°ch th·ªùi gian gi·ªØa c√°c l·∫ßn click
                const intervals = [];
                for (let i = 1; i < clickTimes.length; i++) {
                    intervals.push(clickTimes[i] - clickTimes[i - 1]);
                }
                
                // T√≠nh trung b√¨nh kho·∫£ng c√°ch
                const avgInterval = intervals.reduce((a, b) => a + b, 0) / intervals.length;
                
                // T√≠nh ƒë·ªô l·ªách chu·∫©n
                const variance = intervals.reduce((sum, interval) => {
                    return sum + Math.pow(interval - avgInterval, 2);
                }, 0) / intervals.length;
                const stdDev = Math.sqrt(variance);
                
                // PH√ÅT HI·ªÜN AUTO CLICKER:
                // 1. Click qu√° nhanh (< 50ms trung b√¨nh)
                // 2. Click qu√° ƒë·ªÅu (ƒë·ªô l·ªách chu·∫©n < 10ms)
                // 3. Click v·ªõi pattern gi·ªëng nhau (variance qu√° th·∫•p)
                
                const tooFast = avgInterval < 50;
                const tooConsistent = stdDev < 10;
                const suspiciousPattern = variance < 100 && clickTimes.length >= 8;
                
                if ((tooFast && tooConsistent) || suspiciousPattern) {
                    // BAN PLAYER!
                    isBanned = true;
                    document.getElementById('banOverlay').classList.add('active');
                    document.getElementById('clickButton').classList.add('disabled');
                    
                    // D·ª´ng t·∫•t c·∫£ ho·∫°t ƒë·ªông
                    if (afkTimer) clearInterval(afkTimer);
                    if (playTimeInterval) clearInterval(playTimeInterval);
                    if (potionInterval) clearInterval(potionInterval);
                    if (discountTicketInterval) clearInterval(discountTicketInterval);
                    
                    return true; // NgƒÉn kh√¥ng cho click
                }
            }
            
            return false; // Cho ph√©p click
        }

        function updateDisplay() {
            document.getElementById('coins').textContent = formatNumber(coins);
            document.getElementById('diamonds').textContent = formatNumber(diamonds);
            document.getElementById('clickPower').textContent = clickPower;
            document.getElementById('autoClickers').textContent = autoClickers;
            document.getElementById('multiplier').textContent = multiplier;
            document.getElementById('clickCooldown').textContent = clickCooldown.toFixed(2);
            document.getElementById('rebirthMultiplierDisplay').textContent = rebirthMultiplier.toFixed(2);
            
            // Pet Multiplier Display
            const petMult = getPetMultiplier();
            document.getElementById('petMultiplierDisplay').textContent = petMult >= 1000 ? petMult.toExponential(2) : petMult.toFixed(2);
            
            document.getElementById('discountDisplay').textContent = shopDiscount;
            document.getElementById('ticketDiscountDisplay').textContent = discountTicket;
            document.getElementById('purchaseLimitDisplay').textContent = purchaseLimit;
            
            document.getElementById('inv2x').textContent = inventory.potion_2x;
            document.getElementById('inv3x').textContent = inventory.potion_3x;
            document.getElementById('inv4x').textContent = inventory.potion_4x;
            
            const hours = Math.floor(playTime / 3600);
            const minutes = Math.floor((playTime % 3600) / 60);
            const seconds = playTime % 60;
            document.getElementById('playTime').textContent = 
                `${String(hours).padStart(2, '0')}:${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`;
        }

        function renderShop() {
            const shopContainer = document.getElementById('shopItems');
            shopContainer.innerHTML = '';

            shopItems.forEach(item => {
                const currentPurchases = purchaseCounts[item.id] || 0;
                const isLimitReached = currentPurchases >= purchaseLimit;
                
                // T√≠nh gi·∫£m gi√° t·ª´ shop, ticket V√Ä weather
                let totalDiscount = shopDiscount + discountTicket;
                
                // Ch·ªâ √°p d·ª•ng weather discount cho potions v√† discount tickets (items kh√¥ng c√≥ basePrice cao)
                const isPotionOrTicket = item.basePrice <= 100000 && (
                    item.name.includes('Potion') || 
                    item.name.includes('V√© gi·∫£m')
                );
                
                if (isPotionOrTicket) {
                    totalDiscount += getWeatherDiscount();
                }
                
                const discountedPrice = Math.floor(item.currentPrice * (1 - totalDiscount / 100));
                const canBuy = coins >= discountedPrice && !isLimitReached;
                const itemDiv = document.createElement('div');
                itemDiv.className = `shop-item ${!canBuy ? 'disabled' : ''}`;
                
                let priceDisplay = formatNumber(discountedPrice);
                if (totalDiscount > 0) {
                    priceDisplay += ` (-${totalDiscount}%)`;
                }
                
                let limitInfo = '';
                if (isLimitReached) {
                    limitInfo = '<div style="color: #ff6b6b; font-size: 0.9em; margin-top: 5px;">‚ö†Ô∏è ƒê√£ ƒë·∫°t gi·ªõi h·∫°n mua!</div>';
                } else {
                    limitInfo = `<div style="color: #ffd700; font-size: 0.8em; margin-top: 5px;">C√≤n l·∫°i: ${purchaseLimit - currentPurchases}/${purchaseLimit}</div>`;
                }
                
                itemDiv.innerHTML = `
                    <span class="icon">${item.icon}</span>
                    <div class="item-info">
                        <div class="item-name">${item.name}</div>
                        <div class="item-description">${item.description}</div>
                        <div class="item-owned">ƒê√£ mua: ${item.owned}</div>
                        ${limitInfo}
                    </div>
                    <button class="buy-button ${!canBuy ? 'disabled' : ''}" onclick="buyItem(${item.id})">
                        ${isLimitReached ? 'H·∫øt l∆∞·ª£t' : priceDisplay + ' üí∞'}
                    </button>
                `;
                shopContainer.appendChild(itemDiv);
            });
        }

        function buyItem(itemId) {
            const item = shopItems.find(i => i.id === itemId);
            const currentPurchases = purchaseCounts[item.id] || 0;
            
            if (currentPurchases >= purchaseLimit) {
                alert('‚ùå ƒê√£ ƒë·∫°t gi·ªõi h·∫°n mua cho item n√†y! Mua "The God" ho·∫∑c T√°i sinh ƒë·ªÉ tƒÉng gi·ªõi h·∫°n.');
                return;
            }
            
            // T√≠nh gi·∫£m gi√° bao g·ªìm weather
            let totalDiscount = shopDiscount + discountTicket;
            
            const isPotionOrTicket = item.basePrice <= 100000 && (
                item.name.includes('Potion') || 
                item.name.includes('V√© gi·∫£m')
            );
            
            if (isPotionOrTicket) {
                totalDiscount += getWeatherDiscount();
            }
            
            const discountedPrice = Math.floor(item.currentPrice * (1 - totalDiscount / 100));
            
            if (coins >= discountedPrice) {
                coins -= discountedPrice;
                
                // X·ª≠ l√Ω The Primastic
                if (item.id === 19) {
                    const primasticCount = item.owned;
                    const refundChance = 1.2 * (primasticCount + 1);
                    const random = Math.random() * 100;
                    
                    if (random < refundChance) {
                        coins += discountedPrice;
                        alert(`üéâ The Primastic k√≠ch ho·∫°t! Ho√†n l·∫°i ${formatNumber(discountedPrice)} coins!`);
                    }
                }
                
                // X·ª≠ l√Ω The Transcendent
                if (item.id === 20) {
                    const transcendentCount = item.owned;
                    const refundChance = 0.8 * (transcendentCount + 1);
                    const random = Math.random() * 100;
                    
                    if (random < refundChance) {
                        coins += discountedPrice * 10;
                        alert(`üí´ The Transcendent k√≠ch ho·∫°t! Ho√†n l·∫°i x10 = ${formatNumber(discountedPrice * 10)} coins!`);
                    }
                }
                
                item.effect();
                item.owned++;
                item.currentPrice = Math.floor(item.currentPrice * 2);
                
                purchaseCounts[item.id] = currentPurchases + 1;
                
                updateDisplay();
                renderShop();
            }
        }

        function toggleAdminPanel() {
            const content = document.getElementById('adminPanelContent');
            const btn = document.getElementById('toggleAdminBtn');
            
            if (content.style.display === 'none') {
                // Show
                content.style.display = 'block';
                btn.textContent = 'üëÅÔ∏è ·∫®n';
                btn.style.background = 'linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%)';
            } else {
                // Hide
                content.style.display = 'none';
                btn.textContent = 'üëÅÔ∏è B·ªè ·∫®n';
                btn.style.background = 'linear-gradient(135deg, #00ff00 0%, #00cc00 100%)';
            }
        }

        function toggleWeatherPanel() {
            const content = document.getElementById('weatherPanelContent');
            const btn = document.getElementById('toggleWeatherBtn');
            const countHidden = document.getElementById('weatherCountHidden');
            
            if (content.style.display === 'none') {
                // Show
                content.style.display = 'block';
                countHidden.style.display = 'none';
                btn.textContent = 'üëÅÔ∏è ·∫®n';
                btn.style.background = 'linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%)';
            } else {
                // Hide
                content.style.display = 'none';
                countHidden.style.display = 'block';
                // Update count
                document.getElementById('weatherCountNumber').textContent = activeWeathers.length;
                btn.textContent = 'üëÅÔ∏è B·ªè ·∫®n';
                btn.style.background = 'linear-gradient(135deg, #00ff00 0%, #00cc00 100%)';
            }
        }

        function checkAdminCode() {
            const code = document.getElementById('adminCode').value;
            const statusDiv = document.getElementById('adminStatus');
            
            if (code === 'havehag817') {
                isAdmin = true;
                statusDiv.innerHTML = '<div class="admin-status">‚úÖ Admin ƒë√£ ƒëƒÉng nh·∫≠p!</div>';
                document.getElementById('adminControls').style.display = 'block';
                document.getElementById('adminCode').disabled = true;
            } else {
                statusDiv.innerHTML = '<div style="color: #ff0000; margin-top: 5px;">‚ùå Sai m√£!</div>';
                setTimeout(() => {
                    statusDiv.innerHTML = '';
                }, 2000);
            }
        }

        function addAdminMoney() {
            if (isAdmin) {
                coins += 100000;
                updateDisplay();
                renderShop();
            }
        }

        function addAdminDiamonds() {
            if (isAdmin) {
                diamonds += 1000;
                updateDisplay();
            }
        }

        function summonPet(petName, petIcon, petMultiplier) {
            if (!isAdmin) return;
            
            const petKey = petName;
            
            // Add pet to ownedPets
            if (!ownedPets[petKey]) {
                ownedPets[petKey] = {
                    name: petName,
                    icon: petIcon,
                    multiplier: petMultiplier,
                    count: 0
                };
            }
            
            ownedPets[petKey].count++;
            
            renderPets();
            updateDisplay();
            
            alert(`‚úÖ ƒê√£ tri·ªáu h·ªìi ${petIcon} ${petName} (x${petMultiplier})!`);
        }

        function saveGame() {
            const gameData = {
                coins: coins,
                diamonds: diamonds,
                clickPower: clickPower,
                autoClickers: autoClickers,
                multiplier: multiplier,
                clickCooldown: clickCooldown,
                isAdmin: isAdmin,
                gamePasses: gamePasses,
                inventory: inventory,
                playTime: playTime,
                shopDiscount: shopDiscount,
                rebirthCount: rebirthCount,
                rebirthMultiplier: rebirthMultiplier,
                purchaseLimit: purchaseLimit,
                purchaseCounts: purchaseCounts,
                weatherNextSpawn: weatherNextSpawn,
                ownedPets: ownedPets,
                equippedPets: equippedPets,
                shopItems: shopItems.map(item => ({
                    id: item.id,
                    currentPrice: item.currentPrice,
                    owned: item.owned
                })),
                saveDate: new Date().toISOString()
            };

            const dataStr = JSON.stringify(gameData, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            
            const link = document.createElement('a');
            link.href = URL.createObjectURL(dataBlob);
            link.download = `cookie-clicker-save-${Date.now()}.json`;
            link.click();
            
            alert('‚úÖ Game ƒë√£ ƒë∆∞·ª£c l∆∞u th√†nh c√¥ng!');
        }

        function loadGame(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const gameData = JSON.parse(e.target.result);
                    
                    coins = gameData.coins || 0;
                    diamonds = gameData.diamonds || 0;
                    clickPower = gameData.clickPower || 1;
                    autoClickers = gameData.autoClickers || 0;
                    multiplier = gameData.multiplier || 1;
                    clickCooldown = gameData.clickCooldown || 0.5;
                    isAdmin = gameData.isAdmin || false;
                    
                    if (gameData.gamePasses) {
                        gamePasses = gameData.gamePasses;
                        updateGamePassUI();
                    }
                    
                    if (gameData.inventory) {
                        inventory = gameData.inventory;
                    }
                    
                    if (gameData.ownedPets) {
                        ownedPets = gameData.ownedPets;
                    }
                    
                    if (gameData.equippedPets) {
                        equippedPets = gameData.equippedPets;
                    }
                    
                    playTime = gameData.playTime || 0;
                    shopDiscount = gameData.shopDiscount || 0;
                    rebirthCount = gameData.rebirthCount || 0;
                    rebirthMultiplier = gameData.rebirthMultiplier || 1;
                    purchaseLimit = gameData.purchaseLimit || 5;
                    purchaseCounts = gameData.purchaseCounts || {};
                    
                    if (gameData.weatherNextSpawn) {
                        weatherNextSpawn = gameData.weatherNextSpawn;
                    }
                    
                    if (gameData.shopItems) {
                        gameData.shopItems.forEach(savedItem => {
                            const item = shopItems.find(i => i.id === savedItem.id);
                            if (item) {
                                item.currentPrice = savedItem.currentPrice;
                                item.owned = savedItem.owned;
                            }
                        });
                    }
                    
                    if (isAdmin) {
                        document.getElementById('adminStatus').innerHTML = '<div class="admin-status">‚úÖ Admin ƒë√£ ƒëƒÉng nh·∫≠p!</div>';
                        document.getElementById('adminControls').style.display = 'block';
                        document.getElementById('adminCode').disabled = true;
                    }
                    
                    updateDisplay();
                    renderShop();
                    renderPets();
                    
                    const saveDate = new Date(gameData.saveDate).toLocaleString('vi-VN');
                    alert(`‚úÖ T·∫£i game th√†nh c√¥ng!\nüìÖ L∆∞u l√∫c: ${saveDate}`);
                } catch (error) {
                    alert('‚ùå File kh√¥ng h·ª£p l·ªá! Vui l√≤ng ch·ªçn file save ƒë√∫ng.');
                }
            };
            reader.readAsText(file);
            
            event.target.value = '';
        }

        function redeemGamePass() {
            const code = document.getElementById('gamepassCode').value.toUpperCase();
            let success = false;
            let passName = '';

            if (code === 'VIP2025' && !gamePasses.vip) {
                gamePasses.vip = true;
                clickPower += 30;
                clickCooldown = Math.max(0.01, clickCooldown - 0.15);
                autoClickers += 50;
                diamonds += 100;
                passName = 'VIP Pass';
                success = true;
            } else if (code === 'PREMIUM999' && !gamePasses.premium) {
                gamePasses.premium = true;
                clickPower += 100;
                clickCooldown = Math.max(0.01, clickCooldown - 0.2);
                autoClickers += 200;
                multiplier *= 2;
                diamonds += 500;
                passName = 'Premium Pass';
                success = true;
            } else if (code === 'LEGEND777' && !gamePasses.legend) {
                gamePasses.legend = true;
                clickPower += 500;
                clickCooldown = 0.01;
                autoClickers += 1000;
                multiplier *= 5;
                coins += 500000;
                diamonds += 2000;
                passName = 'Legend Pass';
                success = true;
            } else if (gamePasses.vip && code === 'VIP2025') {
                alert('‚ùå B·∫°n ƒë√£ s·ªü h·ªØu VIP Pass r·ªìi!');
                return;
            } else if (gamePasses.premium && code === 'PREMIUM999') {
                alert('‚ùå B·∫°n ƒë√£ s·ªü h·ªØu Premium Pass r·ªìi!');
                return;
            } else if (gamePasses.legend && code === 'LEGEND777') {
                alert('‚ùå B·∫°n ƒë√£ s·ªü h·ªØu Legend Pass r·ªìi!');
                return;
            } else {
                alert('‚ùå Code kh√¥ng h·ª£p l·ªá!');
                return;
            }

            if (success) {
                updateGamePassUI();
                updateDisplay();
                renderShop();
                document.getElementById('gamepassCode').value = '';
                alert(`‚úÖ ƒê√£ k√≠ch ho·∫°t ${passName} th√†nh c√¥ng!`);
            }
        }

        function buyPotion(type, price) {
            if (coins >= price) {
                coins -= price;
                
                if (type === '2x') {
                    inventory.potion_2x++;
                } else if (type === '3x') {
                    inventory.potion_3x++;
                } else if (type === '4x') {
                    inventory.potion_4x++;
                }
                
                updateDisplay();
                renderShop();
                alert(`‚úÖ ƒê√£ mua Potion ${type} th√†nh c√¥ng!`);
            } else {
                alert('‚ùå Kh√¥ng ƒë·ªß ti·ªÅn!');
            }
        }

        function buyDiscountTicket(percent, price) {
            if (coins >= price) {
                if (discountTicket > 0) {
                    alert('‚ö†Ô∏è ƒê√£ c√≥ v√© gi·∫£m gi√° ƒëang ho·∫°t ƒë·ªông! Vui l√≤ng ƒë·ª£i h·∫øt hi·ªáu l·ª±c.');
                    return;
                }
                
                coins -= price;
                discountTicket = percent;
                discountTicketTimer = 60;
                
                const timerElement = document.getElementById('discountTicketTimer');
                timerElement.classList.add('active');
                document.getElementById('ticketDiscountPercent').textContent = percent;
                
                discountTicketInterval = setInterval(() => {
                    discountTicketTimer--;
                    document.getElementById('ticketTimeLeft').textContent = discountTicketTimer;
                    
                    if (discountTicketTimer <= 0) {
                        clearInterval(discountTicketInterval);
                        discountTicket = 0;
                        timerElement.classList.remove('active');
                        updateDisplay();
                        renderShop();
                    }
                }, 1000);
                
                updateDisplay();
                renderShop();
                alert(`‚úÖ ƒê√£ k√≠ch ho·∫°t v√© gi·∫£m gi√° ${percent}% trong 60 gi√¢y!`);
            } else {
                alert('‚ùå Kh√¥ng ƒë·ªß ti·ªÅn!');
            }
        }

        function usePotion(type, multiplierValue) {
            let hasPotion = false;
            
            if (type === '2x' && inventory.potion_2x > 0) {
                inventory.potion_2x--;
                hasPotion = true;
            } else if (type === '3x' && inventory.potion_3x > 0) {
                inventory.potion_3x--;
                hasPotion = true;
            } else if (type === '4x' && inventory.potion_4x > 0) {
                inventory.potion_4x--;
                hasPotion = true;
            }
            
            if (!hasPotion) {
                alert('‚ùå Kh√¥ng c√≥ thu·ªëc n√†y trong t√∫i!');
                return;
            }
            
            if (activePotion) {
                alert('‚ö†Ô∏è ƒê√£ c√≥ thu·ªëc ƒëang ho·∫°t ƒë·ªông! Vui l√≤ng ƒë·ª£i h·∫øt hi·ªáu l·ª±c.');
                if (type === '2x') inventory.potion_2x++;
                else if (type === '3x') inventory.potion_3x++;
                else if (type === '4x') inventory.potion_4x++;
                return;
            }
            
            const oldMultiplier = multiplier;
            activePotion = type;
            multiplier = multiplier * multiplierValue;
            potionTimer = 60;
            
            const timerElement = document.getElementById('potionTimer');
            timerElement.classList.add('active');
            
            potionInterval = setInterval(() => {
                potionTimer--;
                document.getElementById('potionTimerText').textContent = `${type} - ${potionTimer}s`;
                
                if (potionTimer <= 0) {
                    clearInterval(potionInterval);
                    multiplier = oldMultiplier;
                    activePotion = null;
                    timerElement.classList.remove('active');
                    updateDisplay();
                }
            }, 1000);
            
            updateDisplay();
        }

        function resetAFKTimer() {
            if (isAfk || isBanned) return;
            
            afkTimeLeft = 1800;
            document.getElementById('afkWarning').classList.remove('active');
            
            if (afkTimer) {
                clearInterval(afkTimer);
            }
            
            afkTimer = setInterval(() => {
                afkTimeLeft--;
                
                if (afkTimeLeft <= 60 && afkTimeLeft > 0) {
                    document.getElementById('afkWarning').classList.add('active');
                    document.getElementById('afkCountdown').textContent = afkTimeLeft;
                }
                
                if (afkTimeLeft <= 0) {
                    clearInterval(afkTimer);
                    activateAFK();
                }
            }, 1000);
        }

        function activateAFK() {
            isAfk = true;
            document.getElementById('afkOverlay').classList.add('active');
            document.getElementById('afkWarning').classList.remove('active');
        }

        function resumeFromAFK() {
            isAfk = false;
            document.getElementById('afkOverlay').classList.remove('active');
            resetAFKTimer();
        }

        function updateRebirthUI() {
            const nextReq = rebirthCount < rebirthRequirements.length 
                ? rebirthRequirements[rebirthCount] 
                : rebirthRequirements[rebirthRequirements.length - 1] * Math.pow(2, rebirthCount - rebirthRequirements.length + 1);
            
            const nextMult = rebirthMultiplier + 0.75;
            const canRebirth = coins >= nextReq;
            
            document.getElementById('rebirthCountDisplay').textContent = rebirthCount;
            document.getElementById('rebirthMultiplierStat').textContent = `x${rebirthMultiplier.toFixed(2)}`;
            document.getElementById('nextRebirthReq').textContent = `${nextReq.toLocaleString()} coins`;
            document.getElementById('nextRebirthMult').textContent = `x${nextMult.toFixed(2)}`;
            document.getElementById('rebirthReqText').textContent = nextReq.toLocaleString();
            
            const rebirthBtn = document.getElementById('rebirthButton');
            if (canRebirth) {
                rebirthBtn.classList.remove('disabled');
            } else {
                rebirthBtn.classList.add('disabled');
            }
        }

        function performRebirth() {
            const nextReq = rebirthCount < rebirthRequirements.length 
                ? rebirthRequirements[rebirthCount] 
                : rebirthRequirements[rebirthRequirements.length - 1] * Math.pow(2, rebirthCount - rebirthRequirements.length + 1);
            
            if (coins < nextReq) {
                alert('‚ùå Kh√¥ng ƒë·ªß coins ƒë·ªÉ t√°i sinh!');
                return;
            }
            
            const confirm = window.confirm(
                `üîÑ X√ÅC NH·∫¨N T√ÅI SINH\n\n` +
                `B·∫°n s·∫Ω m·∫•t:\n` +
                `- T·∫•t c·∫£ coins\n` +
                `- T·∫•t c·∫£ v·∫≠t ph·∫©m ƒë√£ mua\n` +
                `- Click power, Auto clickers, Multiplier\n` +
                `- Cooldown v·ªÅ m·∫∑c ƒë·ªãnh\n` +
                `- Gi·∫£m gi√° v·ªÅ 0%\n` +
                `- S·ªë l·∫ßn mua items v·ªÅ 0\n\n` +
                `B·∫°n s·∫Ω gi·ªØ:\n` +
                `- Game Passes\n` +
                `- T√∫i ƒë·ªì (Potions)\n` +
                `- Th·ªùi gian ch∆°i\n` +
                `- T·∫•t c·∫£ Pets\n\n` +
                `B·∫°n s·∫Ω nh·∫≠n:\n` +
                `- +0.75x thu nh·∫≠p vƒ©nh vi·ªÖn (${rebirthMultiplier.toFixed(2)} ‚Üí ${(rebirthMultiplier + 0.75).toFixed(2)})\n` +
                `- +5 gi·ªõi h·∫°n mua v·∫≠t ph·∫©m (${purchaseLimit} ‚Üí ${purchaseLimit + 5})\n` +
                `- +50 üíé Kim C∆∞∆°ng\n\n` +
                `Ti·∫øp t·ª•c?`
            );
            
            if (!confirm) return;
            
            coins = 0;
            clickPower = 1;
            autoClickers = 0;
            multiplier = 1;
            clickCooldown = 0.5;
            shopDiscount = 0;
            
            shopItems.forEach(item => {
                item.currentPrice = item.basePrice;
                item.owned = 0;
            });
            
            purchaseCounts = {};
            
            rebirthCount++;
            rebirthMultiplier += 0.75;
            purchaseLimit += 5;
            diamonds += 50; // Th√™m 50 kim c∆∞∆°ng
            
            updateDisplay();
            renderShop();
            updateRebirthUI();
            
            alert(`‚úÖ T√°i sinh th√†nh c√¥ng!\nüåü Thu nh·∫≠p m·ªõi: x${rebirthMultiplier.toFixed(2)}\nüéØ Gi·ªõi h·∫°n mua m·ªõi: ${purchaseLimit}`);
        }

        function updateGamePassUI() {
            if (gamePasses.vip) {
                document.getElementById('vipCard').classList.add('owned');
                document.getElementById('vipStatus').className = 'gamepass-status owned';
                document.getElementById('vipStatus').textContent = '‚úÖ ƒê√£ s·ªü h·ªØu';
            }

            if (gamePasses.premium) {
                document.getElementById('premiumCard').classList.add('owned');
                document.getElementById('premiumStatus').className = 'gamepass-status owned';
                document.getElementById('premiumStatus').textContent = '‚úÖ ƒê√£ s·ªü h·ªØu';
            }

            if (gamePasses.legend) {
                document.getElementById('legendCard').classList.add('owned');
                document.getElementById('legendStatus').className = 'gamepass-status owned';
                document.getElementById('legendStatus').textContent = '‚úÖ ƒê√£ s·ªü h·ªØu';
            }
        }

        // ===== EGG & PETS SYSTEM =====
        function renderEggShop() {
            const eggGrid = document.getElementById('eggGrid');
            eggGrid.innerHTML = '';
            
            eggShop.forEach(egg => {
                const eggCard = document.createElement('div');
                eggCard.className = 'egg-card';
                
                eggCard.innerHTML = `
                    <div class="egg-icon">${egg.icon}</div>
                    <div class="egg-name">${egg.name}</div>
                    <div class="egg-price">üíé ${egg.price}</div>
                    <button class="egg-details-btn" onclick="event.stopPropagation(); showEggDetails(${egg.id})">üìä Xem T·ª∑ L·ªá</button>
                    <button class="admin-button" onclick="event.stopPropagation(); buyEgg(${egg.id})" style="margin-top: 10px; width: 100%;">Mua Tr·ª©ng</button>
                `;
                
                eggGrid.appendChild(eggCard);
            });
        }

        function showEggDetails(eggId) {
            const egg = eggShop.find(e => e.id === eggId);
            if (!egg) return;
            
            const modal = document.getElementById('eggDetailsModal');
            const overlay = document.getElementById('eggDetailsOverlay');
            
            let petsHTML = '';
            egg.pets.forEach(pet => {
                let rarity = 'common';
                if (pet.chance < 1) rarity = 'legendary';
                else if (pet.chance < 5) rarity = 'epic';
                else if (pet.chance < 15) rarity = 'rare';
                
                petsHTML += `
                    <div class="pet-chance-item ${rarity}">
                        <div class="pet-chance-info">
                            <div class="pet-chance-icon">${pet.icon}</div>
                            <div>
                                <div class="pet-chance-name">${pet.name}</div>
                                <div class="pet-chance-mult">x${pet.multiplier} multiplier</div>
                            </div>
                        </div>
                        <div class="pet-chance-percent">${pet.chance}%</div>
                    </div>
                `;
            });
            
            modal.innerHTML = `
                <div class="egg-details-title">${egg.icon} ${egg.name}</div>
                <div style="color: #00ffff; font-size: 1.2em; margin-bottom: 10px;">Gi√°: üíé ${egg.price}</div>
                <div style="margin-bottom: 15px; color: #ddd;">T·ª∑ l·ªá n·ªü ra c√°c pet:</div>
                <div class="pet-chance-list">
                    ${petsHTML}
                </div>
                <button class="close-modal-btn" onclick="closeEggDetails()">ƒê√≥ng</button>
            `;
            
            modal.style.display = 'block';
            overlay.style.display = 'block';
        }

        function closeEggDetails() {
            document.getElementById('eggDetailsModal').style.display = 'none';
            document.getElementById('eggDetailsOverlay').style.display = 'none';
        }

        function buyEgg(eggId) {
            const egg = eggShop.find(e => e.id === eggId);
            
            if (diamonds < egg.price) {
                alert(`‚ùå Kh√¥ng ƒë·ªß kim c∆∞∆°ng! C·∫ßn ${egg.price} üíé`);
                return;
            }
            
            diamonds -= egg.price;
            hatchEgg(egg);
            updateDisplay();
        }

        function hatchEgg(egg) {
            // Calculate which pet to hatch based on chances
            const random = Math.random() * 100;
            let cumulativeChance = 0;
            let hatchedPet = null;
            
            for (const pet of egg.pets) {
                cumulativeChance += pet.chance;
                if (random <= cumulativeChance) {
                    hatchedPet = pet;
                    break;
                }
            }
            
            if (!hatchedPet) {
                hatchedPet = egg.pets[egg.pets.length - 1];
            }
            
            // Add pet to collection
            const petKey = hatchedPet.name;
            if (!ownedPets[petKey]) {
                ownedPets[petKey] = {
                    ...hatchedPet,
                    count: 0
                };
            }
            ownedPets[petKey].count++;
            
            // Show hatch animation
            showHatchAnimation(egg, hatchedPet);
            
            // Update pets display
            renderPets();
        }

        function showHatchAnimation(egg, pet) {
            const animDiv = document.getElementById('hatchAnimation');
            animDiv.style.display = 'block';
            
            // Phase 1: Shaking egg
            animDiv.innerHTML = `
                <div class="hatch-animation">
                    <div class="hatch-egg">${egg.icon}</div>
                    <div class="hatch-text">ƒêang n·ªü...</div>
                </div>
            `;
            
            // Phase 2: Show result after 2 seconds
            setTimeout(() => {
                animDiv.innerHTML = `
                    <div class="hatch-animation">
                        <div class="hatch-result">${pet.icon}</div>
                        <div class="hatch-text">üéâ ${pet.name}!</div>
                        <div class="hatch-multiplier">x${pet.multiplier} Thu nh·∫≠p</div>
                        <button class="admin-button" onclick="closeHatchAnimation()" style="margin-top: 20px;">OK</button>
                    </div>
                `;
            }, 2000);
        }

        function closeHatchAnimation() {
            document.getElementById('hatchAnimation').style.display = 'none';
        }

        function renderPets() {
            const petsGrid = document.getElementById('petsGrid');
            petsGrid.innerHTML = '';
            
            const petArray = Object.entries(ownedPets).map(([key, pet]) => ({...pet, key})).sort((a, b) => b.multiplier - a.multiplier);
            
            if (petArray.length === 0) {
                petsGrid.innerHTML = '<div style="grid-column: 1/-1; text-align: center; padding: 40px; color: #999;">Ch∆∞a c√≥ pet n√†o. Mua tr·ª©ng ƒë·ªÉ b·∫Øt ƒë·∫ßu!</div>';
                renderEquippedPets();
                return;
            }
            
            petArray.forEach(pet => {
                const petCard = document.createElement('div');
                const equippedCount = equippedPets.filter(p => p.key === pet.key).length;
                const isEquipped = equippedCount > 0;
                petCard.className = `pet-card ${isEquipped ? 'equipped' : ''}`;
                
                // Escape single quotes in pet key for onclick
                const escapedKey = pet.key.replace(/'/g, "\\'");
                
                // Check if can equip more
                const canEquipMore = equippedCount < pet.count && equippedPets.length < MAX_EQUIPPED_PETS;
                
                petCard.innerHTML = `
                    ${isEquipped ? `<div class="pet-equipped-badge">‚úì ${equippedCount}/${pet.count}</div>` : ''}
                    <div class="pet-icon">${pet.icon}</div>
                    <div class="pet-name">${pet.name}</div>
                    <div class="pet-multiplier">x${pet.multiplier.toLocaleString()}</div>
                    <div class="pet-count">Owned: ${pet.count}</div>
                    <div class="pet-actions">
                        ${isEquipped 
                            ? `<button class="equip-btn" onclick="unequipPetOnce('${escapedKey}')" style="background: linear-gradient(135deg, #ff6b6b 0%, #ff4444 100%);">G·ª° 1</button>`
                            : ''}
                        <button class="equip-btn" onclick="equipPet('${escapedKey}')" ${!canEquipMore ? 'disabled' : ''}>
                            ${equippedCount >= pet.count ? 'H·∫øt' : 'Trang B·ªã'}
                        </button>
                        }
                    </div>
                `;
                
                petsGrid.appendChild(petCard);
            });
            
            renderEquippedPets();
        }

        function renderEquippedPets() {
            const equippedBar = document.getElementById('equippedPetsBar');
            equippedBar.innerHTML = '';
            
            // Render 5 slots
            for (let i = 0; i < MAX_EQUIPPED_PETS; i++) {
                const slot = document.createElement('div');
                
                if (equippedPets[i]) {
                    const pet = equippedPets[i];
                    slot.className = 'equipped-slot filled';
                    slot.innerHTML = `
                        <button class="unequip-btn" onclick="unequipPetByIndex(${i})">√ó</button>
                        <div class="equipped-pet-icon">${pet.icon}</div>
                        <div class="equipped-pet-mult">x${pet.multiplier}</div>
                    `;
                } else {
                    slot.className = 'equipped-slot';
                    slot.innerHTML = '<div style="color: #666; font-size: 0.8em;">Empty</div>';
                }
                
                equippedBar.appendChild(slot);
            }
        }

        function equipPet(petKey) {
            if (equippedPets.length >= MAX_EQUIPPED_PETS) {
                alert('‚ùå ƒê√£ ƒë·∫°t gi·ªõi h·∫°n 5 pets! G·ª° pet kh√°c ƒë·ªÉ trang b·ªã pet m·ªõi.');
                return;
            }
            
            const pet = ownedPets[petKey];
            if (!pet) return;
            
            // Count how many of this pet are already equipped
            const equippedCount = equippedPets.filter(p => p.key === petKey).length;
            
            // Check if owned enough
            if (equippedCount >= pet.count) {
                alert(`‚ö†Ô∏è B·∫°n ch·ªâ c√≥ ${pet.count} con ${pet.name}, ƒë√£ trang b·ªã ${equippedCount} con r·ªìi!`);
                return;
            }
            
            equippedPets.push({...pet, key: petKey});
            renderPets();
            updateDisplay();
            alert(`‚úÖ ƒê√£ trang b·ªã ${pet.name}! (${equippedCount + 1}/${pet.count})`);
        }

        function unequipPet(petKey) {
            equippedPets = equippedPets.filter(p => p.key !== petKey);
            renderPets();
            updateDisplay();
            
            const pet = ownedPets[petKey];
            if (pet) {
                alert(`‚úÖ ƒê√£ g·ª° t·∫•t c·∫£ ${pet.name}!`);
            }
        }

        function unequipPetOnce(petKey) {
            // Find first index of this pet and remove only one
            const index = equippedPets.findIndex(p => p.key === petKey);
            if (index !== -1) {
                equippedPets.splice(index, 1);
                renderPets();
                updateDisplay();
                
                const pet = ownedPets[petKey];
                const remainingCount = equippedPets.filter(p => p.key === petKey).length;
                if (pet) {
                    alert(`‚úÖ ƒê√£ g·ª° 1 con ${pet.name}! (C√≤n ${remainingCount} equipped)`);
                }
            }
        }

        function unequipPetByIndex(index) {
            if (equippedPets[index]) {
                const pet = equippedPets[index];
                equippedPets.splice(index, 1);
                renderPets();
                updateDisplay();
                alert(`‚úÖ ƒê√£ g·ª° ${pet.name}!`);
            }
        }

        function equipBestPets() {
            // Get all owned pets sorted by multiplier (descending)
            const petArray = Object.entries(ownedPets)
                .map(([key, pet]) => ({...pet, key}))
                .sort((a, b) => b.multiplier - a.multiplier);
            
            if (petArray.length === 0) {
                alert('‚ùå B·∫°n ch∆∞a c√≥ pet n√†o!');
                return;
            }
            
            // Clear current equipped pets
            equippedPets = [];
            
            // Equip top 5 pets (or all if less than 5)
            const petsToEquip = petArray.slice(0, MAX_EQUIPPED_PETS);
            petsToEquip.forEach(pet => {
                equippedPets.push({...pet, key: pet.key});
            });
            
            renderPets();
            updateDisplay();
            
            const equippedNames = petsToEquip.map(p => p.icon + ' ' + p.name).join(', ');
            alert(`‚úÖ ƒê√£ trang b·ªã ${petsToEquip.length} pets m·∫°nh nh·∫•t:\n${equippedNames}`);
        }

        function unequipAllPets() {
            if (equippedPets.length === 0) {
                alert('‚ö†Ô∏è Kh√¥ng c√≥ pet n√†o ƒëang trang b·ªã!');
                return;
            }
            
            const count = equippedPets.length;
            equippedPets = [];
            renderPets();
            updateDisplay();
            
            alert(`‚úÖ ƒê√£ g·ª° ${count} pets!`);
        }

        function getPetMultiplier() {
            let totalMult = 1;
            equippedPets.forEach(pet => {
                // Each equipped pet applies its multiplier based on owned count
                const ownedPet = ownedPets[pet.key];
                if (ownedPet) {
                    totalMult *= Math.pow(pet.multiplier, ownedPet.count);
                }
            });
            return totalMult;
        }

        // ===== CLICK BUTTON EVENT =====
        document.getElementById('clickButton').addEventListener('click', function(e) {
            e.preventDefault();
            
            if (!canClick || isAfk || isBanned) return;
            
            // Ki·ªÉm tra auto clicker TR∆Ø·ªöC khi x·ª≠ l√Ω click
            if (checkAutoClicker()) {
                return; // D·ª´ng ngay n·∫øu ph√°t hi·ªán auto clicker
            }
            
            resetAFKTimer();
            
            // √Åp d·ª•ng multiplier t·ª´ weather v√† pets
            const weatherMult = getWeatherMultiplier();
            const petMult = getPetMultiplier();
            const totalMultiplier = multiplier * rebirthMultiplier * weatherMult * petMult;
            coins += clickPower * totalMultiplier;
            updateDisplay();
            renderShop();
            updateRebirthUI();
            
            // B·∫Øt ƒë·∫ßu cooldown
            canClick = false;
            this.classList.add('disabled');
            
            setTimeout(() => {
                canClick = true;
                this.classList.remove('disabled');
            }, clickCooldown * 1000);
        });

        // Auto clicker
        setInterval(() => {
            if (autoClickers > 0 && !isAfk && !isBanned) {
                const weatherMult = getWeatherMultiplier();
                const petMult = getPetMultiplier();
                const totalMultiplier = multiplier * rebirthMultiplier * weatherMult * petMult;
                coins += autoClickers * totalMultiplier;
                updateDisplay();
                renderShop();
                updateRebirthUI();
            }
        }, 1000);

        // Weather spawn checker (every second)
        setInterval(() => {
            checkWeatherSpawns();
        }, 1000);

        // Initialize
        updateDisplay();
        renderShop();
        updateGamePassUI();
        updateRebirthUI();
        resetAFKTimer();
        updateWeatherDisplay();
        renderEggShop();
        renderPets();

        // Playtime counter
        playTimeInterval = setInterval(() => {
            if (!isAfk && !isBanned) {
                playTime++;
                updateDisplay();
            }
        }, 1000);

        // Event listeners ƒë·ªÉ reset AFK timer
        document.addEventListener('mousemove', resetAFKTimer);
        document.addEventListener('keypress', resetAFKTimer);
        document.addEventListener('scroll', resetAFKTimer);
        document.addEventListener('touchstart', resetAFKTimer);
    </script>
</body>
</html>
